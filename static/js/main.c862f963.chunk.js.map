{"version":3,"sources":["components/menu/menu.module.scss","components/hungerMeter/hungerMeter.module.scss","sprites/yellow-chicken-1.png","sprites/food1.png","components/farm/farm.module.scss","components/info/info.module.scss","sprites/brown-chicken-1.png","sprites/brown-chicken-2.png","sprites/brown-chicken-3.png","sprites/orange-chicken-1.png","sprites/orange-chicken-2.png","sprites/orange-chicken-3.png","sprites/yellow-chicken-2.png","sprites/yellow-chicken-3.png","sprites/hen-house.png","sprites/water.png","sprites/food2.png","sprites/food3.png","components/StaticCanvas/staticCanvas.module.scss","components/chickenCanvas/chickenCanvas.module.scss","components/foodCanvas/foodCanvas.module.scss","models/chicken.ts","utils/loadImages.ts","utils/idGenerator.ts","types/types.ts","utils/localStorage.ts","components/farm/actions.ts","utils/chickenNameUtils.ts","utils/drawChickens.ts","models/staticObject.ts","utils/drawObjects.ts","models/food.ts","utils/drawFood.ts","components/farm/reducer.ts","components/StaticCanvas/StaticCanvas.tsx","components/hungerMeter/HungerMeter.tsx","components/info/Info.tsx","components/menu/Menu.tsx","utils/saveItems.ts","components/chickenCanvas/ChickenCanvas.tsx","utils/distance.ts","utils/devices.ts","components/foodCanvas/FoodCanvas.tsx","gameConsts.ts","components/farm/Farm.tsx","utils/useWindowDimensions.ts","serviceWorker.js","index.js"],"names":["module","exports","ChickenState","loadMultipleImages","urls","Promise","all","map","url","resolve","img","Image","src","onload","onerror","loadImage","then","imgs","filter","Boolean","generateId","Math","random","toString","substr","ChickenBreed","StorageKeys","Chicken","id","width","height","originalWidth","originalHeight","breed","top","left","hungerMeter","name","gender","widthChangeRatio","heightChangeRatio","imgIndex","currentImg","state","walking","restingTurns","food","lastHungerIncrease","hasRequestedFood","removeFood","requestFood","timestamp","fps","this","originalTop","round","naturalHeight","originalLeft","naturalWidth","ctx","resizedHeight","resizedWidth","updateToResizedPosition","updateFoodMeter","hasFood","hasReachedFood","updateState","eating","eat","walkingToFood","walkToFood","shouldRest","resting","rest","walkRandomly","draw","reachedFood","hasFinished","stopEating","undefined","min","isHungry","searchForFood","drawImage","dx","dy","goToCoordinates","walk","isAvailable","clearFood","getFoodDistance","max","startEating","length","sec","abs","FarmActions","storageKeysToDefaultMap","chickens","getStorageKey","key","value","window","localStorage","getItem","Error","JSON","parse","getAvailableNames","usedNames","female","chickenNames","includes","male","generateName","availableNames","names","floor","getChickens","a","brownChicken1","brownChicken2","brownChicken3","orangeChicken1","orangeChicken2","orangeChicken3","yellowChicken1","yellowChicken2","yellowChicken3","images","brown","orange","yellow","imagesBreedMap","savedChickens","Object","keys","reduce","index","chicken","push","props","StaticObject","deviationX","deviationY","createObjects","henHouse","waterHole","houseProps","waterProps","Food","foodMeter","animalsEating","getImg","i","indexOf","splice","getFoodImgs","food1","food2","food3","toggleFeedingAction","type","toggleFeeding","initialFarmState","objects","isFeeding","isDragging","isInfoOpen","farmReducer","action","setChickens","payload","setFood","addFood","setObjects","toggleDragging","toggleInfo","StaticCanvas","canvasRef","useRef","useEffect","current","getContext","imageSmoothingEnabled","clearRect","forEach","object","update","drawStaticObjects","ref","className","styles","canvas","HungerMeter","hunger","hungerRow","hungerLabel","hungerMarker","style","Info","isOpen","useState","setTime","setInterval","Date","now","clearInterval","info","title","hr","getHungerMeter","renderChickensHunger","Menu","dispatch","cx","menu","visible","toolBar","farmButton","active","onClick","e","stopPropagation","chickenUrl","alt","foodUrl","saveItemsToStorage","storageKey","items","storage","item","getSavingState","setItem","stringify","console","error","setStorageKey","saveItemsOnInterval","ChickenCanvas","animationIdRef","performance","drawChickens","getDistance","b","sqrt","isTouchEvent","throtteFoodDrop","throttle","leading","trailing","FoodCanvas","foodImages","isDraggingFood","toggleFoodDragging","useCallback","preventDefault","dropFood","pos","touches","clientX","clientY","getInteractionPos","persist","onDragFinished","frameCount","cancelAnimationFrame","loop","singleFood","requestAnimationFrame","drawFoodObjects","stopFeedingOnEsc","code","document","addEventListener","removeEventListener","disableFeedingOnEsc","onTouchStart","onTouchEnd","onTouchMove","onMouseDown","onMouseUp","onMouseMove","setGameItems","setFoodImgs","foodImgs","savedFood","getFood","getClosestFood","coord","allAvailableFood","closestItem","closest","Infinity","distance","getClosest","Farm","memo","resizeBy","innerWidth","innerHeight","setDimensions","handleResize","debounce","useWindowDimensions","useReducer","addFoodAction","setObjectsAction","setChickensAction","setFoodAction","setFoodMethods","linkFoodToChickens","removeFoodAction","wrapper","feeding","bg","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c862f963.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"menu_menu__2vPAR\",\"visible\":\"menu_visible__3jm2d\",\"toolBar\":\"menu_toolBar__jeKpg\",\"farmButton\":\"menu_farmButton__3Te1g\",\"active\":\"menu_active__21Ixu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hungerRow\":\"hungerMeter_hungerRow__39EdJ\",\"hungerLabel\":\"hungerMeter_hungerLabel__pYFKg\",\"hungerMeter\":\"hungerMeter_hungerMeter__3K0D1\",\"hungerMarker\":\"hungerMeter_hungerMarker__3jRbO\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAA2UlEQVQ4T2NkwAIstWT+H7/2hBGbHLIYhgKQxqQP7xjmCQgxEDIARTNM4x0pcYZD337TSTPI1m29kQwMijoQb92/wuBVvByv7XBngzWva2XwCqoG64Wx8fkbrBmssYkHYqNOJTxAQQYha0aPBQybUaIH6nSYGLprEDava4X7Fezv+1cgfFgYIJkKcxFCMzSwQBIgG0AAg42kBuQdVM0gDcXL4ZpRDEDyAiwcUP2MZDLcnyAxqPPRAxAjhYHjGgvAFudY0zY4npt4GLzqvsBpbPGNNefA4p2QZgCIpZgQUlRE4QAAAABJRU5ErkJgggAA\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAYUlEQVQ4T2NkoBAwUqifYQgYwMbG8R/kzV+/fmB1LV4vgDRPu2rNYCWuyGAgsgSrIQTDgCIXEBNDGC4gZCO6oSgG4PMzLoOJcgE+gwkGIszJRLuAmIBDVkO0C3AZPPAGAAD7jC0R4as9ogAAAABJRU5ErkJgggAA\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"farm_wrapper__3IXTL\",\"bg\":\"farm_bg__3rsuD\",\"feeding\":\"farm_feeding__3K0PI\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"info\":\"info_info__rQiOK\",\"title\":\"info_title__vsvEd\",\"hr\":\"info_hr__1w1tE\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAAXNSR0IArs4c6QAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAAPhJREFUKBWNkTEOAVEQhofQiF6CSkMUW9M4wB5D7RTO4BjqPYCGWiGRiIoWlUax9pvsbOZtXsIkm52Z9////G+eyB8xnw7zGKwZa/oexOXrITGBn2SELv2exAT+InsnPm/4op5jddFpS5KM9Oh4vMru/ZH96aa8n5Mhbg5n/UzEhgTk2FIArmZj/dL0Ltm6Wy2vZSoQARVRPQuWfWTZQB2YbfXuiB4r3JHALrnZ5hoIBLYBcGDBcoxATpggudoubahds4pIeQ1wGp5II3gqs28gmwYQIfr+qQIyIARsOrUPT/T9IEfguZ3k/k8egIoiWFj90Nf2PL73BVmidJM6U/0/AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAA2UlEQVQ4T2NkoAAwEqPXUkvm//FrTzDUEtQM0pj04R3DPAEhBnQDiNJsx8XKoPLsJYYBtNMMcjLIVj09JXDQXLp0j+HQt99w5+O1GaQ5x0KdYcqJm2DNMDbM7yia0UMVphkWI15eT8FMr7ovYNvhmtFtASlCdjLMAJArUGxGtwGmEORHEAD5GcSG+R1mANhmmGZYgID8BgIgRehs5EBDcTayU5E1wgwCeQMEYCGOEWAwBTBFMC+AXEAwqkBeAGnY1sQDDlUYDTMEOYlixDNIM0wDSCE6HzkjAQALWZgQQhdf+AAAAABJRU5ErkJgggAA\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAxklEQVQ4T2NkoAAwUqCXgSjNlloy/49fe4KhlqBmkMakD+8Y5gkIMaAbQJRmOy5WBpVnLzEMoJ1mkJNBturpKYHD9dKlewyHvv2GOx/FZvSAAfFzLNQZppy4CdYMY8P8DteMrhCmGDkqvbyegrledV/AtoM1wzSixznImSAAcjaIDaJBrkCxGaYZ5ieQ80AApBAXG24zzHYQDQsgZI3IBiEHGkaAgWyCORcUsjAAE8cZ2jAXgGzHBpA1guSxJhJQGGDTjJ48Ae0WhxAxBBGoAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAA/0lEQVQ4T2NkIAJYasn8P37tCSO6UgwBdAUgjUkf3jHMExBiQDeAKM12XKwMKs9eYhhAO80gJ28T+MDAoK8M8c3FuwxeHwTgzsdrM1izvTCD18G3YL0wNszvKJrRQxWmGR6Izj/BTK+6L2Db4ZpBCt9Z+TAIHdsCV4viZKgoyBUoNsM0okfTiWtLIEIgP1+8C6dh/gbbDNP88fZFBsXXjxlALgi4sJPh0LffYH+CnXrwLQPIJZqsumA1GM4GKbovKsvAr6oPdj5MIyyUQXIggKEZ2QUgNswVMK+AXAMTwxra2AxADgeYjTAxrPEMjqImHnCUwGiQBqLSNjbN2HIVALxhoxCi5+fxAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAAXNSR0IArs4c6QAAAVlpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IlhNUCBDb3JlIDUuNC4wIj4KICAgPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KICAgICAgPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iPgogICAgICAgICA8dGlmZjpPcmllbnRhdGlvbj4xPC90aWZmOk9yaWVudGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KTMInWQAAARRJREFUKBW1UbGOQUEUPSs220hWyEYiFKKxm4jaNgqd+Aq9n/AtSqW8TqFBq6FAFHSCt6WKOZeZ3PcyCc3eZN67c2bOuefeAf476j+Fq69GwgdqjMROeIJP4CmZQut8Dj6Bl8jaic7f9Cae02qQDoFa+X4036AVpjFd7IX3vLIhtsZHWU7kUSVC9g2F94JGVhaaFwS9lBte8iEiwOm3jTqG7lnEMrL2CjD6EAfWtnhnRRLjMVv07xB7Nv2KbdV3xPbfao7MZOg0OBzbp+SG+P1ededimzZoN2Pg7VcRn+ZPEfaqQxOJR56K9km2UTrsbAq2RWfEbM8R2wR5yLXsnoXI6TLoRBMFjH9Y/TyoXO2zxff6/g0TmXObC3ZmMAAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAA40lEQVQ4T2NkoAAwUqCXAatmSy2Z/8evPSFoMIYCkMakD+8Y5gkIMRAyAEUzTOMdKXGGQ99+00kzyNZtAh8YGPSVIWF48S6D1wcBvLbDnQ3WbC/M4HXwLVgvjI3sb/SABGsGa2zigdi4lx0l9mCGgQTfWfkwCB3bAncNhs0g54KdDqIZGBgstGIwkgLMALjNIFNPsB4HOxvkZBAAsUHiIADScF9UloFfVR9uO1wzsgRMM7IBH29fZFB8/RhsECwcUJyNbADMrSAxEEC2ESaHkUhgitE9CrIVPcVhTZ7YMgu2pAoAZ9iDEPlbDrYAAAAASUVORK5CYIIA\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAA3ElEQVQ4T2NkoAAwYtNrqSXz//i1J1jlkNVjKABpTPrwjmGegBADIQNQNMM03pESZzj07TedNINs3dYbycCgqAPx1v0rDF7Fy/HaDnc2WPO6VgavoGqwXhgbn7/BmsEam3ggNupUwgMUZBCyZvRYwLAZJeqgToeJobsGYfO6Vrhfwf6+fwXCh4UBkqkwFyE0QwMLJAGyAQQw2EhqQN5B1QzSULwcrhnFACQvwMIB1c9IJsP9CRKDAvSow0hhcE1NPAxedV8YQLEAokEAPdqwpm2YBpBiWDSCDEDXDAAJCpUQ3ocHKgAAAABJRU5ErkJgggAA\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAxElEQVQ4T2NkoAAwUqCXAatmSy2Z/8evPSFoMIYCkMakD+8Y5gkIMRAyAEUzTOMdKXGGQ99+00kzyNZtvZEMDIo6kDC8f4XBq3g5XtvhzgZrXtfK4BVUDdYLYyP7Gz0gwZrBGpt4IDbqVKLEHswwbAZi2AxyLtjpIBoEYN5AMhJkIMhFCJvXtYKlQRIgJ2NlQ8MEUzOSBEwzigHQAASJwcIB1dlIBsBcCY4BqPNhNsLkMBIJXDFaoscWbViTJ7bMgi2pAgArfH8QF4tK0wAAAABJRU5ErkJgggAA\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAANCAYAAADISGwcAAABCUlEQVQ4T2NkQANsbBz/0cWoyf/16wcjsnkoHJDlusaW1LQPw6zLZ48zIDsC7gCY5eLSimBNyoraVHXI3ftXwea9fHqfAdkRYAcgWw5S8PC3MoOIRgJVHcB9txZsHsiDyI5gJMbyGHsFhiUHHzCAaGQAEwPRMICuFlnuzY0FDPKsdxmsbHwYjh3ZAg4JuANgBoB8DwPUCgWQxTAAcgByKMAdEBGVx7Bi2SSqBjsuw2B2oYQAKFjk5JTo4oBHj+5hjwKQI+gBQPEPAuAQQM4F9LAcZgcsK2LNhiBJEAAVSjA2uY5DNgPExsiGMINh2RG5kACJ/UIrOkl1CLIZ2OzAKIoptZCQA9E9BQB8PqttWv0ktAAAAABJRU5ErkJgggAA\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAc0lEQVQ4T2NkoBAwUqifAcUANjaO/yADf/36QbTBcIUgzdOuWjNYiSsyGIgswWoINguIdgEuC4h2KshrBF2AHKDEhgdWFxATHjDLcHqBIhdgSxu4DCQqEPF5iaRoxJbISEpI2LxGtAtw5RmiwgBfhqPYAACig0sRfRXPlAAAAABJRU5ErkJgggAA\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAiElEQVQ4T2NkQANsbBz/QUK/fv1gRJfDxkdRBNI87ao1g5W4IoOByBKiDMGwhRgXIKshypnITkd3JdwAbDbjcg2GC7D5ndjwIMkF2FxEVBjANGKLIawGINuE7hX0NII1GtFtwhe1BF1AKDUSFQYwQ4gKRHxxTzAQcaUHWMCR7AJiEhPBMCCUuQCBBIskpUxGvgAAAABJRU5ErkJgggAA\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvas\":\"staticCanvas_canvas__YAp_u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvas\":\"chickenCanvas_canvas__zRbUl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvas\":\"foodCanvas_canvas__3BMP1\"};","import { ChickenBreed, Coordinates, Gender } from \"../types/types\";\nimport { Food } from \"../models/food\";\nimport { generateId } from \"../utils/idGenerator\";\n\nconst MOVEMENT_PX = 2;\nexport const HUNGER_MIN = 30;\nconst MIN_DISTANCE_TO_EAT = 5;\n\nconst RESTING_TURNS_PER_SEC = 10;\nconst RESTING_PROBABILITY_PER_SEC = 20;\nconst HUNGER_THRESHOLD = process.env.NODE_ENV === \"development\" ? 2000 : 60000; // every 1 min hunger will increase\n\nconst setTurnsFromSec = (sec: number, fps: number) => Math.round(sec * fps);\nconst getProbabilityFromSec = (sec: number, fps: number) => Math.round(sec / fps);\n\nexport interface ChickenProps {\n  imgs: HTMLImageElement[];\n  name: string;\n  gender: Gender;\n  width: number;\n  height: number;\n  originalWidth?: number;\n  originalHeight?: number;\n  id?: string;\n  breed: ChickenBreed;\n  top?: number;\n  left?: number;\n  hungerMeter?: number;\n}\n\nexport type SavedChickenState = Pick<ChickenProps, \"breed\"|\"id\"|\"top\"|\"left\"|\"hungerMeter\"|\"originalHeight\"|\"originalWidth\"|\"gender\"|\"name\">;\n\nenum ChickenState {\n  eating,\n  walkingToFood,\n  walking,\n  resting,\n}\n\nexport class Chicken {\n  private imgs: HTMLImageElement[];\n  private width: number;\n  private height: number;\n  private originalWidth: number;\n  private originalHeight: number;\n  private widthChangeRatio: number;\n  private heightChangeRatio: number;\n  private imgIndex = 0;\n  private top: number;\n  private left: number;\n  private currentImg: HTMLImageElement;\n  private breed: ChickenBreed;\n  private state = ChickenState.walking;\n  private restingTurns = 0;\n  private food: Food | undefined;\n  private hungerMeter: number;\n  private lastHungerIncrease = 0;\n  private hasRequestedFood = false;\n  private removeFood: ((id: string) => void) | undefined;\n  private requestFood: ((props: Coordinates) => Food | undefined) | undefined;\n  private timestamp = 0;\n  private fps = 0;\n  public id: string;\n  public name: string;\n  public gender: Gender;\n\n  constructor({ imgs, id, width, height, originalWidth, originalHeight, breed, top, left, hungerMeter, name, gender }: ChickenProps) {\n    this.imgs = imgs;\n    this.currentImg = this.imgs[this.imgIndex];\n    this.width = width;\n    this.height = height;\n    this.originalWidth = originalWidth || this.width;\n    this.originalHeight = originalHeight || this.height;\n    this.heightChangeRatio = height / this.originalHeight;\n    this.widthChangeRatio = width / this.originalWidth;\n    const originalTop = top || Math.round(Math.random() * (this.height - this.imgs[0].naturalHeight));\n    const originalLeft = left || Math.round(Math.random() * (this.width - this.imgs[0].naturalWidth));\n    this.top = originalTop * this.heightChangeRatio;\n    this.left = originalLeft * this.widthChangeRatio;\n    this.breed = breed;\n    this.hungerMeter = hungerMeter || 0;\n    this.id = id || generateId();\n    this.name = name;\n    this.gender = gender;\n  }\n\n  public update({ ctx, timestamp, resizedHeight, resizedWidth }: {\n    ctx: CanvasRenderingContext2D,\n    timestamp: number,\n    resizedWidth: number,\n    resizedHeight: number\n  }) {\n    this.fps = 1000 / (timestamp - this.timestamp)\n    this.timestamp = timestamp;\n\n    this.updateToResizedPosition(resizedWidth, resizedHeight);\n    this.updateFoodMeter();\n\n    if(this.hasFood()) {\n      if(this.hasReachedFood()) {\n        this.updateState(ChickenState.eating);\n        this.eat();\n      } else {\n        this.updateState(ChickenState.walkingToFood);\n        this.walkToFood();\n      }\n    } else if(this.shouldRest()) {\n      this.updateState(ChickenState.resting);\n      this.rest()\n    } else {\n      this.updateState(ChickenState.walking);\n      this.walkRandomly();\n    }\n\n    this.draw(ctx);\n  }\n\n  public getBreed() {\n    return this.breed;\n  }\n\n  public getHungerMeter() {\n    return this.hungerMeter;\n  }\n\n  public setFoodMethods(\n    removeFood: (id: string) => void,\n    requestFood: (props: Coordinates) => Food | undefined,\n  ) {\n    this.removeFood = removeFood;\n    this.requestFood = requestFood;\n  }\n\n  public getSavingState() {\n    return {\n      left: this.left / this.widthChangeRatio,\n      top: this.top / this.heightChangeRatio,\n      breed: this.breed,\n      hungerMeter: this.hungerMeter,\n      originalHeight: this.originalHeight,\n      originalWidth: this.originalWidth,\n      id: this.id,\n      name: this.name,\n      gender: this.gender,\n    }\n  }\n\n  private updateToResizedPosition(resizedWidth: number, resizedHeight: number) {\n    if(resizedWidth !== this.width || resizedHeight !== this.height) {\n      this.left = this.left * (resizedWidth / this.width);\n      this.top = this.top * (resizedHeight / this.height);\n\n      this.width = resizedWidth;\n      this.height = resizedHeight;\n    }\n  }\n\n  private hasFood() {\n    return !!this.food;\n  }\n\n  private isHungry() {\n    return this.hungerMeter > HUNGER_MIN;\n  }\n\n  private searchForFood() {\n    if(!this.requestFood) {\n      return;\n    }\n    this.food = this.requestFood({ left: this.left, top: this.top });\n    if(this.food) {\n      this.hasRequestedFood = true;\n    }\n  }\n\n  private clearFood(reachedFood = true) {\n    this.hasRequestedFood = false;\n    if(!this.food || !this.removeFood) {\n      return;\n    }\n    if(this.food.hasFinished()) {\n      this.removeFood(this.food.id);\n    } else if(reachedFood) {\n      this.food.stopEating(this.id);\n    }\n    this.food = undefined;\n  }\n\n  private updateFoodMeter() {\n    if(this.state === ChickenState.eating) {\n      this.lastHungerIncrease = 0;\n      return;\n    }\n\n    if(this.timestamp - this.lastHungerIncrease >= HUNGER_THRESHOLD) {\n      this.hungerMeter = Math.min(this.hungerMeter + 1, 100);\n      this.lastHungerIncrease = this.timestamp;\n    }\n\n    if(this.isHungry() && !this.hasRequestedFood) {\n      this.searchForFood();\n    }\n  }\n\n  private draw(ctx: CanvasRenderingContext2D) {\n    ctx.drawImage(\n      this.currentImg,\n      0,\n      0,\n      this.currentImg.naturalWidth,\n      this.currentImg.naturalHeight,\n      this.left,\n      this.top,\n      this.currentImg.naturalWidth,\n      this.currentImg.naturalHeight\n    );\n  }\n\n  private walkRandomly() {\n    const dx = Math.round(Math.random() * 1);\n    const dy = Math.round(Math.random() * 1);\n\n    this.goToCoordinates(dx, dy);\n    this.walk();\n  }\n\n  private getFoodDistance({ left, top }: Coordinates) {\n    return {\n      dx: left - this.left,\n      dy: top - this.top,\n    }\n  }\n\n  private walkToFood() {\n    if(!this.food || !this.food.isAvailable() || this.food.hasFinished()) {\n      this.clearFood(false);\n      this.walkRandomly();\n      return;\n    }\n\n    const { dx, dy } = this.getFoodDistance(this.food);\n    this.goToCoordinates(dx, dy);\n    this.walk();\n  }\n\n  private goToCoordinates(dx: number, dy: number) {\n    this.top = dy > 0\n      ? Math.min(this.top + MOVEMENT_PX, this.height - this.currentImg.naturalHeight)\n      : Math.max(this.top - MOVEMENT_PX, 0)\n    ;\n\n    this.left = dx > 0\n      ? Math.min(this.left + MOVEMENT_PX, this.width - this.currentImg.naturalWidth)\n      : Math.max(this.left - MOVEMENT_PX, 0)\n    ;\n  }\n\n  private updateState(state: ChickenState) {\n    this.state = state;\n  }\n\n  private eat() {\n    if(!this.food) {\n      return;\n    }\n    this.food.startEating(this.id);\n    this.hungerMeter = Math.max(this.hungerMeter - 1, 0);\n    this.food.updateFoodMeter();\n    if(!this.hungerMeter || this.food.hasFinished()) {\n      this.clearFood();\n    }\n  }\n\n  private walk() {\n    this.currentImg = this.imgs[this.imgIndex];\n    this.imgIndex = this.imgIndex + 1 >= this.imgs.length - 1 ? 0 : this.imgIndex + 1;\n  }\n\n  private rest() {\n    this.currentImg = this.imgs[this.imgs.length - 1];\n    this.restingTurns = this.restingTurns\n      ? Math.max(this.restingTurns - 1, 0)\n      : setTurnsFromSec(RESTING_TURNS_PER_SEC, this.fps);\n  }\n\n  private shouldRest() {\n    return (\n      this.restingTurns\n      || (\n        !this.restingTurns\n        && (Math.random() * 100) < getProbabilityFromSec(RESTING_PROBABILITY_PER_SEC, this.fps)\n      )\n    );\n  }\n\n  private hasReachedFood() {\n    if(!this.food) {\n      return false;\n    }\n    const { dx, dy } = this.getFoodDistance(this.food);\n    return Math.abs(dx) <= MIN_DISTANCE_TO_EAT && Math.abs(dy) <= MIN_DISTANCE_TO_EAT;\n  }\n}\n","export const loadImage = (url: string): Promise<HTMLImageElement|undefined> => {\n  return new Promise((resolve) => {\n    const img = new Image();\n    img.src = url;\n    img.onload = () => resolve(img);\n    img.onerror = () => resolve();\n  });\n};\n\nexport const loadMultipleImages = (urls: string[]): Promise<HTMLImageElement[]> => {\n  return Promise.all(\n    urls.map(url => loadImage(url))\n  ).then(imgs => imgs.filter(Boolean)) as Promise<HTMLImageElement[]>;\n}\n","export const generateId = () => Math.random().toString(36).substr(2, 9);\n","import { Chicken } from \"../models/chicken\";\nimport { StaticObject } from \"../models/staticObject\";\nimport { Food } from \"../models/food\";\n\nexport interface Coordinates {\n  left: number;\n  top: number;\n}\n\nexport interface StaticItems {\n  objects: StaticObject[];\n}\n\nexport interface FoodItems {\n  food: Food[];\n}\n\nexport interface ChickenItems {\n  chickens: Chicken[];\n}\n\nexport type FarmItems = StaticItems & ChickenItems & FoodItems;\n\nexport enum ChickenBreed {\n  brown = \"brown\",\n  orange = \"orange\",\n  yellow = \"yellow\",\n}\n\nexport type InteractEvent<E> = React.MouseEvent<E> | React.TouchEvent<E>;\n\nexport interface DrawProps {\n  canvasRef: React.RefObject<HTMLCanvasElement>,\n  resizedWidth: number,\n  resizedHeight: number,\n}\n\nexport type Gender = 'female' | 'male';\n\nexport type ChickenNames = Record<Gender, string[]>;\n","export enum StorageKeys {\n  chickens = \"chickens\",\n  food = \"food\",\n}\n\nconst storageKeysToDefaultMap: { [key in StorageKeys]: any } = {\n  [StorageKeys.chickens]: null,\n  [StorageKeys.food]: null,\n};\n\nexport const getStorageKey = (key: StorageKeys): any => {\n  try {\n    const value = window.localStorage.getItem(key);\n    if (value === null) {\n      throw Error;\n    }\n    return JSON.parse(value);\n  } catch {\n    return storageKeysToDefaultMap[key];\n  }\n};\n\nexport const setStorageKey = (key: StorageKeys, value: any) => {\n  try {\n    window.localStorage.setItem(key, JSON.stringify(value));\n  } catch {\n    console.error(\"Not possible to set item\", key, \"in local storage\");\n  }\n};\n\nexport const clearStorageKey = (key: StorageKeys) => {\n  window.localStorage.removeItem(key);\n};\n","import { StaticObject } from \"../../models/staticObject\";\nimport { Chicken } from \"../../models/chicken\";\nimport { Food } from \"../../models/food\";\n\nexport enum FarmActions {\n  setObjects,\n  addFood,\n  setFood,\n  removeFood,\n  setChickens,\n  toggleFeeding,\n  toggleDragging,\n  toggleInfo,\n}\n\ninterface ActionType<T> {\n  type: T;\n}\n\ninterface ActionWithPayloadType<T, P> extends ActionType<T> {\n  payload: P;\n}\n\nexport type SetObjectsAction = ActionWithPayloadType<FarmActions.setObjects, { objects: StaticObject[] }>;\nexport type AddFoodAction = ActionWithPayloadType<FarmActions.addFood, { food: Food }>;\nexport type SetFoodAction = ActionWithPayloadType<FarmActions.setFood, { food: Food[] }>;\nexport type RemoveFoodAction = ActionWithPayloadType<FarmActions.removeFood, { id: string }>;\nexport type SetChickensAction = ActionWithPayloadType<FarmActions.setChickens, { chickens: Chicken[] }>;\nexport type ToggleFeedingAction = ActionType<FarmActions.toggleFeeding>;\nexport type ToggleDraggingAction = ActionType<FarmActions.toggleDragging>;\nexport type ToggleInfoAction = ActionType<FarmActions.toggleInfo>;\n\nexport const setObjectsAction = (objects: StaticObject[]): SetObjectsAction => ({\n  type: FarmActions.setObjects,\n  payload: { objects },\n});\n\nexport const addFoodAction = (food: Food): AddFoodAction => ({\n  type: FarmActions.addFood,\n  payload: { food },\n});\n\nexport const setFoodAction = (food: Food[]): SetFoodAction => ({\n  type: FarmActions.setFood,\n  payload: { food },\n});\n\nexport const removeFoodAction = (id: string): RemoveFoodAction => ({\n  type: FarmActions.removeFood,\n  payload: { id },\n});\n\nexport const setChickensAction = (chickens: Chicken[]): SetChickensAction => ({\n  type: FarmActions.setChickens,\n  payload: { chickens },\n});\n\nexport const toggleFeedingAction = (): ToggleFeedingAction => ({\n  type: FarmActions.toggleFeeding,\n});\n\nexport const toggleDraggingAction = (): ToggleDraggingAction => ({\n  type: FarmActions.toggleDragging,\n});\n\nexport const toggleInfoAction = (): ToggleInfoAction => ({\n  type: FarmActions.toggleInfo,\n});\n","import chickenNames from '../data/chickenNames.json'\nimport { Gender, ChickenNames } from \"../types/types\"\nimport { Chicken } from \"../models/chicken\";\n\nexport const getAvailableNames = (chickens: Chicken[]): ChickenNames => {\n  const usedNames = chickens.map(({ name }) => name);\n\n  return {\n    female: chickenNames.female.filter(name => !usedNames.includes(name)),\n    male: chickenNames.male.filter(name => !usedNames.includes(name)),\n  }\n}\n\nexport const generateName = (gender: Gender, availableNames: ChickenNames) => {\n  const names = availableNames[gender];\n  const randomIndex = Math.min(Math.floor(Math.random() * names.length), names.length - 1);\n\n  return names[randomIndex];\n}\n","import brownChicken1 from \"../sprites/brown-chicken-1.png\";\nimport brownChicken2 from \"../sprites/brown-chicken-2.png\";\nimport brownChicken3 from \"../sprites/brown-chicken-3.png\";\nimport orangeChicken1 from \"../sprites/orange-chicken-1.png\";\nimport orangeChicken2 from \"../sprites/orange-chicken-2.png\";\nimport orangeChicken3 from \"../sprites/orange-chicken-3.png\";\nimport yellowChicken1 from \"../sprites/yellow-chicken-1.png\";\nimport yellowChicken2 from \"../sprites/yellow-chicken-2.png\";\nimport yellowChicken3 from \"../sprites/yellow-chicken-3.png\";\nimport { loadMultipleImages } from \"./loadImages\";\nimport { Chicken, SavedChickenState } from \"../models/chicken\";\nimport { ChickenBreed, ChickenItems, DrawProps } from \"../types/types\";\nimport { getStorageKey, StorageKeys } from \"./localStorage\";\nimport { getAvailableNames, generateName } from \"./chickenNameUtils\";\n\nconst CHICKEN_REFRESH_RATE = 500;\n\ntype DrawDynamicObjectsProps = ChickenItems & DrawProps & { animationIdRef: React.MutableRefObject<number> };\n\nexport const getChickens = async (width: number, height: number) => {\n  const images = await Promise.all([\n    loadMultipleImages([brownChicken1, brownChicken2, brownChicken3]),\n    loadMultipleImages([orangeChicken1, orangeChicken2, orangeChicken3]),\n    loadMultipleImages([yellowChicken1, yellowChicken2, yellowChicken3]),\n  ]);\n  const imagesBreedMap = {\n    [ChickenBreed.brown]: images[0],\n    [ChickenBreed.orange]: images[1],\n    [ChickenBreed.yellow]: images[2],\n  }\n  const savedChickens = getStorageKey(StorageKeys.chickens);\n  if(!savedChickens) {\n    return Object.keys(ChickenBreed).reduce<Chicken[]>((chickens, breed, index) => {\n      const gender = index === 0 ? 'male' : 'female';\n      const chicken = new Chicken({\n        width,\n        height,\n        imgs: imagesBreedMap[breed as ChickenBreed],\n        breed: breed as ChickenBreed,\n        gender,\n        name: generateName(gender, getAvailableNames(chickens))\n      })\n      chickens.push(chicken);\n      return chickens;\n    }, []);\n  }\n\n  return savedChickens.map((props: SavedChickenState) => new Chicken({\n    width,\n    height,\n    imgs: imagesBreedMap[props.breed],\n    ...props,\n  }));\n}\n\nexport const drawChickens = ({\n  canvasRef,\n  resizedWidth,\n  resizedHeight,\n  chickens,\n  animationIdRef,\n}: DrawDynamicObjectsProps) => {\n  if(!canvasRef.current) {\n    return;\n  }\n  const ctx = canvasRef.current.getContext('2d');\n  if(!ctx) {\n    return;\n  }\n\n  ctx.imageSmoothingEnabled = false;\n  window.clearInterval(animationIdRef.current);\n  animationIdRef.current = window.setInterval(() => {\n    ctx.clearRect(0, 0, resizedWidth, resizedHeight);\n\n    chickens.forEach(chicken => chicken.update({\n      ctx,\n      timestamp: performance.now(),\n      resizedWidth,\n      resizedHeight\n    }));\n  }, CHICKEN_REFRESH_RATE)\n};\n","import { generateId } from \"../utils/idGenerator\";\nimport { Coordinates } from \"../types/types\";\n\ninterface StaticObjectProps extends Coordinates {\n  img: HTMLImageElement;\n  width: number;\n  height: number;\n  deviationX?: number;\n  deviationY?: number;\n}\n\nexport class StaticObject {\n  private img: HTMLImageElement;\n  private top: number;\n  private left: number;\n  private originalLeft: number;\n  private originalTop: number;\n  private width: number;\n  private height: number;\n  private deviationX: number;\n  private deviationY: number;\n  public id = generateId();\n\n  constructor({ img, top, left, width, height, deviationX, deviationY }: StaticObjectProps) {\n    this.img = img;\n    this.top = top;\n    this.left = left;\n    this.originalLeft = left;\n    this.originalTop = top;\n    this.width = width;\n    this.height = height;\n    this.deviationX = deviationX || 0;\n    this.deviationY = deviationY || 0;\n  }\n\n  public update({ ctx, resizedWidth, resizedHeight }: {\n    ctx: CanvasRenderingContext2D,\n    resizedWidth: number,\n    resizedHeight: number,\n  }) {\n    this.updateToResizedPosition(resizedWidth, resizedHeight);\n    this.draw(ctx);\n  }\n\n  private updateToResizedPosition(resizedWidth: number, resizedHeight: number) {\n    if(resizedWidth !== this.width || resizedHeight !== this.height) {\n      this.left = this.originalLeft * (resizedWidth / this.width);\n      this.top = this.originalTop * (resizedHeight / this.height);\n    }\n  }\n\n  private draw(ctx: CanvasRenderingContext2D) {\n    ctx.drawImage(\n      this.img,\n      0,\n      0,\n      this.img.naturalWidth,\n      this.img.naturalHeight,\n      this.left + this.deviationX,\n      this.top + this.deviationY,\n      this.img.naturalWidth,\n      this.img.naturalHeight\n    );\n  }\n}\n","import henHouse from \"../sprites/hen-house.png\";\nimport waterHole from \"../sprites/water.png\";\nimport { loadMultipleImages } from \"./loadImages\";\nimport { StaticObject } from \"../models/staticObject\";\nimport { StaticItems } from \"../types/types\";\nimport { DrawProps } from \"../types/types\";\n\ntype DrawStaticObjectsProps = StaticItems & DrawProps;\n\nexport const createObjects = async (width: number, height: number) => {\n  const images = await loadMultipleImages([\n    henHouse,\n    waterHole,\n  ]);\n  const houseProps = {\n    top: height * 0.2,\n    left: width * 0.2,\n    img: images[0],\n  };\n  const waterProps = {\n    top: houseProps.top,\n    left: houseProps.left,\n    deviationX: 70,\n    deviationY: 30,\n    img: images[1],\n  };\n\n  return [houseProps, waterProps].map((props) => {\n    return new StaticObject({ ...props, width, height })\n  })\n}\n\nexport const drawStaticObjects = ({\n  canvasRef,\n  objects,\n  resizedWidth,\n  resizedHeight,\n}: DrawStaticObjectsProps) => {\n  if(!canvasRef.current) {\n    return;\n  }\n  const ctx = canvasRef.current.getContext('2d');\n  if(!ctx) {\n    return;\n  }\n\n  ctx.imageSmoothingEnabled = false;\n  ctx.clearRect(0, 0, resizedWidth, resizedHeight);\n\n  objects.forEach(object => object.update({ ctx, resizedWidth, resizedHeight }));\n}\n","import { generateId } from \"../utils/idGenerator\";\nimport { Coordinates } from \"../types/types\";\n\nconst MAX_EATERS = 3;\nconst MAX_FOOD = 30;\n\nexport interface FoodProps extends Coordinates {\n  width: number;\n  height: number;\n  originalWidth?: number;\n  originalHeight?: number;\n  imgs: HTMLImageElement[];\n  id?: string;\n  foodMeter?: number;\n}\n\nexport type SavedFoodState = Pick<FoodProps, \"top\"|\"left\"|\"foodMeter\"|\"id\"|\"originalHeight\"|\"originalWidth\">; \n\nexport class Food {\n  private originalWidth: number;\n  private originalHeight: number;\n  private width: number;\n  private height: number;\n  private imgs: HTMLImageElement[];\n  private foodMeter: number;\n  private animalsEating: string[] = [];\n  private originalTop: number;\n  private originalLeft: number;\n  public top: number;\n  public left: number;\n  public id: string;\n\n  constructor({ imgs, top, left, foodMeter, id, width, height, originalHeight, originalWidth }: FoodProps) {\n    this.imgs = imgs;\n    this.originalWidth = originalWidth || width;\n    this.originalHeight = originalHeight || height;\n    this.width = width;\n    this.height = height;\n    this.originalTop = top;\n    this.originalLeft = left;\n    this.top = top * (height / this.originalHeight);\n    this.left = left * (width / this.originalWidth);\n    this.foodMeter = foodMeter || foodMeter === 0 ? foodMeter : MAX_FOOD;\n    this.id = id || generateId();\n  }\n\n  public update({ ctx, resizedHeight, resizedWidth }: {\n    ctx: CanvasRenderingContext2D,\n    resizedWidth: number,\n    resizedHeight: number,\n  }) {\n    this.updateToResizedPosition(resizedWidth, resizedHeight);\n    this.draw(ctx, this.getImg());\n  }\n\n  public getSavingState() {\n    return {\n      top: this.originalTop,\n      left: this.originalLeft,\n      foodMeter: this.foodMeter,\n      id: this.id,\n      originalHeight: this.originalHeight,\n      originalWidth: this.originalWidth,\n    }\n  }\n\n  public updateFoodMeter() {\n    this.foodMeter = Math.max(this.foodMeter - 1, 0);\n  }\n\n  public hasFinished() {\n    return !this.foodMeter;\n  }\n\n  public isAvailable() {\n    return this.animalsEating.length <= MAX_EATERS;\n  }\n\n  public startEating(id: string) {\n    if(!this.animalsEating.includes(id)) {\n      this.animalsEating.push(id);\n    }\n  }\n\n  public stopEating(id: string) {\n    const i = this.animalsEating.indexOf(id);\n    if(i !== -1) {\n      this.animalsEating.splice(i, 1);\n    }\n  }\n\n  private updateToResizedPosition(resizedWidth: number, resizedHeight: number) {\n    if(resizedWidth !== this.width || resizedHeight !== this.height) {\n      this.left = this.originalLeft * (resizedWidth / this.originalWidth);\n      this.top = this.originalTop * (resizedHeight / this.originalHeight);\n\n      this.width = resizedWidth;\n      this.height = resizedHeight;\n    }\n  }\n\n  private getImg() {\n    if(this.foodMeter <= 10) {\n      return this.imgs[0];\n    }\n\n    if(this.foodMeter <= 20) {\n      return this.imgs[1];\n    }\n\n    return this.imgs[2];\n  }\n\n  private draw(ctx: CanvasRenderingContext2D, img: HTMLImageElement) {\n    ctx.drawImage(\n      img,\n      0,\n      0,\n      img.naturalWidth,\n      img.naturalHeight,\n      this.left,\n      this.top,\n      img.naturalWidth,\n      img.naturalHeight\n    );\n  }\n}","import food1 from \"../sprites/food1.png\";\nimport food2 from \"../sprites/food2.png\";\nimport food3 from \"../sprites/food3.png\";\nimport { loadMultipleImages } from \"./loadImages\";\nimport { Food, SavedFoodState } from \"../models/food\";\nimport { getStorageKey, StorageKeys } from \"./localStorage\";\nimport { FoodItems, DrawProps } from \"../types/types\";\n\nconst FOOD_CANVAS_FRAME_THROTTLE = 30;\n\ntype DrawFoodObjectsProps = FoodItems & DrawProps & { animationIdRef: React.MutableRefObject<number>; isDraggingFood: boolean };\n\nexport const getFoodImgs = async () => {\n  return await loadMultipleImages([\n    food1,\n    food2,\n    food3,\n  ]);\n}\n\nexport const getFood = (imgs: HTMLImageElement[], width: number, height: number) => {\n  const savedFood = getStorageKey(StorageKeys.food);\n  if(!savedFood) {\n    return [];\n  }\n\n  return savedFood.map((food: SavedFoodState) => {\n    return new Food({ ...food, imgs, width, height });\n  });\n};\n\nexport const drawFoodObjects = ({\n  canvasRef,\n  resizedWidth,\n  resizedHeight,\n  food,\n  animationIdRef,\n  isDraggingFood,\n}: DrawFoodObjectsProps) => {\n  if(!canvasRef.current) {\n    return;\n  }\n  const ctx = canvasRef.current.getContext('2d');\n  if(!ctx) {\n    return;\n  }\n\n  let frameCount = 0;\n  ctx.imageSmoothingEnabled = false;\n  window.cancelAnimationFrame(animationIdRef.current);\n  const loop = () => {\n    window.cancelAnimationFrame(animationIdRef.current);\n    frameCount++;\n\n    if(!isDraggingFood && frameCount < FOOD_CANVAS_FRAME_THROTTLE) {\n      animationIdRef.current = window.requestAnimationFrame(loop);\n      return;\n    }\n    frameCount = 0;\n    ctx.clearRect(0, 0, resizedWidth, resizedHeight);\n\n    food.forEach(singleFood => singleFood.update({ ctx, resizedWidth, resizedHeight }));\n\n    animationIdRef.current = window.requestAnimationFrame(loop)\n  }\n\n  loop();\n};\n","import React from \"react\";\nimport { FarmItems } from \"../../types/types\";\nimport {\n  SetObjectsAction,\n  AddFoodAction,\n  SetChickensAction,\n  ToggleFeedingAction,\n  ToggleDraggingAction,\n  FarmActions,\n  RemoveFoodAction,\n  ToggleInfoAction,\n  SetFoodAction,\n} from \"./actions\";\n\nexport type AllFarmActions = (\n  SetObjectsAction\n  | AddFoodAction\n  | SetFoodAction\n  | RemoveFoodAction\n  | SetChickensAction\n  | ToggleFeedingAction\n  | ToggleDraggingAction\n  | ToggleInfoAction\n);\n\ninterface FarmState extends FarmItems {\n  isFeeding: boolean;\n  isDragging: boolean;\n  isInfoOpen: boolean;\n}\n\nexport const initialFarmState: FarmState = {\n  objects: [],\n  food: [],\n  chickens: [],\n  isFeeding: false,\n  isDragging: false,\n  isInfoOpen: false,\n};\n\ntype FarmReducerType = React.Reducer<FarmState, AllFarmActions>;\n\nexport const farmReducer: FarmReducerType = (state, action) => {\n  switch (action.type) {\n    case FarmActions.setChickens:\n      return {\n        ...state,\n        chickens: action.payload.chickens,\n      }\n    case FarmActions.setFood: {\n      return {\n        ...state,\n        food: action.payload.food,\n      }\n    }\n    case FarmActions.addFood:\n      return {\n        ...state,\n        food: [\n          ...state.food,\n          action.payload.food,\n        ],\n      }\n    case FarmActions.removeFood:\n      return {\n        ...state,\n        food: state.food.filter(({ id }) => id !== action.payload.id),\n      }\n    case FarmActions.setObjects:\n      return {\n        ...state,\n        objects: action.payload.objects,\n      }\n    case FarmActions.toggleDragging:\n      return {\n        ...state,\n        isDragging: !state.isDragging,\n      }\n    case FarmActions.toggleFeeding:\n      return {\n        ...state,\n        isFeeding: !state.isFeeding,\n      }\n    case FarmActions.toggleInfo:\n      return {\n        ...state,\n        isInfoOpen: !state.isInfoOpen,\n      }\n    default:\n      return state;\n  }\n};\n","import React, { useRef, useEffect } from \"react\";\nimport styles from \"./staticCanvas.module.scss\";\nimport { drawStaticObjects } from \"../../utils/drawObjects\";\nimport { StaticItems } from \"../../types/types\";\n\ninterface StaticCanvasProps extends StaticItems {\n  resizedWidth: number;\n  resizedHeight: number;\n}\n\nexport const StaticCanvas: React.FC<StaticCanvasProps> = ({\n  resizedWidth,\n  resizedHeight,\n  objects,\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    drawStaticObjects({\n      canvasRef,\n      resizedWidth,\n      resizedHeight,\n      objects,\n    });\n  }, [resizedWidth, resizedHeight, objects])\n\n  return (\n    <canvas\n      ref={canvasRef}\n      width={resizedWidth}\n      height={resizedHeight}\n      className={styles.canvas}\n    ></canvas>\n  );\n};\n","import React from \"react\";\nimport styles from \"./hungerMeter.module.scss\";\nimport { Gender } from \"../../types/types\";\n\ninterface HungerMeterProps {\n  name: string;\n  gender: Gender;\n  hunger: number;\n}\n\nexport const HungerMeter = ({ name, gender, hunger }: HungerMeterProps) => {\n  return (\n    <div>\n      <h4>{name} {gender === 'male' ? '' : '' }</h4>\n      <div className={styles.hungerRow}>\n        <span className={styles.hungerLabel}>Hunger:</span>\n        <div className={styles.hungerMeter}>\n          <div className={styles.hungerMarker} style={{\n            left: `${hunger}%`,\n          }} />\n        </div>\n      </div>\n    </div>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport styles from \"./info.module.scss\";\nimport { Chicken } from \"../../models/chicken\";\nimport { HungerMeter } from \"../hungerMeter/HungerMeter\";\n\ninterface InfoProps {\n  chickens: Chicken[];\n  isOpen: boolean;\n}\n\nconst renderChickensHunger = (chickens: Chicken[]) => {\n  return chickens\n    .map((chicken, i) => (\n      <HungerMeter\n        key={i}\n        name={chicken.name}\n        gender={chicken.gender}\n        hunger={chicken.getHungerMeter()}\n      />\n    ));\n}\n\nexport const Info: React.FC<InfoProps> = ({ chickens, isOpen }) => {\n  const [, setTime] = useState(0);\n\n  useEffect(() => {\n    let id = 0;\n    if(isOpen) {\n      id = window.setInterval(() => setTime(Date.now()), 1000);\n    }\n    return () => window.clearInterval(id);\n  }, [isOpen]);\n\n  return (\n    <div className={styles.info}>\n      <h3 className={styles.title}>Hunger</h3>\n      <hr className={styles.hr}/>\n      {renderChickensHunger(chickens)}\n    </div>\n  );\n}\n","import React from \"react\";\nimport cx from \"classnames\";\nimport styles from \"./menu.module.scss\";\nimport foodUrl from \"../../sprites/food1.png\";\nimport chickenUrl from \"../../sprites/yellow-chicken-1.png\";\nimport { Info } from \"../info/Info\";\nimport { Chicken } from \"../../models/chicken\";\nimport {\n  toggleFeedingAction,\n  toggleInfoAction,\n} from \"../farm/actions\";\nimport { AllFarmActions } from \"../farm/reducer\";\n\ninterface MenuProps {\n  isInfoOpen: boolean;\n  isFeeding: boolean;\n  chickens: Chicken[];\n  dispatch: React.Dispatch<AllFarmActions>;\n}\n\nexport const Menu: React.FC<MenuProps> = ({\n  isInfoOpen,\n  isFeeding,\n  chickens,\n  dispatch,\n}) => {\n  const toggleInfo = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    dispatch(toggleInfoAction());\n  }\n\n  const toggleFeeding = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    dispatch(toggleFeedingAction());\n  }\n\n  return (\n    <div className={cx(styles.menu, isInfoOpen && styles.visible)}>\n      <div className={styles.toolBar}>\n        <button className={cx(styles.farmButton, isInfoOpen && styles.active)} onClick={toggleInfo}>\n          <img src={chickenUrl} alt=\"info\"></img>\n        </button>\n        <button className={cx(styles.farmButton, isFeeding && styles.active)} onClick={toggleFeeding}>\n          <img src={foodUrl} alt=\"food\"></img>\n        </button>\n      </div>\n      <Info chickens={chickens} isOpen={isInfoOpen}/>\n    </div>\n  );\n};\n","import { setStorageKey, StorageKeys } from \"./localStorage\";\n\nconst SAVING_INTERVAL = 5000;\n\nconst saveItemsToStorage = (storageKey: StorageKeys, items: { getSavingState: () => any }[]) => {\n  const storage = items.map(item => item.getSavingState());\n  if (!storage.length) {\n    return;\n  }\n  setStorageKey(storageKey, storage);\n}\n\nexport const saveItemsOnInterval = (storageKey: StorageKeys, items: { getSavingState: () => any }[]) => {\n  const id = setInterval(() => saveItemsToStorage(storageKey, items), SAVING_INTERVAL);\n  return () => {\n    saveItemsToStorage(storageKey, items);\n    clearInterval(id);\n  };\n}\n","import React, { useRef, useEffect } from \"react\";\nimport styles from \"./chickenCanvas.module.scss\";\nimport { ChickenItems } from \"../../types/types\";\nimport { drawChickens } from \"../../utils/drawChickens\";\nimport { StorageKeys } from \"../../utils/localStorage\";\nimport { saveItemsOnInterval } from \"../../utils/saveItems\";\n\ninterface ChickenCanvasProps extends ChickenItems {\n  resizedWidth: number;\n  resizedHeight: number;\n}\n\nexport const ChickenCanvas: React.FC<ChickenCanvasProps> = ({\n  resizedWidth,\n  resizedHeight,\n  chickens,\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const animationIdRef = useRef(0);\n\n  useEffect(() => {\n    drawChickens({\t\n      canvasRef,\t\n      resizedWidth,\t\n      resizedHeight,\t\n      animationIdRef,\t\n      chickens,\t\n    })\n  }, [resizedWidth, resizedHeight, animationIdRef, chickens]);\n  useEffect(\n    () => saveItemsOnInterval(StorageKeys.chickens, chickens),\n    [chickens, resizedHeight, resizedWidth]\n  )\n\n  return (\n    <canvas\n      ref={canvasRef}\n      width={resizedWidth}\n      height={resizedHeight}\n      className={styles.canvas}\n    ></canvas>\n  );\n};\n","import { Coordinates } from \"../types/types\";\n\ninterface GetClosestOptions<I> extends Coordinates {\n  items: I[];\n}\n\nexport const getDistance = (a: Coordinates, b: Coordinates) => {\n  return Math.sqrt(\n    Math.abs(a.left - b.left) ** 2\n    + Math.abs(a.top - b.top) ** 2\n  );\n}\n\nexport const getClosest = <I extends Coordinates>({\n  items,\n  left,\n  top,\n}: GetClosestOptions<I>) => {\n  let closest = Infinity;\n  let closestItem: I | undefined;\n\n  items.forEach(item => {\n    const distance = getDistance({ left, top }, item);\n\n    if (distance < closest) {\n      closest = distance;\n      closestItem = item;\n    }\n  });\n\n  return closestItem;\n};\n","import { InteractEvent } from \"../types/types\";\n\nexport const isTouchEvent = (e: InteractEvent<HTMLCanvasElement>): e is React.TouchEvent<HTMLCanvasElement> => {\n  return (e as React.TouchEvent<HTMLCanvasElement>).type.includes(\"touch\");\n}\n\nexport const getInteractionPos = (e: InteractEvent<HTMLCanvasElement>) => {\n  let left: number;\n  let top: number;\n\n  if(isTouchEvent(e)) {\n    // ignore interactions with more than one finger\n    if(e.touches.length !== 1) {\n      return;\n    }\n    left = e.touches[0].clientX;\n    top = e.touches[0].clientY;\n  } else {\n    left = e.clientX;\n    top = e.clientY;\n  }\n\n  return { left, top };\n}","import React, { useRef, useEffect, useCallback } from \"react\";\nimport throttle from \"lodash.throttle\";\nimport styles from \"./foodCanvas.module.scss\";\nimport { drawFoodObjects } from \"../../utils/drawFood\";\nimport { InteractEvent, FoodItems } from \"../../types/types\";\nimport { StorageKeys } from \"../../utils/localStorage\";\nimport { saveItemsOnInterval } from \"../../utils/saveItems\";\nimport { isTouchEvent, getInteractionPos } from \"../../utils/devices\";\nimport { Food, FoodProps } from \"../../models/food\";\nimport { RESIZE_CANVAS_BY } from \"../../gameConsts\";\n\ninterface FoodCanvasProps extends FoodItems {\n  resizedWidth: number;\n  resizedHeight: number;\n  toggleDragging: () => void;\n  isDragging: boolean;\n  isFeeding: boolean;\n  toggleFeeding: () => void;\n  addFood: (food: Food) => void;\n  foodImages: HTMLImageElement[];\n}\n\nconst disableFeedingOnEsc = ({ toggleFeeding, isFeeding }: {\n  toggleFeeding: () => void,\n  isFeeding: boolean,\n}) => {\n  const stopFeedingOnEsc = (e: KeyboardEvent) => {\n    if (e.code === \"Escape\" && isFeeding) {\n      toggleFeeding();\n    }\n  };\n  document.addEventListener(\"keydown\", stopFeedingOnEsc);\n\n  return () => {\n    document.removeEventListener(\"keydown\", stopFeedingOnEsc);\n  };\n}\n\nconst throtteFoodDrop = throttle((\n  { imgs, left, top, addFood, width, height }: FoodProps & { addFood: (food: Food) => void },\n) => {\n  const food = new Food({\n    imgs,\n    top: Math.round(top / RESIZE_CANVAS_BY),\n    left: Math.round(left / RESIZE_CANVAS_BY),\n    width,\n    height,\n  });\n  addFood(food);\n}, 100, { leading: true, trailing: false });\n\nexport const FoodCanvas: React.FC<FoodCanvasProps> = ({\n  resizedWidth,\n  resizedHeight,\n  food,\n  toggleDragging,\n  isDragging,\n  isFeeding,\n  toggleFeeding,\n  addFood,\n  foodImages,\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const animationIdRef = useRef(0);\n  const isDraggingFood = isFeeding && !!foodImages.length && isDragging;\n\n  const toggleFoodDragging = useCallback((e: InteractEvent<HTMLCanvasElement>) => {\n    e.stopPropagation();\n    if(!isTouchEvent(e)) {\n      e.preventDefault();\n    }\n\n    toggleDragging();\n  }, [toggleDragging]);\n  const dropFood = useCallback((e: InteractEvent<HTMLCanvasElement>) => {\n    if (!isDraggingFood) {\n      return;\n    }\n\n    const pos = getInteractionPos(e);\n    if(!pos) {\n      return;\n    }\n\n    e.persist();\n    e.stopPropagation();\n    if(!isTouchEvent(e)) {\n      e.preventDefault();\n    }\n\n    throtteFoodDrop({\n      ...pos,\n      imgs: foodImages,\n      addFood,\n      width: resizedWidth,\n      height: resizedHeight,\n    });\n  }, [isDraggingFood, addFood, foodImages, resizedHeight, resizedWidth]);\n  const onDragFinished = useCallback((e: InteractEvent<HTMLCanvasElement>) => {\n    dropFood(e);\n    toggleFoodDragging(e);\n  }, [dropFood, toggleFoodDragging]);\n\n  useEffect(() => {\n    drawFoodObjects({\n      canvasRef,\n      resizedWidth,\n      resizedHeight,\n      animationIdRef,\n      food,\n      isDraggingFood,\n    })\n  }, [resizedWidth, resizedHeight, food, isDraggingFood, animationIdRef]);\n  useEffect(\n    () => saveItemsOnInterval(StorageKeys.food, food),\n    [food, resizedHeight, resizedWidth]\n  )\n  useEffect(() => disableFeedingOnEsc({ toggleFeeding, isFeeding }), [isFeeding, toggleFeeding]);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      width={resizedWidth}\n      height={resizedHeight}\n      className={styles.canvas}\n      onTouchStart={toggleFoodDragging}\n      onTouchEnd={onDragFinished}\n      onTouchMove={dropFood}\n      onMouseDown={toggleFoodDragging}\n      onMouseUp={onDragFinished}\n      onMouseMove={dropFood}\n    ></canvas>\n  );\n};\n","export const RESIZE_CANVAS_BY = 2;\n","import React, { useEffect, memo, useState, useReducer, useCallback } from \"react\";\nimport cx from \"classnames\";\nimport styles from \"./farm.module.scss\";\nimport { useWindowDimensions } from \"../../utils/useWindowDimensions\";\nimport { getChickens } from \"../../utils/drawChickens\";\nimport { createObjects } from \"../../utils/drawObjects\";\nimport { getFoodImgs, getFood } from \"../../utils/drawFood\";\nimport { Chicken } from \"../../models/chicken\";\nimport { Coordinates } from \"../../types/types\";\nimport { farmReducer, initialFarmState } from \"./reducer\";\nimport {\n  setObjectsAction,\n  setChickensAction,\n  toggleFeedingAction,\n  toggleDraggingAction,\n  addFoodAction,\n  removeFoodAction,\n  setFoodAction,\n} from \"./actions\";\nimport { Food } from \"../../models/food\";\nimport { StaticCanvas } from \"../StaticCanvas/StaticCanvas\";\nimport { Menu } from \"../menu/Menu\";\nimport { ChickenCanvas } from \"../chickenCanvas/ChickenCanvas\";\nimport { getClosest, getDistance } from \"../../utils/distance\";\nimport { StaticObject } from \"../../models/staticObject\";\nimport { FoodCanvas } from \"../foodCanvas/FoodCanvas\";\nimport { RESIZE_CANVAS_BY } from \"../../gameConsts\";\n\nconst MAX_FOOD_DISTANCE = 300 / RESIZE_CANVAS_BY; // in px\n\nconst setGameItems = ({\n  resizedWidth,\n  resizedHeight,\n  setObjects,\n  setChickens,\n  setFoodImgs,\n  setFood,\n}: {\n  resizedWidth: number,\n  resizedHeight: number,\n  setObjects: (objects: StaticObject[]) => void,\n  setChickens: (chickens: Chicken[]) => void,\n  setFoodImgs: (imgs: HTMLImageElement[]) => void,\n  setFood: (food: Food[]) => void,\n}) => {\n  Promise.all([\n    createObjects(resizedWidth, resizedHeight),\n    getChickens(resizedWidth, resizedHeight),\n    getFoodImgs(),\n  ]).then(([objects, chickens, foodImgs]) => {\n    setObjects(objects);\n    setChickens(chickens);\n    setFoodImgs(foodImgs);\n    setFood(getFood(foodImgs, resizedWidth, resizedHeight));\n  });\n}\n\nconst getClosestFood = (coord: Coordinates, food: Food[]) => {\n  const allAvailableFood = food.filter(item => (\n    item.isAvailable()\n    && getDistance(coord, item) < MAX_FOOD_DISTANCE\n  ));\n  if(!allAvailableFood.length) {\n    return undefined;\n  }\n  return getClosest({\n    items: allAvailableFood,\n    ...coord,\n  });\n}\n\nconst linkFoodToChickens = ({\n  chickens,\n  removeFood,\n  requestFood,\n}: {\n  chickens: Chicken[]\n  removeFood: (id: string) => void\n  requestFood: (coord: Coordinates) => Food | undefined\n}) => {\n  chickens.forEach(chicken => {\n    chicken.setFoodMethods(removeFood, requestFood);\n  })\n}\n\nexport const Farm: React.FC = memo(() => {\n  const { resizedWidth, resizedHeight } = useWindowDimensions(RESIZE_CANVAS_BY);\n  const [\n    {\n      isDragging,\n      isFeeding,\n      isInfoOpen,\n      objects,\n      chickens,\n      food,\n    },\n    dispatch,\n  ] = useReducer(farmReducer, initialFarmState);\n  const [foodImgs, setFoodImgs] = useState<HTMLImageElement[]>([]);\n  const addFood = useCallback((food: Food) => dispatch(addFoodAction(food)), [])\n  const toggleFeeding = useCallback(() => dispatch(toggleFeedingAction()), [])\n  const toggleDragging = useCallback(() => dispatch(toggleDraggingAction()), [])\n\n  useEffect(() => {\n    // It should only run on mount\n    if(!chickens.length) {\n      setGameItems({\n        resizedWidth,\n        resizedHeight,\n        setObjects: (objects: StaticObject[]) => dispatch(setObjectsAction(objects)),\n        setChickens: (chickens: Chicken[]) => dispatch(setChickensAction(chickens)),\n        setFoodImgs,\n        setFood: (food: Food[]) => dispatch(setFoodAction(food)),\n      })\n    }\n  }, [resizedWidth, resizedHeight, chickens]);\n\n  useEffect(() => linkFoodToChickens({\n    chickens,\n    removeFood: (id: string) => dispatch(removeFoodAction(id)),\n    requestFood: (coord: Coordinates) => getClosestFood(coord, food),\n  }), [chickens, food])\n\n  return (\n    <div className={cx(styles.wrapper, isFeeding && styles.feeding)}>\n      <div className={styles.bg}/>\n      <StaticCanvas\n        resizedWidth={resizedWidth}\n        resizedHeight={resizedHeight}\n        objects={objects}\n      />\n      <FoodCanvas\n        resizedWidth={resizedWidth}\n        resizedHeight={resizedHeight}\n        toggleDragging={toggleDragging}\n        food={food}\n        isDragging={isDragging}\n        isFeeding={isFeeding}\n        toggleFeeding={toggleFeeding}\n        addFood={addFood}\n        foodImages={foodImgs}\n      />\n      <ChickenCanvas\n        resizedWidth={resizedWidth}\n        resizedHeight={resizedHeight}\n        chickens={chickens}\n      />\n      <Menu\n        isInfoOpen={isInfoOpen}\n        isFeeding={isFeeding}\n        chickens={chickens}\n        dispatch={dispatch}\n      />\n    </div>\n  );\n});\n","import { useState, useEffect } from \"react\";\nimport debounce from \"lodash.debounce\";\n\nexport const useWindowDimensions = (resizeBy = 1) => {\n  const [{ width, height }, setDimensions] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight\n  });\n  \n  useEffect(() => {\n    const handleResize = debounce(() => {\n      setDimensions({\n        width: window.innerWidth,\n        height: window.innerHeight\n      });\n    }, 500, { trailing: true, leading: false });\n    window.addEventListener('resize', handleResize);\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n  \n  return {\n    resizedWidth: width / resizeBy,\n    resizedHeight: height / resizeBy,\n  };\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.scss\";\nimport { Farm } from \"./components/farm/Farm\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<Farm />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}