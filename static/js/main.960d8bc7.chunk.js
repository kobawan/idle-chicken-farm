(this["webpackJsonpidle-chicken-farm"]=this["webpackJsonpidle-chicken-farm"]||[]).push([[0],[,,,,,,,,,function(t,e,n){t.exports={menu:"menu_menu__2vPAR",visible:"menu_visible__3jm2d",toolBar:"menu_toolBar__jeKpg",farmButton:"menu_farmButton__3Te1g",active:"menu_active__21Ixu"}},,,function(t,e,n){t.exports={name:"hungerMeter_name__3sABU",hungerRow:"hungerMeter_hungerRow__39EdJ",hungerLabel:"hungerMeter_hungerLabel__pYFKg",hungerMeter:"hungerMeter_hungerMeter__3K0D1",hungerMarker:"hungerMeter_hungerMarker__3jRbO"}},,function(t,e,n){t.exports={wrapper:"gamePage_wrapper__2IRQA",bg:"gamePage_bg__5mox9",feeding:"gamePage_feeding__1IX4t",version:"gamePage_version__1_jI5"}},,,,function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAARCAYAAAACCvahAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAUGVYSWZNTQAqAAAACAACARIAAwAAAAEAAQAAh2kABAAAAAEAAAAmAAAAAAADoAEAAwAAAAEAAQAAoAIABAAAAAEAAAAPoAMABAAAAAEAAAARAAAAAMo73PQAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAE3SURBVDgRY2CgNWBj4/iPzQ4mbILIYiCNuYKqDNgMIKgZZJAj518GU0FZDAOI0gwywIKBA0QRD0BO3aKg9f++nfL/X1lcYBqb87GaCFII0giiQRhkALJmRmRdYAW/fsDFQPwvKQif/bcUBCvnTX7L8AuoDi4DUsinFwMOFBAbhG9aSDPs2qYAN5/x+HsGmEaQINgWmEaQwL83exiYRFxATDA4zbWf4eojdgZtuZ9gPogd9Oweqs0gTTAgopEAZi54c4xBWuc5g5vXA7ABIDbMEJACsLNB7v/y7AXDp0tL4LaC2CBNIPD0iiTYNhBt+s0RLIZBgJyvEXPkv4hJyn8hBQV4KCOLg9gwjfCQhQkg+x8mBqNBrgG5EsbHSoMMgMUpjEa2EaYJHlUwARgNi1MYTdBGmEZiaQBf6YiaTd53ZAAAAABJRU5ErkJggg=="},function(t){t.exports=JSON.parse('{"male":["Miquel Manzo","Ignacio Ickes","Kristopher Kunst","Vincent Vines","Jerrold Jeppesen","Carey Choudhury","Junior Jobst","Issac Isenberg","Warner Wooster","Henry Harding","Rudolf Reddish","Huey Ho","Fermin Fegan","Cedrick Courtemanche","Monte Max","Edmond Eldreth","Claud Cermak","Morgan Moralez","Clifton Caudillo","Vincenzo Voges","Buddy Barraza","Lacy Ludden","Patrick Pea","Kip Khoury","Deandre Davisson","Antony Alvis","Joshua Janis","Lyle Lamarche","Linwood Lothrop","Marcus Mailman","Benny Boswell","Stacy Selvy","Kyle Krishnan","Emmett Egger","Brandon Bruck","Graig Goldschmidt","Royal Reeb","Lino Lyda","Wilfred Wolter","Ashley Ancona","Sylvester Siller","Fernando Foston","Fredrick Favorite","Morris Mincks","Isaiah Ishee","Jeff Joslin","Avery Algarin","Jaime Janusz","Chester Capello","Frankie Finan"],"female":["Piedad Pardon","Ester Edelman","Lucienne Lev","Micha Mcpeters","Guillermina Garlock","Leola Leeper","Irena Igoe","Lauri Layman","Etha English","Yasuko Yochum","Sheron Stocking","Brook Bourland","Janyce Jorgenson","Delpha Dudgeon","Ilda Igo","Rosy Robledo","Gabriella Greenwood","Tamatha Tiggs","Catrina Coppock","Galina Gress","Alexandra Amburn","Louann Lomeli","Marin Mclees","Juliette Jalbert","Kiersten Kivi","Aleshia Asaro","Shakira Spates","Loura Legendre","Kacy Kellen","Jennette Janelle","Donette Dearborn","Trudi Tartaglia","Sharda Steinbeck","Roni Rouse","Coleen Cedeno","Velma Versace","Chasity Cardillo","Arielle Autrey","Audrie Autin","Dorris Defreitas","Eunice Entrekin","Astrid Agarwal","Jennefer Jefcoat","Kerri Kao","Brynn Brockway","Bethel Borba","Ching Client","Minnie Meigs","Eda Earles","Violet Vrieze"]}')},function(t,e,n){t.exports={info:"info_info__rQiOK",title:"info_title__vsvEd",hr:"info_hr__1w1tE"}},function(t,e,n){t.exports={container:"loadingPage_container__10-TY",startFading:"loadingPage_startFading__iqwuY"}},,,,function(t,e,n){t.exports=n.p+"static/media/farm_sprite.aab29c37.png"},,,,function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAARCAYAAAACCvahAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAUGVYSWZNTQAqAAAACAACARIAAwAAAAEAAQAAh2kABAAAAAEAAAAmAAAAAAADoAEAAwAAAAEAAQAAoAIABAAAAAEAAAAPoAMABAAAAAEAAAARAAAAAMo73PQAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAE4SURBVDgRY2CgB2Bj4/iPbg8TugA2PkhjrqAqA7oBRGkGGejI+ZfBVFAWxQCiNYMMsGDgAFHEA5BTtyho/b9vp/z/VxYXmEZ3Pk7TQApBGkE0CIMMgGlmRNYFlvz1Ay4GU/QlBeG7/5aCYC28yW8Z4KIghXx6MeAAAbFB+KaFNMM6KSWGp1ck4XY8m83BANL4C2gJC0gUphHE5pGSYGAScWEQ0UhgML2xgOG03H6Gq4/YgTIQA9RPPAVrBKmF2/zvzR4QHwxAGkFgwZtjDNI6zxncvB6ADQCxQa4BWQaSB2sGOeHLsxcMny4tAdsKkri3ygWsCcQGOTvo2T0wbfrNESQEBvDAAfGQnQ/igwyDAaWwPQxvgN4AiYEsg4mj0CADQPjnYmkUGiaOohidg6wRJIfOR1c/MHwASlaCNvoa96IAAAAASUVORK5CYII="},function(t,e,n){t.exports={canvas:"chickenCanvas_canvas__zRbUl"}},,function(t,e,n){t.exports={canvas:"foodCanvas_canvas__3BMP1"}},function(t,e,n){t.exports={container:"interactionLayer_container__8lmxc"}},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAYUlEQVQ4T2NkoBAwUqifYQgYwMbG8R/kzV+/fmB1LV4vgDRPu2rNYCWuyGAgsgSrIQTDgCIXEBNDGC4gZCO6oSgG4PMzLoOJcgE+gwkGIszJRLuAmIBDVkO0C3AZPPAGAAD7jC0R4as9ogAAAABJRU5ErkJgggAA"},function(t,e,n){t.exports={canvas:"staticCanvas_canvas__YAp_u"}},function(t,e,n){t.exports={container:"TooltipOverlay_container__2bfIm"}},function(t){t.exports=JSON.parse('{"a":"0.2.0"}')},,function(t,e,n){t.exports=n(47)},,,,,function(t,e,n){},,,function(t,e,n){"use strict";n.r(e);var i,o,a=n(0),r=n.n(a),s=n(24),c=n.n(s),h=(n(44),n(5)),d=n(25),u=n.n(d),g=n(26),l=n.n(g),f=n(1),v=n(10),p=n(6),m=n(7),A=function(t){var e=t.min,n=t.max,i=t.value;return i>=e&&i<=n},b=function(t){var e=t.min,n=t.max,i=t.value,o=Math.abs(i-e);return Math.abs(n-i)<o?n:e},w=function(){return Math.random().toString(36).substr(2,9)},y=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Math.round(Math.random()*t)},O=function(){function t(){Object(p.a)(this,t),this.restingTurns=0}return Object(m.a)(t,[{key:"rest",value:function(t){this.restingTurns=this.restingTurns?Math.max(this.restingTurns-1,0):function(t,e){return Math.round(t*e)}(10,t)}},{key:"shouldRest",value:function(t){return this.restingTurns||!this.restingTurns&&100*Math.random()<function(t,e){return Math.round(t/e)}(20,t)}}]),t}();!function(t){t.eating="eating",t.walkingToFood="walkingToFood",t.wandering="wandering",t.resting="resting",t.searchingForFood="searchingForFood"}(i||(i={})),function(t){t.default="default",t.walking="walking",t.resting="resting"}(o||(o={}));var k,C,F,j,E,R,M=n(3);!function(t){t.lightbrown="lightbrown",t.brown="brown",t.orange="orange",t.white="white"}(k||(k={}));var G,I={chicken:(R={},Object(M.a)(R,k.orange,(C={},Object(M.a)(C,o.default,{x:1,y:193,width:16,height:16}),Object(M.a)(C,o.walking,{x:1,y:209,width:16,height:16}),Object(M.a)(C,o.resting,{x:1,y:225,width:16,height:16}),C)),Object(M.a)(R,k.white,(F={},Object(M.a)(F,o.default,{x:17,y:193,width:16,height:16}),Object(M.a)(F,o.walking,{x:17,y:209,width:16,height:16}),Object(M.a)(F,o.resting,{x:17,y:225,width:16,height:16}),F)),Object(M.a)(R,k.lightbrown,(j={},Object(M.a)(j,o.default,{x:33,y:193,width:16,height:16}),Object(M.a)(j,o.walking,{x:33,y:209,width:16,height:16}),Object(M.a)(j,o.resting,{x:33,y:225,width:16,height:16}),j)),Object(M.a)(R,k.brown,(E={},Object(M.a)(E,o.default,{x:49,y:193,width:16,height:16}),Object(M.a)(E,o.walking,{x:49,y:209,width:16,height:16}),Object(M.a)(E,o.resting,{x:49,y:225,width:16,height:16}),E)),R),coop:{x:213,y:16,width:56,height:50},trough:{x:112,y:83,width:34,height:15},food:{small:{x:111,y:96,width:15,height:16},medium:{x:128,y:96,width:15,height:16},large:{x:144,y:96,width:15,height:16}},fence:{topLeft:{x:0,y:0,width:4,height:16},top:{x:14,y:0,width:20,height:16},topRight:{x:60,y:0,width:4,height:16},bottomLeft:{x:0,y:32,width:4,height:16},sideLeft:{x:0,y:16,width:4,height:15},sideRight:{x:60,y:16,width:4,height:15},bottomRight:{x:60,y:32,width:4,height:16},bottom:{x:14,y:32,width:20,height:16}}},B={width:30,height:32},H={width:32,height:32},x=B.width/2,S=H.height/2,D=function(t,e){return Math.sqrt(Math.pow(Math.abs(t.left-e.left),2)+Math.pow(Math.abs(t.top-e.top),2))},W=function(t){var e,n=t.items,i=t.left,o=t.top,a=1/0;return n.forEach((function(t){var n=D({left:i,top:o},t);n<a&&(a=n,e=t)})),e},Z=n(4),Y=function(){function t(e){var n=e.sprite,i=e.spriteCoordinates,o=e.top,a=e.left,r=e.deviationX,s=void 0===r?0:r,c=e.deviationY,h=void 0===c?0:c;Object(p.a)(this,t),this.sprite=void 0,this.spriteCoordinates=void 0,this.top=void 0,this.left=void 0,this.id=w(),this.sprite=n,this.spriteCoordinates=i,this.top=o+h,this.left=a+s}return Object(m.a)(t,[{key:"update",value:function(t){var e=t.ctx;this.draw(e)}},{key:"draw",value:function(t){t.drawImage(this.sprite,this.spriteCoordinates.x,this.spriteCoordinates.y,this.spriteCoordinates.width,this.spriteCoordinates.height,this.left,this.top,2*this.spriteCoordinates.width,2*this.spriteCoordinates.height)}}]),t}(),P=function(t){return 5+t.horizontalGap},_=function(t){var e=t.fenceWidth,n=t.horizontalGap;return t.width-2*e-P({horizontalGap:n})},T=function(t){return 5+t.verticalGap},L=function(t){var e=t.fenceHeight,n=t.verticalGap;return t.height-2*e-T({verticalGap:n})},N=function(t){var e=I.fence,n=e.sideLeft,i=e.sideRight,o=e.top,a=2*n.width,r=2*i.width,s=2*o.width,c=t-10-a-r,h=Math.floor(c/s);return{horizontalGap:(c-h*s)/2,amountHorizontalFences:h}},J=function(t){var e=I.fence,n=e.top,i=e.bottom,o=e.sideLeft,a=2*n.height,r=2*i.height,s=2*o.height,c=t-10-a-r,h=Math.floor(c/s);return{verticalGap:(c-h*s)/2,amountVerticalFences:h}},z=function(t,e){return{top:.2*e,left:.2*t,spriteCoordinates:I.coop}},Q=function(t,e){return{top:.2*e,left:.2*t,deviationX:140,deviationY:60,spriteCoordinates:I.trough}},K=function(t,e,n){return[z(t,e),Q(t,e)].concat(Object(Z.a)(function(t,e){var n=I.fence,i=n.topLeft,o=n.topRight,a=n.bottomLeft,r=n.bottomRight,s=n.top,c=n.bottom,h=n.sideLeft,d=n.sideRight,u=N(t),g=u.amountHorizontalFences,l=u.horizontalGap,f=J(e),v=f.amountVerticalFences,p=f.verticalGap,m=P({horizontalGap:l}),A=T({verticalGap:p}),b=new Array(g).fill(0).map((function(t,e){return{top:A,left:m+2*i.width+e*(2*s.width),spriteCoordinates:s}})),w=L({height:e,verticalGap:p,fenceHeight:a.height}),y=new Array(g).fill(0).map((function(t,e){return{top:w,left:m+2*a.width+e*(2*c.width),spriteCoordinates:c}})),O=new Array(v).fill(0).map((function(t,e){return{top:A+2*i.height+e*(2*h.height),left:m,spriteCoordinates:h}})),k=_({width:t,horizontalGap:l,fenceWidth:d.width}),C=new Array(v).fill(0).map((function(t,e){return{top:A+2*o.height+e*(2*d.height),left:k,spriteCoordinates:d}})),F=[{top:A,left:m,spriteCoordinates:i},{top:A,left:_({width:t,horizontalGap:l,fenceWidth:o.width}),spriteCoordinates:o},{top:L({height:e,verticalGap:p,fenceHeight:a.height}),left:m,spriteCoordinates:a},{top:L({height:e,verticalGap:p,fenceHeight:r.height}),left:_({width:t,horizontalGap:l,fenceWidth:r.width}),spriteCoordinates:r}];return[].concat(F,Object(Z.a)(b),Object(Z.a)(y),Object(Z.a)(O),Object(Z.a)(C))}(t,e))).map((function(t){return new Y(Object(f.a)(Object(f.a)({},t),{},{sprite:n}))}))},V=new(function(){function t(e){var n=this,i=e.canvasHeight,o=e.canvasWidth;Object(p.a)(this,t),this.canvasHeight=void 0,this.canvasWidth=void 0,this.getClosestFood=function(t,e){var n=e.filter((function(e){return e.isAvailable&&D(t,e)<300}));if(n.length)return W(Object(f.a)({items:n},t))},this.getRandomPositionWithinBounds=function(t){var e=t.width,i=t.height,o=y(n.freeZones.length-1),a=n.freeZones[o];return{top:a.top+y(a.bottom-a.top-i),left:a.left+y(a.right-a.left-e)}},this.getClosestValidPosition=function(t){var e=t.left,i=t.top,o=t.height,a=t.width,r=W({left:e,top:i,items:n.freeZones}),s={min:r.top,max:r.bottom-o,value:i},c={min:r.left,max:r.right-a,value:e};return{top:A(s)?i:b(s),left:A(c)?e:b(c)}},this.getPositionWithinBounds=function(t){var e=t.top,i=t.left,o=t.width,a=t.height;return i&&e?n.canGoToCoordinates({top:e,left:i,width:o,height:a})?{left:i,top:e}:n.getClosestValidPosition({left:i,top:e,height:a,width:o}):n.getRandomPositionWithinBounds({width:o,height:a})},this.canvasHeight=i,this.canvasWidth=o}return Object(m.a)(t,[{key:"updateCanvasDimension",value:function(t){var e=t.canvasHeight,n=t.canvasWidth;this.canvasHeight=e,this.canvasWidth=n}},{key:"canGoToCoordinates",value:function(t){var e=t.left,n=t.width,i=t.height,o=t.top,a=A({value:e,min:this.gameBoundaries.left,max:this.gameBoundaries.right-n})&&A({value:o,min:this.gameBoundaries.top,max:this.gameBoundaries.bottom-i}),r=this.noGoZones.some((function(t){return A({value:e,min:t.left-n,max:t.right})&&A({value:o,min:t.top-i,max:t.bottom})}));return a&&!r}},{key:"noGoZones",get:function(){var t=z(this.canvasWidth,this.canvasHeight),e={left:t.left,top:t.top,right:t.left+2*t.spriteCoordinates.width,bottom:t.top+2*t.spriteCoordinates.height},n=Q(this.canvasWidth,this.canvasHeight);return[e,{left:n.left+n.deviationX,top:n.top+n.deviationY,right:n.left+n.deviationX+2*n.spriteCoordinates.width,bottom:n.top+n.deviationY+2*n.spriteCoordinates.height}]}},{key:"gameBoundaries",get:function(){return function(t,e){var n=I.fence,i=n.sideRight,o=n.sideLeft,a=n.top,r=n.bottom,s=J(e).verticalGap,c=N(t).horizontalGap;return{left:P({horizontalGap:c})+2*o.width,right:_({width:t,horizontalGap:c,fenceWidth:i.width}),top:T({verticalGap:s})+2*a.height,bottom:L({height:e,verticalGap:s,fenceHeight:r.height})}}(this.canvasWidth,this.canvasHeight)}},{key:"freeZones",get:function(){return[{left:this.gameBoundaries.left,top:this.gameBoundaries.top,right:this.noGoZones[0].left,bottom:this.noGoZones[0].top},{left:this.gameBoundaries.left,top:this.noGoZones[0].top,right:this.noGoZones[0].left,bottom:this.noGoZones[0].bottom},{left:this.gameBoundaries.left,top:this.noGoZones[0].bottom,right:this.noGoZones[0].left,bottom:this.gameBoundaries.bottom},{left:this.noGoZones[0].left,top:this.gameBoundaries.top,right:this.noGoZones[0].right,bottom:this.noGoZones[0].top},{left:this.noGoZones[0].left,top:this.noGoZones[0].bottom,right:this.noGoZones[0].right,bottom:this.gameBoundaries.bottom},{left:this.noGoZones[0].right,top:this.gameBoundaries.top,right:this.noGoZones[1].right,bottom:this.noGoZones[1].top},{left:this.noGoZones[0].right,top:this.noGoZones[1].bottom,right:this.noGoZones[1].right,bottom:this.gameBoundaries.bottom},{left:this.noGoZones[1].right,top:this.gameBoundaries.top,right:this.gameBoundaries.right,bottom:this.gameBoundaries.bottom}]}}]),t}())({canvasWidth:window.innerWidth,canvasHeight:window.innerHeight}),U=[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]],X=function(){function t(e){var n=this,i=e.canvasWidth,o=e.canvasHeight,a=e.top,r=e.left,s=e.logger;Object(p.a)(this,t),this.canvasWidth=void 0,this.canvasHeight=void 0,this.top=void 0,this.left=void 0,this.logger=void 0,this.path=[],this.hasBegunJourney=!1,this.getNewPosition=function(t,e){return{left:0===t?n.left:t>0?n.left+2:n.left-2,top:0===e?n.top:e>0?n.top+2:n.top-2}},this.canvasWidth=i,this.canvasHeight=o,this.logger=s;var c=V.getPositionWithinBounds(Object(f.a)({top:a,left:r},H));this.top=c.top,this.left=c.left}return Object(m.a)(t,[{key:"getSavingState",value:function(){return{leftRatio:this.left/this.canvasWidth,topRatio:this.top/this.canvasHeight}}},{key:"removeCurrentCheckpoint",value:function(){this.path.shift()}},{key:"calculatePathToFood",value:function(t){var e={left:t.left+x,top:t.top+x};this.path=[e]}},{key:"walkTowardsFood",value:function(t){this.path.length||(this.calculatePathToFood(t),this.hasBegunJourney=!0);var e=this.getDistance(this.currentCheckpoint),n=e.dx,i=e.dy,o=this.getNewPosition(n,i),a=o.left,r=o.top;this.top=r,this.left=a,this.hasReachedDestination(this.currentCheckpoint)&&this.removeCurrentCheckpoint()}},{key:"hasReachedDestination",value:function(t){var e=this.getDistance(t),n=e.dx,i=e.dy,o=S;return Math.abs(n)<=o&&Math.abs(i)<=o}},{key:"getDistance",value:function(t){return{dx:t.left-this.left-S,dy:t.top-this.top-S}}},{key:"hasReachedFood",value:function(){return!(!this.hasBegunJourney||0!==this.path.length)&&(this.hasBegunJourney=!1,!0)}},{key:"walkRandomly",value:function(){var t,e,n=[].concat(U);do{var i=y(n.length-1),o=Object(h.a)(n[i],2),a=o[0],r=o[1];this.logger.log("Trying direction: [".concat(a,",").concat(r,"]")),n.splice(i,1);var s=this.getNewPosition(a,r);t=s.left,e=s.top}while(!V.canGoToCoordinates(Object(f.a)({left:t,top:e},H))&&n.length);this.top=e,this.left=t}},{key:"position",get:function(){return{top:this.top,left:this.left}}},{key:"chickenBoundary",get:function(){return{minX:this.left,maxX:this.left+H.width,minY:this.top,maxY:this.top+H.height}}},{key:"currentCheckpoint",get:function(){return this.path[0]}}]),t}(),q=new(n(27).EventEmitter);!function(t){t.DetectTooltip="DetectTooltip",t.StartDraggingFood="StartDraggingFood",t.StopDraggingFood="StopDraggingFood",t.DropFood="DropFood",t.RemoveFood="RemoveFood",t.RequestFood="RequestFood",t.FoundRequestedFood="FoundRequestedFood",t.NotFoundRequestedFood="NotFoundRequestedFood"}(G||(G={}));var $=function(){function t(e){var n=e.hungerMeter,i=e.id,o=e.logger;Object(p.a)(this,t),this.lastHungerIncrease=0,this.id=void 0,this.logger=void 0,this.food=void 0,this.hungerMeter=void 0,this.isSearchingForFood=!1,this.isEating=!1,this.hungerMeter=n||0,this.id=i,this.logger=o,this.startFoodListener()}return Object(m.a)(t,[{key:"onUnmount",value:function(){this.stopFoodListener()}},{key:"getSavingState",value:function(){return{hungerMeter:this.hungerMeter}}},{key:"updateHungerMeter",value:function(t){this.isEating?this.lastHungerIncrease=0:t-this.lastHungerIncrease>=6e4&&(this.hungerMeter=Math.min(this.hungerMeter+1,100),this.lastHungerIncrease=t)}},{key:"startEating",value:function(t){this.food?(this.food.startEating(this.id),this.isEating=!0,this.eat(t)):this.logger.error("Chicken needs food in order to start eating it!")}},{key:"eat",value:function(t){this.food?(this.hungerMeter=Math.max(this.hungerMeter-1,0),this.food.updateFoodMeter(),(this.isFull||this.food.hasFinished)&&(this.stopEating(),this.isFull||this.searchForFood(t))):this.logger.error("Chicken needs food in order to eat it!")}},{key:"searchForFood",value:function(t){this.isSearchingForFood||(this.logger.log("Start searching for food"),this.isSearchingForFood=!0,q.emit(G.RequestFood,{position:t,id:this.id}))}},{key:"addFood",value:function(t){var e=t.food,n=t.id;this.id===n&&(this.food=e,this.isSearchingForFood=!1,this.logger.log("Stopped searching for food: found it!"))}},{key:"stopSearching",value:function(t){var e=t.id;this.id===e&&(this.isSearchingForFood=!1,this.logger.log("Stopped searching for food: did not find any!"))}},{key:"startFoodListener",value:function(){q.on(G.FoundRequestedFood,this.addFood.bind(this)),q.on(G.NotFoundRequestedFood,this.stopSearching.bind(this))}},{key:"stopFoodListener",value:function(){q.off(G.FoundRequestedFood,this.addFood.bind(this)),q.off(G.NotFoundRequestedFood,this.stopSearching.bind(this))}},{key:"stopEating",value:function(){this.food&&(this.food.stopEating(this.id),this.forgetFood(),this.isEating=!1)}},{key:"forgetFood",value:function(){this.food=void 0}},{key:"isHungry",get:function(){return this.hungerMeter>30}},{key:"hasAvailableFood",get:function(){return!!this.food&&this.food.isAvailable}},{key:"isFull",get:function(){return!this.hungerMeter}}]),t}(),tt=n(28),et=[],nt=function(t){return et.includes(t)};window.startDebug=function(t){et.push(t)},window.stopDebug=function(){et=[]};var it,ot,at=function(){function t(e){var n=e.name,i=e.id,o=e.color,a=e.tags,r=void 0===a?[]:a;Object(p.a)(this,t),this.name=void 0,this.color=void 0,this.id=void 0,this.tags=void 0,this.name=n,this.id=i,this.color=o;var s=Object(tt.a)(r),c=s[0],h=s.slice(1);this.tags=[(c||"")+"%c ".concat(this.name," ")].concat(Object(Z.a)(h),["background-color:".concat(this.color,";color:black;")])}return Object(m.a)(t,[{key:"log",value:function(){var t;if(nt(this.id)){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];(t=console).log.apply(t,Object(Z.a)(this.tags).concat(n))}}},{key:"error",value:function(){var t;if(nt(this.id)){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];(t=console).error.apply(t,Object(Z.a)(this.tags).concat(n))}}},{key:"subLogger",value:function(e){return new t({name:e.name,color:e.color,id:this.id,tags:this.tags})}}]),t}(),rt=function(){function t(e){var n=e.id,a=e.canvasWidth,r=e.canvasHeight,s=e.breed,c=e.top,h=e.left,d=e.hungerMeter,u=e.name,g=e.gender,l=e.sprite;Object(p.a)(this,t),this.currentAnimation=o.default,this.breed=void 0,this.state=i.wandering,this.timestamp=0,this.fps=0,this.sprite=void 0,this.RestingManager=void 0,this.PositionManager=void 0,this.HungerManager=void 0,this.logger=void 0,this.id=void 0,this.name=void 0,this.gender=void 0,this.breed=s,this.id=n||w(),this.name=u,this.gender=g,this.sprite=l,this.logger=new at({name:"Chicken",id:this.id,color:"sienna"}),this.RestingManager=new O,this.PositionManager=new X({canvasWidth:a,canvasHeight:r,top:c,left:h,logger:this.logger.subLogger({name:"Position",color:"forestGreen"})}),this.HungerManager=new $({hungerMeter:d,id:this.id,logger:this.logger.subLogger({name:"Hunger",color:"salmon"})})}return Object(m.a)(t,[{key:"update",value:function(t){var e=t.ctx,n=t.timestamp;this.fps=1e3/(n-this.timestamp),this.timestamp=n,this.HungerManager.updateHungerMeter(this.timestamp),this.updateBehaviour(),this.draw(e)}},{key:"getSavingState",value:function(){return Object(f.a)(Object(f.a)(Object(f.a)({},this.PositionManager.getSavingState()),this.HungerManager.getSavingState()),{},{id:this.id,name:this.name,gender:this.gender,breed:this.breed})}},{key:"onUnmount",value:function(){this.HungerManager.onUnmount()}},{key:"updateBehaviour",value:function(){var t=this.PositionManager.position;if(this.HungerManager.isEating)return this.updateStateAndAnimation(i.eating),void this.HungerManager.eat(t);var e=this.HungerManager.hasAvailableFood,n=this.PositionManager.hasReachedFood();return e&&n?(this.updateStateAndAnimation(i.eating),void this.HungerManager.startEating(t)):e&&!n?(this.updateStateAndAnimation(i.walkingToFood),void this.PositionManager.walkTowardsFood(this.HungerManager.food)):this.HungerManager.isHungry?(this.updateStateAndAnimation(i.searchingForFood),void this.HungerManager.searchForFood(t)):this.RestingManager.shouldRest(this.fps)?(this.updateStateAndAnimation(i.resting),void this.RestingManager.rest(this.fps)):(this.updateStateAndAnimation(i.wandering),void this.PositionManager.walkRandomly())}},{key:"draw",value:function(t){var e=this.PositionManager.position,n=e.left,i=e.top;t.drawImage(this.sprite,this.spriteCoordinates.x,this.spriteCoordinates.y,this.spriteCoordinates.width,this.spriteCoordinates.height,n,i,2*this.spriteCoordinates.width,2*this.spriteCoordinates.height)}},{key:"updateStateAndAnimation",value:function(t){switch(this.logger.log("Updated behaviour -",t),this.state=t,this.state){case i.wandering:case i.walkingToFood:this.currentAnimation=this.currentAnimation===o.default?o.walking:o.default;break;case i.searchingForFood:case i.resting:this.currentAnimation=o.resting;break;case i.eating:default:this.currentAnimation=o.default}}},{key:"boundary",get:function(){return this.PositionManager.chickenBoundary}},{key:"hungerMeter",get:function(){return this.HungerManager.hungerMeter}},{key:"spriteCoordinates",get:function(){return I.chicken[this.breed][this.currentAnimation]}}]),t}();!function(t){t.version="version",t.chickens="chickens",t.food="food"}(ot||(ot={}));var st,ct=(it={},Object(M.a)(it,ot.version,null),Object(M.a)(it,ot.chickens,null),Object(M.a)(it,ot.food,null),it),ht=function(t){try{var e=window.localStorage.getItem(t);if(null===e)throw Error;return JSON.parse(e)}catch(n){return ct[t]}},dt=function(t,e){try{window.localStorage.setItem(t,JSON.stringify(e))}catch(n){console.error("Not possible to set item",t,"in local storage")}},ut=n(19),gt=function(t){var e=t.map((function(t){return t.name}));return{female:ut.female.filter((function(t){return!e.includes(t)})),male:ut.male.filter((function(t){return!e.includes(t)}))}},lt=function(t,e){var n=e[t].length?e[t]:ut[t];return n[Math.min(Math.floor(Math.random()*n.length),n.length-1)]},ft=function(){function t(e){var n=e.sprite,i=e.foodMeter,o=e.id,a=e.canvasWidth,r=e.canvasHeight,s=e.left,c=e.top;Object(p.a)(this,t),this.canvasWidth=void 0,this.canvasHeight=void 0,this.sprite=void 0,this.foodMeter=void 0,this.animalsEating=[],this.top=void 0,this.left=void 0,this.id=void 0,this.sprite=n,this.canvasWidth=a,this.canvasHeight=r;var h=V.getPositionWithinBounds(Object(f.a)({top:c,left:s},B));this.top=h.top,this.left=h.left,this.foodMeter=null!==i&&void 0!==i?i:30,this.id=o||w()}return Object(m.a)(t,[{key:"update",value:function(t){var e=t.ctx;this.draw(e)}},{key:"getSavingState",value:function(){return{topRatio:this.top/this.canvasHeight,leftRatio:this.left/this.canvasWidth,foodMeter:this.foodMeter,id:this.id}}},{key:"updateFoodMeter",value:function(){this.foodMeter=Math.max(this.foodMeter-1,0),this.foodMeter||q.emit(G.RemoveFood,this.id)}},{key:"startEating",value:function(t){this.animalsEating.includes(t)||this.animalsEating.push(t)}},{key:"stopEating",value:function(t){var e=this.animalsEating.indexOf(t);-1!==e&&this.animalsEating.splice(e,1)}},{key:"draw",value:function(t){t.drawImage(this.sprite,this.spriteCoordinates.x,this.spriteCoordinates.y,this.spriteCoordinates.width,this.spriteCoordinates.height,this.left,this.top,2*this.spriteCoordinates.width,2*this.spriteCoordinates.height)}},{key:"hasFinished",get:function(){return!this.foodMeter}},{key:"isAvailable",get:function(){return this.animalsEating.length<=3&&!this.hasFinished}},{key:"spriteCoordinates",get:function(){var t=I.food,e=t.small,n=t.medium,i=t.large;return this.foodMeter<=10?e:this.foodMeter<=20?n:i}}]),t}(),vt=function(t){var e=t.ctx,n=t.food,i=t.canvasHeight,o=t.canvasWidth;e.clearRect(0,0,o,i),n.forEach((function(t){return t.update({ctx:e})}))};!function(t){t[t.setItems=0]="setItems",t[t.addFood=1]="addFood",t[t.setFood=2]="setFood",t[t.removeFood=3]="removeFood",t[t.setChickens=4]="setChickens",t[t.toggleFeeding=5]="toggleFeeding",t[t.toggleDragging=6]="toggleDragging",t[t.toggleInfo=7]="toggleInfo"}(st||(st={}));var pt,mt=function(){return{type:st.toggleFeeding}},At={items:[],food:[],chickens:[],isFeeding:!1,isDragging:!1,isInfoOpen:!1},bt=function(t,e){switch(e.type){case st.setChickens:return Object(f.a)(Object(f.a)({},t),{},{chickens:e.payload.chickens});case st.setFood:return Object(f.a)(Object(f.a)({},t),{},{food:e.payload.food});case st.addFood:return Object(f.a)(Object(f.a)({},t),{},{food:[].concat(Object(Z.a)(t.food),[e.payload.food])});case st.removeFood:return Object(f.a)(Object(f.a)({},t),{},{food:t.food.filter((function(t){return t.id!==e.payload.id}))});case st.setItems:return Object(f.a)(Object(f.a)({},t),{},{items:e.payload.items});case st.toggleDragging:return Object(f.a)(Object(f.a)({},t),{},{isDragging:!t.isDragging});case st.toggleFeeding:return Object(f.a)(Object(f.a)({},t),{},{isFeeding:!t.isFeeding});case st.toggleInfo:return Object(f.a)(Object(f.a)({},t),{},{isInfoOpen:!t.isInfoOpen});default:return t}},wt=function(t){return new Promise((function(e,n){var i=new Image;i.src=t,i.onload=function(){return e(i)},i.onerror=function(){return n()}}))};!function(t){t.v1="v1",t.v2="v2"}(pt||(pt={}));var yt=pt.v2,Ot=function(t,e,n){(ht(ot.version)||pt.v1)===pt.v1&&(!function(t,e,n){var i=ht(ot.chickens);if(i&&i.length){var o=i.map((function(n){var i=n.breed,o=(n.originalWidth,n.originalHeight,n.top),a=n.left,r=Object(v.a)(n,["breed","originalWidth","originalHeight","top","left"]);return Object(f.a)(Object(f.a)({},r),{},{topRatio:o/e,leftRatio:a/t,breed:"yellow"===i?k.lightbrown:i})})),a=new rt({canvasWidth:t,canvasHeight:e,breed:k.white,gender:"female",name:lt("female",gt(o)),sprite:n}).getSavingState();dt(ot.chickens,[].concat(Object(Z.a)(o),[a]))}}(t,e,n),function(t,e){var n=ht(ot.food);if(n&&n.length){var i=n.map((function(n){n.originalHeight,n.originalWidth;var i=n.left,o=n.top,a=Object(v.a)(n,["originalHeight","originalWidth","left","top"]);return Object(f.a)(Object(f.a)({},a),{},{leftRatio:i/t,topRatio:o/e})}));dt(ot.food,i)}}(t,e),dt(ot.version,pt.v2))},kt=function(t,e,n){!function(){var t=ht(ot.version);ht(ot.chickens)?t||dt(ot.version,pt.v1):dt(ot.version,yt)}(),Ot(t,e,n)},Ct=n(8),Ft=n.n(Ct),jt=n(21),Et=n.n(jt),Rt=n(18),Mt=n.n(Rt),Gt=n(29),It=n.n(Gt),Bt=function(t){var e=t.shouldStartFading,n=t.stopFading,i=Object(a.useRef)(null),o=Object(a.useState)(""),s=Object(h.a)(o,2),c=s[0],d=s[1],u=Object(a.useState)(0),g=Object(h.a)(u,2),l=g[0],f=g[1],v=Object(a.useState)([]),p=Object(h.a)(v,2),m=p[0],A=p[1],b=Object(a.useRef)(performance.now());Object(a.useEffect)((function(){var t;(t=[Mt.a,It.a],Promise.all(t.map((function(t){return wt(t)})))).then((function(t){A(t)})).catch()}),[]),Object(a.useEffect)((function(){var t=setInterval((function(){if(d(3===c.length?"":c+"."),m){var t,e=null===(t=i.current)||void 0===t?void 0:t.getContext("2d");if(e){var n=l?0:1;f(n),e.imageSmoothingEnabled=!1,e.clearRect(0,0,30,34),e.drawImage(m[n],0,0,15,17,0,0,30,34)}}}),500);return function(){return clearInterval(t)}}),[c,l,m]);var w=performance.now()-b.current>=1e3,y=e&&w;return Object(a.useEffect)((function(){y&&setTimeout((function(){return n()}),1e3)}),[y,n]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Ft()(Et.a.container,y&&Et.a.startFading)},r.a.createElement("h1",null,"Loading",c),r.a.createElement("canvas",{ref:i,width:"".concat(30,"px"),height:"".concat(34,"px")})))},Ht=n(14),xt=n.n(Ht),St=n(30),Dt=n.n(St),Wt=function(t,e){var n=e.map((function(t){return t.getSavingState()}));dt(t,n)},Zt=function(t){var e=t.storageKey,n=t.items,i=t.canvasHeight,o=t.canvasWidth;Object(a.useEffect)((function(){var t=setInterval((function(){return Wt(e,n)}),5e3);return function(){Wt(e,n),clearInterval(t)}}),[e,n,i,o])},Yt=function(t){var e=t.canvasWidth,n=t.canvasHeight,i=t.chickens,o=Object(a.useRef)(null),s=Object(a.useRef)(0);return Object(a.useEffect)((function(){!function(t){var e=t.canvasRef,n=t.canvasWidth,i=t.canvasHeight,o=t.chickens,a=t.animationIdRef;if(e.current){var r=e.current.getContext("2d");r&&(r.imageSmoothingEnabled=!1,window.clearInterval(a.current),a.current=window.setInterval((function(){r.clearRect(0,0,n,i),o.forEach((function(t){return t.update({ctx:r,timestamp:performance.now()})}))}),500))}}({canvasRef:o,canvasWidth:e,canvasHeight:n,animationIdRef:s,chickens:i})}),[e,n,s,i]),Zt({storageKey:ot.chickens,items:i,canvasWidth:e,canvasHeight:n}),r.a.createElement("canvas",{ref:o,width:e,height:n,className:Dt.a.canvas})},Pt=n(31),_t=n.n(Pt),Tt=n(32),Lt=n.n(Tt),Nt=function(t){return t.type.includes("touch")},Jt=function(t,e){Object(a.useEffect)((function(){return q.on(t,e),function(){q.off(t,e)}}),[t,e])},zt=_t()((function(t){var e=t.sprite,n=t.left,i=t.top,o=t.addFood,a=t.canvasWidth,r=t.canvasHeight;V.canGoToCoordinates(Object(f.a)({left:n,top:i},B))&&o(new ft({sprite:e,top:i,left:n,canvasWidth:a,canvasHeight:r}))}),100,{leading:!0,trailing:!1}),Qt=function(t){var e=t.canvasWidth,n=t.canvasHeight,i=t.food,o=t.isDragging,s=t.isFeeding,c=t.dispatch,h=t.sprite,d=Object(a.useRef)(null),u=Object(a.useRef)(0),g=s&&o,l=Object(a.useCallback)((function(t){var e=t.position,n=t.id,o=V.getClosestFood(e,i);o?q.emit(G.FoundRequestedFood,{food:o,id:n}):q.emit(G.NotFoundRequestedFood,{id:n})}),[i]),v=Object(a.useCallback)((function(t){return c(function(t){return{type:st.removeFood,payload:{id:t}}}(t))}),[c]),p=Object(a.useCallback)((function(t){return c(function(t){return{type:st.addFood,payload:{food:t}}}(t))}),[c]),m=Object(a.useCallback)((function(t){t.stopPropagation(),Nt(t)||t.preventDefault(),c({type:st.toggleDragging})}),[c]),A=Object(a.useCallback)((function(t){if(g&&!function(t){return Nt(t)&&1!==t.touches.length}(t)){var i=function(t){var e,n;return Nt(t)?(e=t.touches[0].clientX,n=t.touches[0].clientY):(e=t.clientX,n=t.clientY),{left:e,top:n}}(t);t.persist(),t.stopPropagation(),Nt(t)||t.preventDefault(),zt(Object(f.a)(Object(f.a)({},i),{},{sprite:h,addFood:p,canvasWidth:e,canvasHeight:n}))}}),[g,n,e,h,p]),b=Object(a.useCallback)((function(t){A(t),m(t)}),[A,m]);return Object(a.useEffect)((function(){!function(t){var e=t.canvasRef,n=t.canvasWidth,i=t.canvasHeight,o=t.food,a=t.animationIdRef,r=t.isDraggingFood;if(e.current){var s=e.current.getContext("2d");if(s){var c=0;s.imageSmoothingEnabled=!1,window.cancelAnimationFrame(a.current),vt({ctx:s,food:o,canvasHeight:i,canvasWidth:n});!function t(){window.cancelAnimationFrame(a.current),c++,(r||c>=30)&&(c=0,vt({ctx:s,food:o,canvasHeight:i,canvasWidth:n})),a.current=window.requestAnimationFrame(t)}()}}}({canvasRef:d,canvasWidth:e,canvasHeight:n,animationIdRef:u,food:i,isDraggingFood:g})}),[e,n,i,g,u]),Zt({storageKey:ot.food,items:i,canvasWidth:e,canvasHeight:n}),Object(a.useEffect)((function(){var t=function(t){"Escape"===t.code&&s&&c(mt())};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[s,c]),Jt(G.StartDraggingFood,m),Jt(G.StopDraggingFood,b),Jt(G.DropFood,A),Jt(G.RequestFood,l),Jt(G.RemoveFood,v),r.a.createElement("canvas",{ref:d,width:e,height:n,className:Lt.a.canvas})},Kt=n(33),Vt=n.n(Kt),Ut=function(t){"toggleFeedingBtn"!==t.target.id&&q.emit(G.StartDraggingFood,t)},Xt=function(t){"toggleFeedingBtn"!==t.target.id&&q.emit(G.StopDraggingFood,t)},qt=function(t){q.emit(G.DropFood,t),Nt(t)||q.emit(G.DetectTooltip,t)},$t=function(t){var e=t.children;return r.a.createElement("div",{className:Vt.a.container,onTouchStart:Ut,onTouchEnd:Xt,onTouchMove:qt,onMouseDown:Ut,onMouseUp:Xt,onMouseMove:qt},e)},te=n(9),ee=n.n(te),ne=n(34),ie=n.n(ne),oe=n(20),ae=n.n(oe),re=n(12),se=n.n(re),ce=function(t){var e=t.name,n=t.gender,i=t.hunger;t.id;return r.a.createElement("div",null,r.a.createElement("h4",{className:se.a.name},e," ","male"===n?"\u2642":"\u2640",!1),r.a.createElement("div",{className:se.a.hungerRow},r.a.createElement("span",{className:se.a.hungerLabel},"Hunger:"),r.a.createElement("div",{className:se.a.hungerMeter},r.a.createElement("div",{className:se.a.hungerMarker,style:{left:"".concat(i,"%")}}))))},he=function(t){var e=t.chickens,n=t.isOpen,i=Object(a.useState)(0),o=Object(h.a)(i,2)[1];return Object(a.useEffect)((function(){var t=0;return n&&(t=window.setInterval((function(){return o(Date.now())}),1e3)),function(){return window.clearInterval(t)}}),[n]),r.a.createElement("div",{className:ae.a.info},r.a.createElement("h3",{className:ae.a.title},"Hunger"),r.a.createElement("hr",{className:ae.a.hr}),function(t){return t.map((function(t,e){return r.a.createElement(ce,{key:e,name:t.name,gender:t.gender,hunger:t.hungerMeter,id:t.id})}))}(e))},de=function(t){var e=t.isInfoOpen,n=t.isFeeding,i=t.chickens,o=t.dispatch;return r.a.createElement("div",{className:Ft()(ee.a.menu,e&&ee.a.visible)},r.a.createElement("div",{className:ee.a.toolBar},r.a.createElement("button",{className:Ft()(ee.a.farmButton,e&&ee.a.active),onClick:function(t){t.stopPropagation(),o({type:st.toggleInfo})}},r.a.createElement("img",{src:Mt.a,alt:"info"})),r.a.createElement("button",{className:Ft()(ee.a.farmButton,n&&ee.a.active),onClick:function(t){t.stopPropagation(),o(mt())},id:"toggleFeedingBtn"},r.a.createElement("img",{src:ie.a,alt:"food"}))),r.a.createElement(he,{chickens:i,isOpen:e}))},ue=n(35),ge=n.n(ue),le=function(t){var e=t.canvasWidth,n=t.canvasHeight,i=t.items,o=Object(a.useRef)(null);return Object(a.useEffect)((function(){!function(t){var e=t.canvasRef,n=t.items,i=t.canvasWidth,o=t.canvasHeight;if(e.current){var a=e.current.getContext("2d");a&&(a.imageSmoothingEnabled=!1,a.clearRect(0,0,i,o),n.forEach((function(t){return t.update({ctx:a})})))}}({canvasRef:o,canvasWidth:e,canvasHeight:n,items:i})}),[e,n,i]),r.a.createElement("canvas",{ref:o,width:e,height:n,className:ge.a.canvas})},fe=n(38),ve=n(36),pe=n.n(ve),me=function(t){var e=t.onDetectTooltipCb,n=Object(a.useState)([]),i=Object(h.a)(n,2),o=i[0],s=i[1],c=Object(a.useCallback)((function(t){return s([t].concat(Object(Z.a)(o)))}),[o]),d=Object(a.useCallback)((function(t){return s(o.filter((function(e){return e.id!==t})))}),[o]),u=Object(a.useCallback)((function(t){return o.some((function(e){return e.id===t}))}),[o]),g=Object(a.useCallback)((function(t){e({event:t,addTooltip:c,removeTooltip:d,hasTooltip:u})}),[e,c,d,u]);return Jt(G.DetectTooltip,g),r.a.createElement("div",{className:pe.a.container},o.map((function(t){var e=t.id,n=t.text,i=t.minX,o=t.maxY,a=t.maxX,s=t.minY;return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement("div",{"data-for":e,"data-tip":n,"data-iscapture":!0,style:{position:"relative",top:"".concat(s,"px"),left:"".concat(i,"px"),width:"".concat(a-i,"px"),height:"".concat(o-s,"px")}}),r.a.createElement(fe.a,{id:e,place:"top",type:"dark",effect:"solid",multiline:!0}))})))},Ae=function(t){var e=t.color,n=t.zone,i=t.id;return r.a.createElement("div",{id:i,style:{position:"absolute",backgroundColor:e,top:n.top,height:n.bottom-n.top,left:n.left,width:n.right-n.left}})},be=function(t){var e=t.freeZones,n=t.noGoZones,i=t.hidden,o=Object(a.useRef)(e.map((function(){for(var t="#",e=0;e<6;e++)t+="0123456789ABCDEF".charAt(Math.floor(Math.random()*"0123456789ABCDEF".length));return t+"70"}))).current;return i?null:r.a.createElement(r.a.Fragment,null,e.map((function(t,e){var n="free-zone-".concat(e);return r.a.createElement(Ae,{id:n,key:n,zone:t,color:o[e]})})),n.map((function(t,e){var n="no-go-zone-".concat(e);return r.a.createElement(Ae,{id:n,key:n,zone:t,color:"#ff00009c"})})))},we=n(37),ye=function(t){var e=t.isDragging,n=t.isFeeding,i=t.food,o=t.chickens,s=t.isInfoOpen,c=t.canvasWidth,h=t.canvasHeight,d=t.items,u=t.sprite,g=t.dispatch,l=Object(a.useCallback)((function(t){return function(t,e){var n=e.event,i=e.addTooltip,o=e.removeTooltip,a=e.hasTooltip,r=n.clientX,s=n.clientY;t.forEach((function(t){var e=t.id,n=t.name,c=t.gender,h=t.boundary,d=h.minX,u=h.minY,g=h.maxX,l=h.maxY,f=r>=d&&r<=g&&s>=u&&s<=l,v=a(e);!f||v?!f&&v&&o(e):i({id:e,text:"".concat("male"===c?"\u2642":"\u2640"," ").concat(n),minX:d,minY:u,maxX:g,maxY:l})}))}(o,t)}),[o]);return r.a.createElement("div",{className:Ft()(xt.a.wrapper,n&&xt.a.feeding)},r.a.createElement(be,{noGoZones:V.noGoZones,freeZones:V.freeZones,hidden:!0}),r.a.createElement($t,null,r.a.createElement("div",{className:xt.a.bg}),r.a.createElement(le,{canvasWidth:c,canvasHeight:h,items:d}),r.a.createElement(Qt,{canvasWidth:c,canvasHeight:h,food:i,isDragging:e,isFeeding:n,sprite:u,dispatch:g}),r.a.createElement(Yt,{canvasWidth:c,canvasHeight:h,chickens:o}),r.a.createElement(me,{onDetectTooltipCb:l}),r.a.createElement("a",{href:"https://github.com/kobawan/idle-chicken-farm/blob/master/CHANGELOG.md",target:"_blank",rel:"noreferrer noopener",className:xt.a.version},we.a),r.a.createElement(de,{isInfoOpen:s,isFeeding:n,chickens:o,dispatch:g})))},Oe=Object(a.memo)((function(){var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=Object(a.useState)({width:window.innerWidth,height:window.innerHeight}),n=Object(h.a)(e,2),i=n[0],o=i.width,r=i.height,s=n[1];return Object(a.useEffect)((function(){var t=l()((function(){s({width:window.innerWidth,height:window.innerHeight})}),500,{trailing:!0,leading:!1});return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}),[]),{canvasWidth:o/t,canvasHeight:r/t}}(),e=t.canvasWidth,n=t.canvasHeight,i=Object(a.useReducer)(bt,At),o=Object(h.a)(i,2),s=o[0],c=s.isDragging,d=s.isFeeding,g=s.isInfoOpen,p=s.items,m=s.chickens,A=s.food,b=o[1],w=Object(a.useState)(),y=Object(h.a)(w,2),O=y[0],C=y[1],F=Object(a.useState)(!0),j=Object(h.a)(F,2),E=j[0],R=j[1],M=Object(a.useState)(!1),G=Object(h.a)(M,2),I=G[0],B=G[1];return Object(a.useEffect)((function(){wt(u.a).then((function(t){kt(e,n,t),C(t)})).catch((function(){}))}),[]),Object(a.useEffect)((function(){if(O){V.updateCanvasDimension({canvasWidth:e,canvasHeight:n});var t=K(e,n,O),i=function(t,e,n){var i=ht(ot.chickens);return i?i.map((function(i){var o=i.topRatio,a=i.leftRatio,r=Object(v.a)(i,["topRatio","leftRatio"]);return new rt(Object(f.a)({canvasWidth:t,canvasHeight:e,sprite:n,top:o?o*e:void 0,left:a?a*t:void 0},r))})):Object.values(k).reduce((function(i,o,a){var r=0===a?"male":"female",s=new rt({canvasWidth:t,canvasHeight:e,breed:o,gender:r,name:lt(r,gt(i)),sprite:n});return i.push(s),i}),[])}(e,n,O),o=function(t,e,n){var i=ht(ot.food);return i?i.map((function(i){var o=i.topRatio,a=i.leftRatio,r=Object(v.a)(i,["topRatio","leftRatio"]);return new ft(Object(f.a)(Object(f.a)({},r),{},{left:a*t,top:o*e,canvasWidth:t,canvasHeight:e,sprite:n}))})):[]}(e,n,O);b(function(t){return{type:st.setItems,payload:{items:t}}}(t)),b(function(t){return{type:st.setChickens,payload:{chickens:t}}}(i)),b(function(t){return{type:st.setFood,payload:{food:t}}}(o)),B(!0),R(!1)}}),[e,n,O]),r.a.createElement(r.a.Fragment,null,(E||I)&&r.a.createElement(Bt,{shouldStartFading:I,stopFading:function(){return B(!1)}}),!E&&r.a.createElement(ye,{isDragging:c,isFeeding:d,isInfoOpen:g,items:p,chickens:m,food:A,canvasHeight:n,canvasWidth:e,sprite:O,dispatch:b}))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(Oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}],[[39,1,2]]]);
//# sourceMappingURL=main.960d8bc7.chunk.js.map