{"version":3,"sources":["components/menu/menu.module.scss","components/hungerMeter/hungerMeter.module.scss","pages/gamePage/gamePage.module.scss","assets/chicken.png","components/info/info.module.scss","pages/loadingPage/loadingPage.module.scss","assets/farm_sprite.png","assets/chicken_walking.png","components/chickenCanvas/chickenCanvas.module.scss","components/foodCanvas/foodCanvas.module.scss","components/interactionLayer/interactionLayer.module.scss","assets/food1.png","components/StaticCanvas/staticCanvas.module.scss","components/tooltipOverlay/TooltipOverlay.module.scss","models/chicken/types.ts","utils/math.ts","models/chicken/RestingManager.ts","gameConfig.ts","types/types.ts","utils/spriteCoordinates.ts","utils/eventUtils/events.ts","utils/distance.ts","models/item.ts","utils/fenceUtils.ts","utils/drawItems.ts","models/globalPositionManager.ts","models/chicken/PositionManager.ts","utils/eventUtils/EventEmitter.ts","models/chicken/HungerManager.ts","utils/Logger.ts","utils/saveUtils/localStorage.ts","models/chicken/chicken.ts","components/farm/actions.ts","utils/chickenNameUtils.ts","models/food.ts","utils/drawFood.ts","utils/saveUtils/migrateSaves.ts","components/farm/reducer.ts","utils/loadImages.ts","pages/loadingPage/LoadingPage.tsx","utils/saveUtils/save.ts","components/chickenCanvas/ChickenCanvas.tsx","utils/drawChickens.ts","utils/devices.ts","utils/eventUtils/useEventEffect.ts","components/foodCanvas/FoodCanvas.tsx","components/interactionLayer/InteractionLayer.tsx","components/menu/consts.ts","components/hungerMeter/HungerMeter.tsx","components/info/Info.tsx","components/menu/Menu.tsx","components/StaticCanvas/StaticCanvas.tsx","components/tooltipOverlay/TooltipOverlay.tsx","components/zoneDebugger/ColoredZone.tsx","components/zoneDebugger/ZoneDebugger.tsx","pages/gamePage/GamePage.tsx","pages/gamePage/utils.ts","components/farm/Farm.tsx","utils/useWindowDimensions.ts","serviceWorker.js","index.tsx"],"names":["module","exports","ChickenState","ChickenPose","isInRange","min","max","value","getClosestValueWithinRange","distanceMin","Math","abs","generateId","random","toString","substr","getRandomValue","limit","round","RestingManager","restingTurns","fps","this","sec","setTurnsFromSec","getProbabilityFromSec","ChickenBreed","EventName","spriteCoordinatesMap","chicken","orange","default","x","y","width","height","walking","resting","white","lightbrown","brown","coop","trough","food","small","medium","large","fence","topLeft","top","topRight","bottomLeft","sideLeft","sideRight","bottomRight","bottom","FOOD_SIZE","STANDARD_FOOD_WIDTH","STANDARD_FOOD_HEIGHT","CHICKEN_SIZE","STANDARD_CHICKEN_DIMENSION","FOOD_RADIUS","CHICKEN_RADIUS","getDistance","a","b","sqrt","left","getClosest","closestItem","items","closest","Infinity","forEach","item","distance","Item","sprite","spriteCoordinates","deviationX","deviationY","id","ctx","draw","drawImage","getLeftEdge","horizontalGap","getRightEdge","fenceWidth","getTopEdge","verticalGap","getBottomEdge","fenceHeight","calculateFenceHorizontalGap","leftFenceWidth","rightFenceWidth","topFenceWidth","widthAvailable","SCREEN_PADDING_PX","amountHorizontalFences","floor","calculateFenceVerticalGap","topFenceHeight","bottomFenceHeight","sideFenceHeight","heightAvailable","amountVerticalFences","getCoopProps","getTroughProps","getItems","leftEdge","topEdge","topFence","Array","fill","map","_","i","bottomFenceTopPos","bottomFence","leftFence","rightFenceLeftPos","rightFence","corners","getWholeFenceProps","props","globalPositionManager","canvasHeight","canvasWidth","getClosestFood","coord","allAvailableFood","filter","isAvailable","length","getRandomPositionWithinBounds","randIndex","freeZones","chosenZone","right","getClosestValidPosition","closestFreeZone","topRange","leftRange","getPositionWithinBounds","canGoToCoordinates","isInsideFence","gameBoundaries","isInNoGoZone","noGoZones","some","zone","coopZone","getFenceBoundaries","window","innerWidth","innerHeight","POSSIBLE_DIRECTIONS","PositionManager","logger","path","hasBegunJourney","getNewPosition","dx","dy","boundedPos","leftRatio","topRatio","shift","destination","calculatePathToFood","currentCheckpoint","hasReachedDestination","removeCurrentCheckpoint","acceptableDistance","directionsToTry","log","splice","pos","minX","maxX","minY","maxY","eventEmitter","EventEmitter","HungerManager","hungerMeter","lastHungerIncrease","isSearchingForFood","isEating","startFoodListener","stopFoodListener","timestamp","position","startEating","eat","error","updateFoodMeter","isFull","hasFinished","stopEating","searchForFood","CustomEventEmitter","emit","RequestFood","on","FoundRequestedFood","addFood","bind","NotFoundRequestedFood","stopSearching","off","forgetFood","undefined","allowedLogs","hasLoggingEnabled","includes","startDebug","push","stopDebug","StorageKeys","Logger","name","color","tags","tagNames","tagStyles","args","console","Chicken","breed","gender","currentAnimation","state","wandering","subLogger","updateHungerMeter","updateBehaviour","getSavingState","onUnmount","currentPosition","updateStateAndAnimation","eating","foodIsAvailable","hasAvailableFood","reachedFood","hasReachedFood","walkingToFood","walkTowardsFood","isHungry","searchingForFood","shouldRest","rest","walkRandomly","chickenBoundary","FarmActions","storageKeysToDefaultMap","version","chickens","getStorageKey","key","localStorage","getItem","Error","JSON","parse","setStorageKey","setItem","stringify","getAvailableNames","usedNames","female","chickenNames","male","generateName","availableNames","names","Food","foodMeter","animalsEating","RemoveFood","indexOf","clearRect","singleFood","update","GameSaveVersions","toggleFeedingAction","type","toggleFeeding","initialFarmState","isFeeding","isDragging","isInfoOpen","farmReducer","action","setChickens","payload","setFood","removeFood","setItems","toggleDragging","toggleInfo","loadImage","url","Promise","resolve","reject","img","Image","src","onload","onerror","LATEST_VERSION","v2","migrateV1toV2","v1","savedChickens","migratedChickens","originalWidth","originalHeight","whiteChicken","migrateChickensV1toV2","savedFood","migratedFood","migrateFoodV1toV2","initSave","addDefaultVersion","LoadingPage","shouldStartFading","stopFading","canvasRef","useRef","useState","dots","setDots","animationIndex","setAnimationIndex","images","setImages","startLoadTime","performance","now","useEffect","urls","chickenUrl","chickenWalkingUrl","all","then","imgs","catch","setInterval","current","getContext","newAnimationIndex","imageSmoothingEnabled","IMG_WIDTH","IMG_HEIGHT","clearInterval","hasFinishedMinLoadTime","startFading","setTimeout","className","cx","styles","container","ref","saveItemsToStorage","storageKey","storage","useAutoSaveEffect","ChickenCanvas","animationIdRef","drawChickens","canvas","isTouchEvent","e","useEventEffect","eventName","cb","throtteFoodDrop","throttle","leading","trailing","FoodCanvas","dispatch","isDraggingFood","requestFood","useCallback","closestFood","removeFoodAction","addFoodAction","toggleFoodDragging","stopPropagation","preventDefault","dropFood","touches","isMultiFingerTouchEvent","clientX","clientY","getInteractionPos","persist","onDragFinished","frameCount","cancelAnimationFrame","loop","requestAnimationFrame","drawFoodObjects","stopFeedingOnEsc","code","document","addEventListener","removeEventListener","StartDraggingFood","StopDraggingFood","DropFood","onInteractStart","target","onInteractEnd","onInteractMove","DetectTooltip","InteractionLayer","children","onTouchStart","onTouchEnd","onTouchMove","onMouseDown","onMouseUp","onMouseMove","HungerMeter","hunger","hungerRow","hungerLabel","hungerMarker","style","Info","isOpen","setTime","Date","info","title","hr","renderChickensHunger","Menu","menu","visible","toolBar","farmButton","active","onClick","alt","foodUrl","StaticCanvas","drawItems","TooltipOverlay","onDetectTooltipCb","tooltips","setTooltips","addTooltip","tProps","removeTooltip","p","hasTooltip","onDetectTooltip","event","text","Fragment","data-for","data-tip","data-iscapture","place","effect","multiline","ColoredZone","backgroundColor","ZoneDebugger","hidden","freeZoneColors","charAt","GamePage","boundary","withinBoundaries","isHovered","handleChickenHover","wrapper","feeding","bg","href","rel","Farm","memo","resizeBy","setDimensions","handleResize","debounce","useWindowDimensionsEffect","useReducer","setSprite","isLoading","setIsLoading","startFadingLoadingPage","setStartFadingLoadingPage","spriteUrl","updateCanvasDimension","newItems","newChickens","Object","values","reduce","index","getChickens","newFood","getFood","setItemsAction","setChickensAction","setFoodAction","Boolean","location","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.960d8bc7.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"menu\":\"menu_menu__2vPAR\",\"visible\":\"menu_visible__3jm2d\",\"toolBar\":\"menu_toolBar__jeKpg\",\"farmButton\":\"menu_farmButton__3Te1g\",\"active\":\"menu_active__21Ixu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"name\":\"hungerMeter_name__3sABU\",\"hungerRow\":\"hungerMeter_hungerRow__39EdJ\",\"hungerLabel\":\"hungerMeter_hungerLabel__pYFKg\",\"hungerMeter\":\"hungerMeter_hungerMeter__3K0D1\",\"hungerMarker\":\"hungerMeter_hungerMarker__3jRbO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"gamePage_wrapper__2IRQA\",\"bg\":\"gamePage_bg__5mox9\",\"feeding\":\"gamePage_feeding__1IX4t\",\"version\":\"gamePage_version__1_jI5\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAARCAYAAAACCvahAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAUGVYSWZNTQAqAAAACAACARIAAwAAAAEAAQAAh2kABAAAAAEAAAAmAAAAAAADoAEAAwAAAAEAAQAAoAIABAAAAAEAAAAPoAMABAAAAAEAAAARAAAAAMo73PQAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAE3SURBVDgRY2CgNWBj4/iPzQ4mbILIYiCNuYKqDNgMIKgZZJAj518GU0FZDAOI0gwywIKBA0QRD0BO3aKg9f++nfL/X1lcYBqb87GaCFII0giiQRhkALJmRmRdYAW/fsDFQPwvKQif/bcUBCvnTX7L8AuoDi4DUsinFwMOFBAbhG9aSDPs2qYAN5/x+HsGmEaQINgWmEaQwL83exiYRFxATDA4zbWf4eojdgZtuZ9gPogd9Oweqs0gTTAgopEAZi54c4xBWuc5g5vXA7ABIDbMEJACsLNB7v/y7AXDp0tL4LaC2CBNIPD0iiTYNhBt+s0RLIZBgJyvEXPkv4hJyn8hBQV4KCOLg9gwjfCQhQkg+x8mBqNBrgG5EsbHSoMMgMUpjEa2EaYJHlUwARgNi1MYTdBGmEZiaQBf6YiaTd53ZAAAAABJRU5ErkJggg==\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"info\":\"info_info__rQiOK\",\"title\":\"info_title__vsvEd\",\"hr\":\"info_hr__1w1tE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"loadingPage_container__10-TY\",\"startFading\":\"loadingPage_startFading__iqwuY\"};","module.exports = __webpack_public_path__ + \"static/media/farm_sprite.aab29c37.png\";","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAARCAYAAAACCvahAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAUGVYSWZNTQAqAAAACAACARIAAwAAAAEAAQAAh2kABAAAAAEAAAAmAAAAAAADoAEAAwAAAAEAAQAAoAIABAAAAAEAAAAPoAMABAAAAAEAAAARAAAAAMo73PQAAAFZaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA1LjQuMCI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIj4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CkzCJ1kAAAE4SURBVDgRY2CgB2Bj4/iPbg8TugA2PkhjrqAqA7oBRGkGGejI+ZfBVFAWxQCiNYMMsGDgAFHEA5BTtyho/b9vp/z/VxYXmEZ3Pk7TQApBGkE0CIMMgGlmRNYFlvz1Ay4GU/QlBeG7/5aCYC28yW8Z4KIghXx6MeAAAbFB+KaFNMM6KSWGp1ck4XY8m83BANL4C2gJC0gUphHE5pGSYGAScWEQ0UhgML2xgOG03H6Gq4/YgTIQA9RPPAVrBKmF2/zvzR4QHwxAGkFgwZtjDNI6zxncvB6ADQCxQa4BWQaSB2sGOeHLsxcMny4tAdsKkri3ygWsCcQGOTvo2T0wbfrNESQEBvDAAfGQnQ/igwyDAaWwPQxvgN4AiYEsg4mj0CADQPjnYmkUGiaOohidg6wRJIfOR1c/MHwASlaCNvoa96IAAAAASUVORK5CYII=\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvas\":\"chickenCanvas_canvas__zRbUl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvas\":\"foodCanvas_canvas__3BMP1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"interactionLayer_container__8lmxc\"};","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAYUlEQVQ4T2NkoBAwUqifYQgYwMbG8R/kzV+/fmB1LV4vgDRPu2rNYCWuyGAgsgSrIQTDgCIXEBNDGC4gZCO6oSgG4PMzLoOJcgE+gwkGIszJRLuAmIBDVkO0C3AZPPAGAAD7jC0R4as9ogAAAABJRU5ErkJgggAA\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvas\":\"staticCanvas_canvas__YAp_u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"TooltipOverlay_container__2bfIm\"};","import { Gender, ChickenBreed } from \"../../types/types\";\n\nexport interface ChickenProps {\n  name: string;\n  gender: Gender;\n  canvasWidth: number;\n  canvasHeight: number;\n  sprite: HTMLImageElement;\n  id?: string;\n  breed: ChickenBreed;\n  top?: number;\n  left?: number;\n  hungerMeter?: number;\n}\n\nexport enum ChickenState {\n  eating = \"eating\",\n  walkingToFood = \"walkingToFood\",\n  wandering = \"wandering\",\n  resting = \"resting\",\n  searchingForFood = \"searchingForFood\",\n}\n\nexport enum ChickenPose {\n  default = \"default\",\n  walking = \"walking\",\n  resting = \"resting\",\n}\n","interface Range {\n  min: number;\n  max: number;\n  value: number;\n}\n\nexport const isInRange = ({ min, max, value }: Range) => {\n  return value >= min && value <= max;\n};\n\nexport const getClosestValueWithinRange = ({ min, max, value }: Range) => {\n  const distanceMin = Math.abs(value - min);\n  const distanceMax = Math.abs(max - value);\n  return distanceMax < distanceMin ? max : min;\n};\n\nexport const generateId = () => Math.random().toString(36).substr(2, 9);\n\nexport const getRandomValue = (limit = 1) => {\n  return Math.round(Math.random() * limit);\n};\n","import {\n  CHICKEN_RESTING_TURNS_PER_SEC,\n  CHICKEN_RESTING_PROBABILITY_PER_SEC,\n} from \"../../gameConfig\";\n\nconst setTurnsFromSec = (sec: number, fps: number) => Math.round(sec * fps);\nconst getProbabilityFromSec = (sec: number, fps: number) => Math.round(sec / fps);\n\nexport class RestingManager {\n  private restingTurns = 0;\n\n  public rest(fps: number) {\n    this.restingTurns = this.restingTurns\n      ? Math.max(this.restingTurns - 1, 0)\n      : setTurnsFromSec(CHICKEN_RESTING_TURNS_PER_SEC, fps);\n  }\n\n  public shouldRest(fps: number) {\n    return (\n      this.restingTurns ||\n      (!this.restingTurns &&\n        Math.random() * 100 < getProbabilityFromSec(CHICKEN_RESTING_PROBABILITY_PER_SEC, fps))\n    );\n  }\n}\n","// GENERAL\nexport const SAVING_INTERVAL = 5000;\nexport const LOADING_PAGE_MIN_MS = 1000;\nexport const SCREEN_PADDING_PX = 5;\n\n// CANVAS ITEMS\nexport const RESIZE_BY = 2;\n\n// FOOD\nexport const FOOD_MAX_DISTANCE_PX = 300;\nexport const FOOD_MAX_EATERS = 3;\nexport const FOOD_MAX_METER = 30;\nexport const FOOD_CANVAS_FRAME_THROTTLE = 30;\n\n// CHICKEN\nexport const CHICKEN_MIN_HUNGER = 30;\nexport const CHICKEN_HUNGER_THRESHOLD = process.env.NODE_ENV === \"development\" ? 2000 : 60000; // every 1 min hunger will increase\nexport const CHICKEN_MOVEMENT_PX = 2;\nexport const CHICKEN_RESTING_TURNS_PER_SEC = 10;\nexport const CHICKEN_RESTING_PROBABILITY_PER_SEC = 20;\nexport const CHICKEN_REFRESH_RATE = 500;\n\n// DEBUG\nexport const DEBUG_ZONES = false;\n","import React from \"react\";\nimport { Chicken } from \"../models/chicken/chicken\";\nimport { Item } from \"../models/item\";\nimport { Food } from \"../models/food\";\n\nexport interface Coordinates {\n  left: number;\n  top: number;\n}\n\nexport interface Dimensions {\n  width: number;\n  height: number;\n}\n\nexport interface Boundary {\n  minX: number;\n  maxX: number;\n  minY: number;\n  maxY: number;\n}\n\nexport interface StaticItems {\n  items: Item[];\n}\n\nexport interface FoodItems {\n  food: Food[];\n}\n\nexport interface ChickenItems {\n  chickens: Chicken[];\n}\n\nexport type FarmItems = StaticItems & ChickenItems & FoodItems;\n\nexport enum ChickenBreed {\n  lightbrown = \"lightbrown\",\n  brown = \"brown\",\n  orange = \"orange\",\n  white = \"white\",\n}\n\nexport type InteractEvent<E> = React.MouseEvent<E> | React.TouchEvent<E>;\n\nexport interface DrawProps {\n  canvasRef: React.RefObject<HTMLCanvasElement>;\n  canvasWidth: number;\n  canvasHeight: number;\n}\n\nexport type Gender = \"female\" | \"male\";\n\nexport type ChickenNames = Record<Gender, string[]>;\n","import { RESIZE_BY } from \"../gameConfig\";\nimport { ChickenPose } from \"../models/chicken/types\";\nimport { ChickenBreed } from \"../types/types\";\n\nexport interface CanvasCoordinates {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n}\n\nexport type ChickenSprite = Record<ChickenPose, CanvasCoordinates>;\n\ninterface SpriteCoordinatesMap {\n  chicken: Record<ChickenBreed, ChickenSprite>;\n  coop: CanvasCoordinates;\n  trough: CanvasCoordinates;\n  food: {\n    small: CanvasCoordinates;\n    medium: CanvasCoordinates;\n    large: CanvasCoordinates;\n  };\n  fence: {\n    topLeft: CanvasCoordinates;\n    topRight: CanvasCoordinates;\n    bottomLeft: CanvasCoordinates;\n    bottomRight: CanvasCoordinates;\n    sideLeft: CanvasCoordinates;\n    sideRight: CanvasCoordinates;\n    top: CanvasCoordinates;\n    bottom: CanvasCoordinates;\n  };\n}\n\nconst STANDARD_CHICKEN_DIMENSION = 16;\nconst STANDARD_FOOD_HEIGHT = 16;\nconst STANDARD_FOOD_WIDTH = 15;\n\nexport const spriteCoordinatesMap: SpriteCoordinatesMap = {\n  chicken: {\n    [ChickenBreed.orange]: {\n      [ChickenPose.default]: {\n        x: 1,\n        y: 193,\n        width: STANDARD_CHICKEN_DIMENSION,\n        height: STANDARD_CHICKEN_DIMENSION,\n      },\n      [ChickenPose.walking]: {\n        x: 1,\n        y: 209,\n        width: STANDARD_CHICKEN_DIMENSION,\n        height: STANDARD_CHICKEN_DIMENSION,\n      },\n      [ChickenPose.resting]: {\n        x: 1,\n        y: 225,\n        width: STANDARD_CHICKEN_DIMENSION,\n        height: STANDARD_CHICKEN_DIMENSION,\n      },\n    },\n    [ChickenBreed.white]: {\n      [ChickenPose.default]: {\n        x: 17,\n        y: 193,\n        width: STANDARD_CHICKEN_DIMENSION,\n        height: STANDARD_CHICKEN_DIMENSION,\n      },\n      [ChickenPose.walking]: {\n        x: 17,\n        y: 209,\n        width: STANDARD_CHICKEN_DIMENSION,\n        height: STANDARD_CHICKEN_DIMENSION,\n      },\n      [ChickenPose.resting]: {\n        x: 17,\n        y: 225,\n        width: STANDARD_CHICKEN_DIMENSION,\n        height: STANDARD_CHICKEN_DIMENSION,\n      },\n    },\n    [ChickenBreed.lightbrown]: {\n      [ChickenPose.default]: {\n        x: 33,\n        y: 193,\n        width: STANDARD_CHICKEN_DIMENSION,\n        height: STANDARD_CHICKEN_DIMENSION,\n      },\n      [ChickenPose.walking]: {\n        x: 33,\n        y: 209,\n        width: STANDARD_CHICKEN_DIMENSION,\n        height: STANDARD_CHICKEN_DIMENSION,\n      },\n      [ChickenPose.resting]: {\n        x: 33,\n        y: 225,\n        width: STANDARD_CHICKEN_DIMENSION,\n        height: STANDARD_CHICKEN_DIMENSION,\n      },\n    },\n    [ChickenBreed.brown]: {\n      [ChickenPose.default]: {\n        x: 49,\n        y: 193,\n        width: STANDARD_CHICKEN_DIMENSION,\n        height: STANDARD_CHICKEN_DIMENSION,\n      },\n      [ChickenPose.walking]: {\n        x: 49,\n        y: 209,\n        width: STANDARD_CHICKEN_DIMENSION,\n        height: STANDARD_CHICKEN_DIMENSION,\n      },\n      [ChickenPose.resting]: {\n        x: 49,\n        y: 225,\n        width: STANDARD_CHICKEN_DIMENSION,\n        height: STANDARD_CHICKEN_DIMENSION,\n      },\n    },\n  },\n  coop: {\n    x: 213,\n    y: 16,\n    width: 56,\n    height: 50,\n  },\n  trough: {\n    x: 112,\n    y: 83,\n    width: 34,\n    height: 15,\n  },\n  food: {\n    small: {\n      x: 111,\n      y: 96,\n      width: STANDARD_FOOD_WIDTH,\n      height: STANDARD_FOOD_HEIGHT,\n    },\n    medium: {\n      x: 128,\n      y: 96,\n      width: STANDARD_FOOD_WIDTH,\n      height: STANDARD_FOOD_HEIGHT,\n    },\n    large: {\n      x: 144,\n      y: 96,\n      width: STANDARD_FOOD_WIDTH,\n      height: STANDARD_FOOD_HEIGHT,\n    },\n  },\n  fence: {\n    topLeft: {\n      x: 0,\n      y: 0,\n      width: 4,\n      height: 16,\n    },\n    top: {\n      x: 14,\n      y: 0,\n      width: 20,\n      height: 16,\n    },\n    topRight: {\n      x: 60,\n      y: 0,\n      width: 4,\n      height: 16,\n    },\n    bottomLeft: {\n      x: 0,\n      y: 32,\n      width: 4,\n      height: 16,\n    },\n    sideLeft: {\n      x: 0,\n      y: 16,\n      width: 4,\n      height: 15,\n    },\n    sideRight: {\n      x: 60,\n      y: 16,\n      width: 4,\n      height: 15,\n    },\n    bottomRight: {\n      x: 60,\n      y: 32,\n      width: 4,\n      height: 16,\n    },\n    bottom: {\n      x: 14,\n      y: 32,\n      width: 20,\n      height: 16,\n    },\n  },\n};\n\n// TODO: should RESIZE_BY be used directly in spriteCoordinatesMap?\nexport const FOOD_SIZE = {\n  width: STANDARD_FOOD_WIDTH * RESIZE_BY,\n  height: STANDARD_FOOD_HEIGHT * RESIZE_BY,\n};\n\nexport const CHICKEN_SIZE = {\n  width: STANDARD_CHICKEN_DIMENSION * RESIZE_BY,\n  height: STANDARD_CHICKEN_DIMENSION * RESIZE_BY,\n};\n\nexport const FOOD_RADIUS = FOOD_SIZE.width / 2;\nexport const CHICKEN_RADIUS = CHICKEN_SIZE.height / 2;\n","export enum EventName {\n  DetectTooltip = \"DetectTooltip\",\n  StartDraggingFood = \"StartDraggingFood\",\n  StopDraggingFood = \"StopDraggingFood\",\n  DropFood = \"DropFood\",\n  RemoveFood = \"RemoveFood\",\n  RequestFood = \"RequestFood\",\n  FoundRequestedFood = \"FoundRequestedFood\",\n  NotFoundRequestedFood = \"NotFoundRequestedFood\",\n}\n","import { Coordinates } from \"../types/types\";\n\ninterface GetClosestOptions<I> extends Coordinates {\n  items: I[];\n}\n\nexport const getDistance = (a: Coordinates, b: Coordinates) => {\n  return Math.sqrt(Math.abs(a.left - b.left) ** 2 + Math.abs(a.top - b.top) ** 2);\n};\n\nexport const getClosest = <I extends Coordinates>({ items, left, top }: GetClosestOptions<I>) => {\n  let closest = Infinity;\n  let closestItem!: I;\n\n  items.forEach((item) => {\n    const distance = getDistance({ left, top }, item);\n\n    if (distance < closest) {\n      closest = distance;\n      closestItem = item;\n    }\n  });\n\n  return closestItem;\n};\n","import { generateId } from \"../utils/math\";\nimport { Coordinates } from \"../types/types\";\nimport { CanvasCoordinates } from \"../utils/spriteCoordinates\";\nimport { RESIZE_BY } from \"../gameConfig\";\n\ninterface ItemProps extends Coordinates {\n  sprite: HTMLImageElement;\n  spriteCoordinates: CanvasCoordinates;\n  deviationX?: number;\n  deviationY?: number;\n}\n\nexport class Item {\n  private sprite: HTMLImageElement;\n  private spriteCoordinates: CanvasCoordinates;\n  private top: number;\n  private left: number;\n  public id = generateId();\n\n  constructor({ sprite, spriteCoordinates, top, left, deviationX = 0, deviationY = 0 }: ItemProps) {\n    this.sprite = sprite;\n    this.spriteCoordinates = spriteCoordinates;\n    this.top = top + deviationY;\n    this.left = left + deviationX;\n  }\n\n  public update({ ctx }: { ctx: CanvasRenderingContext2D }) {\n    this.draw(ctx);\n  }\n\n  private draw(ctx: CanvasRenderingContext2D) {\n    ctx.drawImage(\n      this.sprite,\n      this.spriteCoordinates.x,\n      this.spriteCoordinates.y,\n      this.spriteCoordinates.width,\n      this.spriteCoordinates.height,\n      this.left,\n      this.top,\n      this.spriteCoordinates.width * RESIZE_BY,\n      this.spriteCoordinates.height * RESIZE_BY,\n    );\n  }\n}\n","import { RESIZE_BY, SCREEN_PADDING_PX } from \"../gameConfig\";\nimport { spriteCoordinatesMap } from \"./spriteCoordinates\";\n\nconst getLeftEdge = ({ horizontalGap }: { horizontalGap: number }) => {\n  return SCREEN_PADDING_PX + horizontalGap;\n};\n\nconst getRightEdge = ({\n  fenceWidth,\n  horizontalGap,\n  width,\n}: {\n  fenceWidth: number;\n  horizontalGap: number;\n  width: number;\n}) => {\n  return width - fenceWidth * RESIZE_BY - getLeftEdge({ horizontalGap });\n};\n\nconst getTopEdge = ({ verticalGap }: { verticalGap: number }) => {\n  return SCREEN_PADDING_PX + verticalGap;\n};\n\nconst getBottomEdge = ({\n  fenceHeight,\n  verticalGap,\n  height,\n}: {\n  fenceHeight: number;\n  verticalGap: number;\n  height: number;\n}) => {\n  return height - fenceHeight * RESIZE_BY - getTopEdge({ verticalGap });\n};\n\nconst calculateFenceHorizontalGap = (width: number) => {\n  const { sideLeft, sideRight, top } = spriteCoordinatesMap.fence;\n  const leftFenceWidth = sideLeft.width * RESIZE_BY;\n  const rightFenceWidth = sideRight.width * RESIZE_BY;\n  const topFenceWidth = top.width * RESIZE_BY;\n  const widthAvailable = width - SCREEN_PADDING_PX * 2 - leftFenceWidth - rightFenceWidth;\n  const amountHorizontalFences = Math.floor(widthAvailable / topFenceWidth);\n  const horizontalGap = (widthAvailable - amountHorizontalFences * topFenceWidth) / 2;\n\n  return {\n    horizontalGap,\n    amountHorizontalFences,\n  };\n};\n\nconst calculateFenceVerticalGap = (height: number) => {\n  const { top, bottom, sideLeft } = spriteCoordinatesMap.fence;\n  const topFenceHeight = top.height * RESIZE_BY;\n  const bottomFenceHeight = bottom.height * RESIZE_BY;\n  const sideFenceHeight = sideLeft.height * RESIZE_BY;\n  const heightAvailable = height - SCREEN_PADDING_PX * 2 - topFenceHeight - bottomFenceHeight;\n  const amountVerticalFences = Math.floor(heightAvailable / sideFenceHeight);\n  const verticalGap = (heightAvailable - amountVerticalFences * sideFenceHeight) / 2;\n\n  return {\n    verticalGap,\n    amountVerticalFences,\n  };\n};\n\nexport const getFenceBoundaries = (width: number, height: number) => {\n  const { sideRight, sideLeft, top, bottom } = spriteCoordinatesMap.fence;\n  const { verticalGap } = calculateFenceVerticalGap(height);\n  const { horizontalGap } = calculateFenceHorizontalGap(width);\n\n  return {\n    left: getLeftEdge({ horizontalGap }) + sideLeft.width * RESIZE_BY,\n    right: getRightEdge({ width, horizontalGap, fenceWidth: sideRight.width }),\n    top: getTopEdge({ verticalGap }) + top.height * RESIZE_BY,\n    bottom: getBottomEdge({ height, verticalGap, fenceHeight: bottom.height }),\n  };\n};\n\nexport const getWholeFenceProps = (width: number, height: number) => {\n  const {\n    topLeft,\n    topRight,\n    bottomLeft,\n    bottomRight,\n    top,\n    bottom,\n    sideLeft,\n    sideRight,\n  } = spriteCoordinatesMap.fence;\n\n  // WIDTH FILLING\n  const { amountHorizontalFences, horizontalGap } = calculateFenceHorizontalGap(width);\n\n  // HEIGHT FILLING\n  const { amountVerticalFences, verticalGap } = calculateFenceVerticalGap(height);\n\n  const leftEdge = getLeftEdge({ horizontalGap });\n  const topEdge = getTopEdge({ verticalGap });\n\n  const topFence = new Array(amountHorizontalFences).fill(0).map((_, i) => ({\n    top: topEdge,\n    left: leftEdge + topLeft.width * RESIZE_BY + i * (top.width * RESIZE_BY),\n    spriteCoordinates: top,\n  }));\n\n  const bottomFenceTopPos = getBottomEdge({ height, verticalGap, fenceHeight: bottomLeft.height });\n  const bottomFence = new Array(amountHorizontalFences).fill(0).map((_, i) => ({\n    top: bottomFenceTopPos,\n    left: leftEdge + bottomLeft.width * RESIZE_BY + i * (bottom.width * RESIZE_BY),\n    spriteCoordinates: bottom,\n  }));\n\n  const leftFence = new Array(amountVerticalFences).fill(0).map((_, i) => ({\n    top: topEdge + topLeft.height * RESIZE_BY + i * (sideLeft.height * RESIZE_BY),\n    left: leftEdge,\n    spriteCoordinates: sideLeft,\n  }));\n\n  const rightFenceLeftPos = getRightEdge({ width, horizontalGap, fenceWidth: sideRight.width });\n  const rightFence = new Array(amountVerticalFences).fill(0).map((_, i) => ({\n    top: topEdge + topRight.height * RESIZE_BY + i * (sideRight.height * RESIZE_BY),\n    left: rightFenceLeftPos,\n    spriteCoordinates: sideRight,\n  }));\n\n  const corners = [\n    {\n      top: topEdge,\n      left: leftEdge,\n      spriteCoordinates: topLeft,\n    },\n    {\n      top: topEdge,\n      left: getRightEdge({ width, horizontalGap, fenceWidth: topRight.width }),\n      spriteCoordinates: topRight,\n    },\n    {\n      top: getBottomEdge({ height, verticalGap, fenceHeight: bottomLeft.height }),\n      left: leftEdge,\n      spriteCoordinates: bottomLeft,\n    },\n    {\n      top: getBottomEdge({ height, verticalGap, fenceHeight: bottomRight.height }),\n      left: getRightEdge({ width, horizontalGap, fenceWidth: bottomRight.width }),\n      spriteCoordinates: bottomRight,\n    },\n  ];\n\n  return [...corners, ...topFence, ...bottomFence, ...leftFence, ...rightFence];\n};\n","import { Item } from \"../models/item\";\nimport { StaticItems } from \"../types/types\";\nimport { DrawProps } from \"../types/types\";\nimport { getWholeFenceProps } from \"./fenceUtils\";\nimport { spriteCoordinatesMap } from \"./spriteCoordinates\";\n\ntype DrawItemsProps = StaticItems & DrawProps;\n\nexport const getCoopProps = (width: number, height: number) => {\n  return {\n    top: height * 0.2,\n    left: width * 0.2,\n    spriteCoordinates: spriteCoordinatesMap.coop,\n  };\n};\n\nexport const getTroughProps = (width: number, height: number) => {\n  return {\n    top: height * 0.2,\n    left: width * 0.2,\n    deviationX: 140,\n    deviationY: 60,\n    spriteCoordinates: spriteCoordinatesMap.trough,\n  };\n};\n\nexport const getItems = (width: number, height: number, sprite: HTMLImageElement) => {\n  const items = [\n    getCoopProps(width, height),\n    getTroughProps(width, height),\n    ...getWholeFenceProps(width, height),\n  ];\n\n  return items.map((props) => new Item({ ...props, sprite }));\n};\n\nexport const drawItems = ({ canvasRef, items, canvasWidth, canvasHeight }: DrawItemsProps) => {\n  if (!canvasRef.current) {\n    return;\n  }\n  const ctx = canvasRef.current.getContext(\"2d\");\n  if (!ctx) {\n    return;\n  }\n\n  ctx.imageSmoothingEnabled = false;\n  ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n\n  items.forEach((item) => item.update({ ctx }));\n};\n","import { FOOD_MAX_DISTANCE_PX, RESIZE_BY } from \"../gameConfig\";\nimport { Coordinates, Dimensions } from \"../types/types\";\nimport { getDistance, getClosest } from \"../utils/distance\";\nimport { getCoopProps, getTroughProps } from \"../utils/drawItems\";\nimport { getFenceBoundaries } from \"../utils/fenceUtils\";\nimport { getRandomValue, getClosestValueWithinRange, isInRange } from \"../utils/math\";\nimport { Food } from \"./food\";\n\ninterface GlobalPositionManagerProps {\n  canvasWidth: number;\n  canvasHeight: number;\n}\n\nexport interface Zone extends Coordinates {\n  right: number;\n  bottom: number;\n}\n\ntype ZoneParams = Coordinates & Dimensions;\n\nclass GlobalPositionManager {\n  private canvasHeight: number;\n  private canvasWidth: number;\n\n  constructor({ canvasHeight, canvasWidth }: GlobalPositionManagerProps) {\n    this.canvasHeight = canvasHeight;\n    this.canvasWidth = canvasWidth;\n  }\n\n  public updateCanvasDimension({ canvasHeight, canvasWidth }: GlobalPositionManagerProps) {\n    this.canvasHeight = canvasHeight;\n    this.canvasWidth = canvasWidth;\n  }\n\n  public get noGoZones(): Zone[] {\n    const coop = getCoopProps(this.canvasWidth, this.canvasHeight);\n    const coopZone = {\n      left: coop.left,\n      top: coop.top,\n      right: coop.left + coop.spriteCoordinates.width * RESIZE_BY,\n      bottom: coop.top + coop.spriteCoordinates.height * RESIZE_BY,\n    };\n\n    const trough = getTroughProps(this.canvasWidth, this.canvasHeight);\n    const troughZone = {\n      left: trough.left + trough.deviationX,\n      top: trough.top + trough.deviationY,\n      right: trough.left + trough.deviationX + trough.spriteCoordinates.width * RESIZE_BY,\n      bottom: trough.top + trough.deviationY + trough.spriteCoordinates.height * RESIZE_BY,\n    };\n\n    // FIXME: items need be in order of left to right in the screen\n    return [coopZone, troughZone];\n  }\n\n  private get gameBoundaries(): Zone {\n    return getFenceBoundaries(this.canvasWidth, this.canvasHeight);\n  }\n\n  // TODO: Let's do it dynamically\n  public get freeZones() {\n    return [\n      {\n        left: this.gameBoundaries.left,\n        top: this.gameBoundaries.top,\n        right: this.noGoZones[0].left,\n        bottom: this.noGoZones[0].top,\n      },\n      {\n        left: this.gameBoundaries.left,\n        top: this.noGoZones[0].top,\n        right: this.noGoZones[0].left,\n        bottom: this.noGoZones[0].bottom,\n      },\n      {\n        left: this.gameBoundaries.left,\n        top: this.noGoZones[0].bottom,\n        right: this.noGoZones[0].left,\n        bottom: this.gameBoundaries.bottom,\n      },\n      {\n        left: this.noGoZones[0].left,\n        top: this.gameBoundaries.top,\n        right: this.noGoZones[0].right,\n        bottom: this.noGoZones[0].top,\n      },\n      {\n        left: this.noGoZones[0].left,\n        top: this.noGoZones[0].bottom,\n        right: this.noGoZones[0].right,\n        bottom: this.gameBoundaries.bottom,\n      },\n      {\n        left: this.noGoZones[0].right,\n        top: this.gameBoundaries.top,\n        right: this.noGoZones[1].right,\n        bottom: this.noGoZones[1].top,\n      },\n      {\n        left: this.noGoZones[0].right,\n        top: this.noGoZones[1].bottom,\n        right: this.noGoZones[1].right,\n        bottom: this.gameBoundaries.bottom,\n      },\n      {\n        left: this.noGoZones[1].right,\n        top: this.gameBoundaries.top,\n        right: this.gameBoundaries.right,\n        bottom: this.gameBoundaries.bottom,\n      },\n    ];\n  }\n\n  public getClosestFood = (coord: Coordinates, food: Food[]) => {\n    const allAvailableFood = food.filter(\n      (item) => item.isAvailable && getDistance(coord, item) < FOOD_MAX_DISTANCE_PX,\n    );\n    if (!allAvailableFood.length) {\n      return undefined;\n    }\n    return getClosest({\n      items: allAvailableFood,\n      ...coord,\n    });\n  };\n\n  public canGoToCoordinates({ left, width, height, top }: ZoneParams) {\n    const isInsideFence =\n      isInRange({\n        value: left,\n        min: this.gameBoundaries.left,\n        max: this.gameBoundaries.right - width,\n      }) &&\n      isInRange({\n        value: top,\n        min: this.gameBoundaries.top,\n        max: this.gameBoundaries.bottom - height,\n      });\n\n    const isInNoGoZone = this.noGoZones.some((zone) => {\n      return (\n        isInRange({ value: left, min: zone.left - width, max: zone.right }) &&\n        isInRange({ value: top, min: zone.top - height, max: zone.bottom })\n      );\n    });\n    return isInsideFence && !isInNoGoZone;\n  }\n\n  private getRandomPositionWithinBounds = ({ width, height }: Dimensions) => {\n    const randIndex = getRandomValue(this.freeZones.length - 1);\n    const chosenZone = this.freeZones[randIndex];\n\n    return {\n      top: chosenZone.top + getRandomValue(chosenZone.bottom - chosenZone.top - height),\n      left: chosenZone.left + getRandomValue(chosenZone.right - chosenZone.left - width),\n    };\n  };\n\n  private getClosestValidPosition = ({ left, top, height, width }: ZoneParams) => {\n    const closestFreeZone = getClosest({ left, top, items: this.freeZones });\n\n    const topRange = {\n      min: closestFreeZone.top,\n      max: closestFreeZone.bottom - height,\n      value: top,\n    };\n    const leftRange = {\n      min: closestFreeZone.left,\n      max: closestFreeZone.right - width,\n      value: left,\n    };\n\n    return {\n      top: isInRange(topRange) ? top : getClosestValueWithinRange(topRange),\n      left: isInRange(leftRange) ? left : getClosestValueWithinRange(leftRange),\n    };\n  };\n\n  public getPositionWithinBounds = ({\n    top,\n    left,\n    width,\n    height,\n  }: Partial<Coordinates> & Dimensions) => {\n    // if position isn't set yet, generate a new one\n    if (!left || !top) {\n      return this.getRandomPositionWithinBounds({ width, height });\n    }\n\n    // if out-of-bounds, find closest valid position\n    if (!this.canGoToCoordinates({ top, left, width, height })) {\n      return this.getClosestValidPosition({ left, top, height, width });\n    }\n\n    // item is already within the bounds\n    return { left, top };\n  };\n}\n\nexport const globalPositionManager = new GlobalPositionManager({\n  canvasWidth: window.innerWidth,\n  canvasHeight: window.innerHeight,\n});\n","import { CHICKEN_MOVEMENT_PX } from \"../../gameConfig\";\nimport { Boundary, Coordinates } from \"../../types/types\";\nimport { Logger } from \"../../utils/Logger\";\nimport { getRandomValue } from \"../../utils/math\";\nimport { CHICKEN_RADIUS, CHICKEN_SIZE, FOOD_RADIUS } from \"../../utils/spriteCoordinates\";\nimport { Food } from \"../food\";\nimport { globalPositionManager } from \"../globalPositionManager\";\nimport { ChickenProps } from \"./types\";\n\nconst POSSIBLE_DIRECTIONS: [number, number][] = [\n  [-1, -1],\n  [-1, 0],\n  [-1, 1],\n  [0, -1],\n  [0, 1],\n  [1, -1],\n  [1, 0],\n  [1, 1],\n];\n\ninterface PositionManagerProps\n  extends Pick<ChickenProps, \"canvasWidth\" | \"canvasHeight\" | \"top\" | \"left\"> {\n  logger: Logger;\n}\n\nexport class PositionManager {\n  private canvasWidth: number;\n  private canvasHeight: number;\n  private top: number;\n  private left: number;\n  private logger: Logger;\n  private path: Coordinates[] = [];\n  private hasBegunJourney = false;\n\n  constructor({ canvasWidth, canvasHeight, top, left, logger }: PositionManagerProps) {\n    this.canvasWidth = canvasWidth;\n    this.canvasHeight = canvasHeight;\n    this.logger = logger;\n\n    const boundedPos = globalPositionManager.getPositionWithinBounds({\n      top,\n      left,\n      ...CHICKEN_SIZE,\n    });\n\n    this.top = boundedPos.top;\n    this.left = boundedPos.left;\n  }\n\n  public get position(): Coordinates {\n    return { top: this.top, left: this.left };\n  }\n\n  public get chickenBoundary(): Boundary {\n    return {\n      minX: this.left,\n      maxX: this.left + CHICKEN_SIZE.width,\n      minY: this.top,\n      maxY: this.top + CHICKEN_SIZE.height,\n    };\n  }\n\n  public getSavingState() {\n    return {\n      leftRatio: this.left / this.canvasWidth,\n      topRatio: this.top / this.canvasHeight,\n    };\n  }\n\n  get currentCheckpoint() {\n    return this.path[0];\n  }\n\n  private removeCurrentCheckpoint() {\n    this.path.shift();\n  }\n\n  private calculatePathToFood(food: Food) {\n    const destination = { left: food.left + FOOD_RADIUS, top: food.top + FOOD_RADIUS };\n\n    // FIXME: check for obstacles and add checkpoints\n    this.path = [destination];\n  }\n\n  public walkTowardsFood(food: Food) {\n    if (!this.path.length) {\n      this.calculatePathToFood(food);\n      this.hasBegunJourney = true;\n    }\n\n    const { dx, dy } = this.getDistance(this.currentCheckpoint);\n    const { left, top } = this.getNewPosition(dx, dy);\n\n    this.top = top;\n    this.left = left;\n\n    if (this.hasReachedDestination(this.currentCheckpoint)) {\n      this.removeCurrentCheckpoint();\n    }\n  }\n\n  private hasReachedDestination(destination: Coordinates) {\n    const { dx, dy } = this.getDistance(destination);\n    const acceptableDistance = CHICKEN_RADIUS;\n    return Math.abs(dx) <= acceptableDistance && Math.abs(dy) <= acceptableDistance;\n  }\n\n  private getDistance(destination: Coordinates) {\n    return {\n      dx: destination.left - this.left - CHICKEN_RADIUS,\n      dy: destination.top - this.top - CHICKEN_RADIUS,\n    };\n  }\n\n  public hasReachedFood() {\n    if (this.hasBegunJourney && this.path.length === 0) {\n      this.hasBegunJourney = false;\n      return true;\n    }\n    return false;\n  }\n\n  public walkRandomly() {\n    let directionsToTry = [...POSSIBLE_DIRECTIONS];\n    let left, top;\n    do {\n      const randIndex = getRandomValue(directionsToTry.length - 1);\n      const [dx, dy] = directionsToTry[randIndex];\n\n      this.logger.log(`Trying direction: [${dx},${dy}]`);\n      directionsToTry.splice(randIndex, 1);\n\n      const pos = this.getNewPosition(dx, dy);\n      left = pos.left;\n      top = pos.top;\n    } while (\n      !globalPositionManager.canGoToCoordinates({\n        left,\n        top,\n        ...CHICKEN_SIZE,\n      }) &&\n      directionsToTry.length\n    );\n\n    this.top = top;\n    this.left = left;\n  }\n\n  private getNewPosition = (dx: number, dy: number) => {\n    return {\n      left:\n        dx === 0\n          ? this.left\n          : dx > 0\n          ? this.left + CHICKEN_MOVEMENT_PX\n          : this.left - CHICKEN_MOVEMENT_PX,\n      top:\n        dy === 0\n          ? this.top\n          : dy > 0\n          ? this.top + CHICKEN_MOVEMENT_PX\n          : this.top - CHICKEN_MOVEMENT_PX,\n    };\n  };\n}\n","import { EventEmitter } from \"events\";\nconst eventEmitter = new EventEmitter();\nexport { eventEmitter as CustomEventEmitter };\n","import { CHICKEN_HUNGER_THRESHOLD, CHICKEN_MIN_HUNGER } from \"../../gameConfig\";\nimport { Coordinates } from \"../../types/types\";\nimport { CustomEventEmitter } from \"../../utils/eventUtils/EventEmitter\";\nimport { EventName } from \"../../utils/eventUtils/events\";\nimport { Logger } from \"../../utils/Logger\";\nimport { Food } from \"../food\";\n\ninterface HungerManagerProps {\n  hungerMeter?: number;\n  id: string;\n  logger: Logger;\n}\n\nexport class HungerManager {\n  private lastHungerIncrease = 0;\n  private id: string;\n  private logger: Logger;\n  public food: Food | undefined;\n  public hungerMeter: number;\n  public isSearchingForFood = false;\n  public isEating = false;\n\n  constructor({ hungerMeter, id, logger }: HungerManagerProps) {\n    this.hungerMeter = hungerMeter || 0;\n    this.id = id;\n    this.logger = logger;\n\n    this.startFoodListener();\n  }\n\n  public onUnmount() {\n    this.stopFoodListener();\n  }\n\n  public getSavingState() {\n    return {\n      hungerMeter: this.hungerMeter,\n    };\n  }\n\n  public updateHungerMeter(timestamp: number) {\n    if (this.isEating) {\n      this.lastHungerIncrease = 0;\n      return;\n    }\n\n    if (timestamp - this.lastHungerIncrease >= CHICKEN_HUNGER_THRESHOLD) {\n      this.hungerMeter = Math.min(this.hungerMeter + 1, 100);\n      this.lastHungerIncrease = timestamp;\n    }\n  }\n\n  public startEating(position: Coordinates) {\n    if (!this.food) {\n      this.logger.error(\"Chicken needs food in order to start eating it!\");\n      return;\n    }\n    this.food.startEating(this.id);\n    this.isEating = true;\n    this.eat(position);\n  }\n\n  public eat(position: Coordinates) {\n    if (!this.food) {\n      this.logger.error(\"Chicken needs food in order to eat it!\");\n      return;\n    }\n    this.hungerMeter = Math.max(this.hungerMeter - 1, 0);\n    this.food.updateFoodMeter();\n    if (this.isFull || this.food.hasFinished) {\n      this.stopEating();\n\n      if (!this.isFull) {\n        this.searchForFood(position);\n      }\n    }\n  }\n\n  public get isHungry() {\n    return this.hungerMeter > CHICKEN_MIN_HUNGER;\n  }\n\n  public get hasAvailableFood() {\n    return !!this.food && this.food.isAvailable;\n  }\n\n  public searchForFood(position: Coordinates) {\n    if (!this.isSearchingForFood) {\n      this.logger.log(\"Start searching for food\");\n      this.isSearchingForFood = true;\n      CustomEventEmitter.emit(EventName.RequestFood, { position, id: this.id });\n    }\n  }\n\n  private addFood({ food, id }: { food: Food; id: string }) {\n    if (this.id === id) {\n      this.food = food;\n      this.isSearchingForFood = false;\n      this.logger.log(\"Stopped searching for food: found it!\");\n    }\n  }\n\n  private stopSearching({ id }: { id: string }) {\n    if (this.id === id) {\n      this.isSearchingForFood = false;\n      this.logger.log(\"Stopped searching for food: did not find any!\");\n    }\n  }\n\n  private startFoodListener() {\n    CustomEventEmitter.on(EventName.FoundRequestedFood, this.addFood.bind(this));\n    CustomEventEmitter.on(EventName.NotFoundRequestedFood, this.stopSearching.bind(this));\n  }\n\n  private stopFoodListener() {\n    CustomEventEmitter.off(EventName.FoundRequestedFood, this.addFood.bind(this));\n    CustomEventEmitter.off(EventName.NotFoundRequestedFood, this.stopSearching.bind(this));\n  }\n\n  private get isFull() {\n    return !this.hungerMeter;\n  }\n\n  private stopEating() {\n    if (!this.food) {\n      return;\n    }\n    this.food.stopEating(this.id);\n    this.forgetFood();\n    this.isEating = false;\n  }\n\n  private forgetFood() {\n    this.food = undefined;\n  }\n}\n","let allowedLogs: string[] = [];\nconst hasLoggingEnabled = (id: string) => allowedLogs.includes(id);\n\nwindow.startDebug = (id: string) => {\n  allowedLogs.push(id);\n};\n\nwindow.stopDebug = () => {\n  allowedLogs = [];\n};\n\ninterface LoggerProps {\n  name: string;\n  id: string;\n  color: string;\n  tags?: string[];\n}\n\nexport class Logger {\n  private name: string;\n  private color: string;\n  private id: string;\n  private tags: string[];\n\n  constructor({ name, id, color, tags = [] }: LoggerProps) {\n    this.name = name;\n    this.id = id;\n    this.color = color;\n\n    const [tagNames, ...tagStyles] = tags;\n    this.tags = [\n      (tagNames || \"\") + `%c ${this.name} `,\n      ...tagStyles,\n      `background-color:${this.color};color:black;`,\n    ];\n  }\n\n  public log(...args: unknown[]) {\n    if (!hasLoggingEnabled(this.id)) {\n      return;\n    }\n    console.log(...this.tags, ...args);\n  }\n\n  public error(...args: unknown[]) {\n    if (!hasLoggingEnabled(this.id)) {\n      return;\n    }\n    console.error(...this.tags, ...args);\n  }\n\n  public subLogger({ name, color }: Pick<LoggerProps, \"color\" | \"name\">) {\n    return new Logger({ name, color, id: this.id, tags: this.tags });\n  }\n}\n","export enum StorageKeys {\n  version = \"version\",\n  chickens = \"chickens\",\n  food = \"food\",\n}\n\nconst storageKeysToDefaultMap: { [key in StorageKeys]: unknown } = {\n  [StorageKeys.version]: null,\n  [StorageKeys.chickens]: null,\n  [StorageKeys.food]: null,\n};\n\nexport const getStorageKey = (key: StorageKeys): unknown => {\n  try {\n    const value = window.localStorage.getItem(key);\n    if (value === null) {\n      throw Error;\n    }\n    return JSON.parse(value);\n  } catch {\n    return storageKeysToDefaultMap[key];\n  }\n};\n\nexport const setStorageKey = (key: StorageKeys, value: unknown) => {\n  try {\n    window.localStorage.setItem(key, JSON.stringify(value));\n  } catch {\n    console.error(\"Not possible to set item\", key, \"in local storage\");\n  }\n};\n\nexport const clearStorageKey = (key: StorageKeys) => {\n  window.localStorage.removeItem(key);\n};\n","import { ChickenBreed, Gender } from \"../../types/types\";\nimport { generateId } from \"../../utils/math\";\nimport { RestingManager } from \"./RestingManager\";\nimport { ChickenPose, ChickenState, ChickenProps } from \"./types\";\nimport { PositionManager } from \"./PositionManager\";\nimport { HungerManager } from \"./HungerManager\";\nimport { Logger } from \"../../utils/Logger\";\nimport { spriteCoordinatesMap } from \"../../utils/spriteCoordinates\";\nimport { SavedChickenState } from \"../../utils/saveUtils/migrateSaves\";\nimport { RESIZE_BY } from \"../../gameConfig\";\nimport { Food } from \"../food\";\n\nexport class Chicken {\n  private currentAnimation = ChickenPose.default;\n  private breed: ChickenBreed;\n  private state = ChickenState.wandering;\n  private timestamp = 0;\n  private fps = 0;\n  private sprite: HTMLImageElement;\n  private RestingManager: RestingManager;\n  private PositionManager: PositionManager;\n  private HungerManager: HungerManager;\n  private logger: Logger;\n  public id: string;\n  public name: string;\n  public gender: Gender;\n\n  constructor({\n    id,\n    canvasWidth,\n    canvasHeight,\n    breed,\n    top,\n    left,\n    hungerMeter,\n    name,\n    gender,\n    sprite,\n  }: ChickenProps) {\n    this.breed = breed;\n    this.id = id || generateId();\n    this.name = name;\n    this.gender = gender;\n    this.sprite = sprite;\n    this.logger = new Logger({ name: \"Chicken\", id: this.id, color: \"sienna\" });\n\n    this.RestingManager = new RestingManager();\n    this.PositionManager = new PositionManager({\n      canvasWidth,\n      canvasHeight,\n      top,\n      left,\n      logger: this.logger.subLogger({ name: \"Position\", color: \"forestGreen\" }),\n    });\n    this.HungerManager = new HungerManager({\n      hungerMeter,\n      id: this.id,\n      logger: this.logger.subLogger({ name: \"Hunger\", color: \"salmon\" }),\n    });\n  }\n\n  public update({ ctx, timestamp }: { ctx: CanvasRenderingContext2D; timestamp: number }) {\n    this.fps = 1000 / (timestamp - this.timestamp);\n    this.timestamp = timestamp;\n\n    this.HungerManager.updateHungerMeter(this.timestamp);\n\n    this.updateBehaviour();\n    this.draw(ctx);\n  }\n\n  public get boundary() {\n    return this.PositionManager.chickenBoundary;\n  }\n\n  public get hungerMeter() {\n    return this.HungerManager.hungerMeter;\n  }\n\n  public getSavingState(): SavedChickenState {\n    return {\n      ...this.PositionManager.getSavingState(),\n      ...this.HungerManager.getSavingState(),\n      id: this.id,\n      name: this.name,\n      gender: this.gender,\n      breed: this.breed,\n    };\n  }\n\n  public onUnmount() {\n    this.HungerManager.onUnmount();\n  }\n\n  private get spriteCoordinates() {\n    return spriteCoordinatesMap.chicken[this.breed][this.currentAnimation];\n  }\n\n  private updateBehaviour() {\n    const currentPosition = this.PositionManager.position;\n\n    if (this.HungerManager.isEating) {\n      this.updateStateAndAnimation(ChickenState.eating);\n      this.HungerManager.eat(currentPosition);\n      return;\n    }\n\n    const foodIsAvailable = this.HungerManager.hasAvailableFood;\n    const reachedFood = this.PositionManager.hasReachedFood();\n\n    if (foodIsAvailable && reachedFood) {\n      this.updateStateAndAnimation(ChickenState.eating);\n      this.HungerManager.startEating(currentPosition);\n      return;\n    }\n\n    if (foodIsAvailable && !reachedFood) {\n      this.updateStateAndAnimation(ChickenState.walkingToFood);\n      this.PositionManager.walkTowardsFood(this.HungerManager.food as Food);\n      return;\n    }\n\n    if (this.HungerManager.isHungry) {\n      this.updateStateAndAnimation(ChickenState.searchingForFood);\n      this.HungerManager.searchForFood(currentPosition);\n      return;\n    }\n\n    if (this.RestingManager.shouldRest(this.fps)) {\n      this.updateStateAndAnimation(ChickenState.resting);\n      this.RestingManager.rest(this.fps);\n      return;\n    }\n\n    this.updateStateAndAnimation(ChickenState.wandering);\n    this.PositionManager.walkRandomly();\n  }\n\n  private draw(ctx: CanvasRenderingContext2D) {\n    const { left, top } = this.PositionManager.position;\n    ctx.drawImage(\n      this.sprite,\n      this.spriteCoordinates.x,\n      this.spriteCoordinates.y,\n      this.spriteCoordinates.width,\n      this.spriteCoordinates.height,\n      left,\n      top,\n      this.spriteCoordinates.width * RESIZE_BY,\n      this.spriteCoordinates.height * RESIZE_BY,\n    );\n  }\n\n  private updateStateAndAnimation(state: ChickenState) {\n    this.logger.log(\"Updated behaviour -\", state);\n    this.state = state;\n\n    switch (this.state) {\n      case ChickenState.wandering:\n      case ChickenState.walkingToFood:\n        this.currentAnimation =\n          this.currentAnimation === ChickenPose.default ? ChickenPose.walking : ChickenPose.default;\n        break;\n      case ChickenState.searchingForFood:\n      case ChickenState.resting:\n        this.currentAnimation = ChickenPose.resting;\n        break;\n      case ChickenState.eating:\n      default:\n        this.currentAnimation = ChickenPose.default;\n    }\n  }\n}\n","import { Item } from \"../../models/item\";\nimport { Chicken } from \"../../models/chicken/chicken\";\nimport { Food } from \"../../models/food\";\n\nexport enum FarmActions {\n  setItems,\n  addFood,\n  setFood,\n  removeFood,\n  setChickens,\n  toggleFeeding,\n  toggleDragging,\n  toggleInfo,\n}\n\ninterface ActionType<T> {\n  type: T;\n}\n\ninterface ActionWithPayloadType<T, P> extends ActionType<T> {\n  payload: P;\n}\n\nexport type SetItemsAction = ActionWithPayloadType<FarmActions.setItems, { items: Item[] }>;\nexport type AddFoodAction = ActionWithPayloadType<FarmActions.addFood, { food: Food }>;\nexport type SetFoodAction = ActionWithPayloadType<FarmActions.setFood, { food: Food[] }>;\nexport type RemoveFoodAction = ActionWithPayloadType<FarmActions.removeFood, { id: string }>;\nexport type SetChickensAction = ActionWithPayloadType<\n  FarmActions.setChickens,\n  { chickens: Chicken[] }\n>;\nexport type ToggleFeedingAction = ActionType<FarmActions.toggleFeeding>;\nexport type ToggleDraggingAction = ActionType<FarmActions.toggleDragging>;\nexport type ToggleInfoAction = ActionType<FarmActions.toggleInfo>;\n\nexport const setItemsAction = (items: Item[]): SetItemsAction => ({\n  type: FarmActions.setItems,\n  payload: { items },\n});\n\nexport const addFoodAction = (food: Food): AddFoodAction => ({\n  type: FarmActions.addFood,\n  payload: { food },\n});\n\nexport const setFoodAction = (food: Food[]): SetFoodAction => ({\n  type: FarmActions.setFood,\n  payload: { food },\n});\n\nexport const removeFoodAction = (id: string): RemoveFoodAction => ({\n  type: FarmActions.removeFood,\n  payload: { id },\n});\n\nexport const setChickensAction = (chickens: Chicken[]): SetChickensAction => ({\n  type: FarmActions.setChickens,\n  payload: { chickens },\n});\n\nexport const toggleFeedingAction = (): ToggleFeedingAction => ({\n  type: FarmActions.toggleFeeding,\n});\n\nexport const toggleDraggingAction = (): ToggleDraggingAction => ({\n  type: FarmActions.toggleDragging,\n});\n\nexport const toggleInfoAction = (): ToggleInfoAction => ({\n  type: FarmActions.toggleInfo,\n});\n","import chickenNames from \"../data/chickenNames.json\";\nimport { Gender, ChickenNames } from \"../types/types\";\n\nexport const getAvailableNames = (chickens: { name: string }[]): ChickenNames => {\n  const usedNames = chickens.map(({ name }) => name);\n\n  return {\n    female: chickenNames.female.filter((name) => !usedNames.includes(name)),\n    male: chickenNames.male.filter((name) => !usedNames.includes(name)),\n  };\n};\n\nexport const generateName = (gender: Gender, availableNames: ChickenNames) => {\n  const names = availableNames[gender].length ? availableNames[gender] : chickenNames[gender];\n  const randomIndex = Math.min(Math.floor(Math.random() * names.length), names.length - 1);\n\n  return names[randomIndex];\n};\n","import { generateId } from \"../utils/math\";\nimport { Coordinates } from \"../types/types\";\nimport { CustomEventEmitter } from \"../utils/eventUtils/EventEmitter\";\nimport { EventName } from \"../utils/eventUtils/events\";\nimport { SavedFoodState } from \"../utils/saveUtils/migrateSaves\";\nimport { CanvasCoordinates, FOOD_SIZE, spriteCoordinatesMap } from \"../utils/spriteCoordinates\";\nimport { FOOD_MAX_EATERS, FOOD_MAX_METER, RESIZE_BY } from \"../gameConfig\";\nimport { globalPositionManager } from \"./globalPositionManager\";\n\nexport interface FoodProps extends Coordinates {\n  canvasWidth: number;\n  canvasHeight: number;\n  sprite: HTMLImageElement;\n  id?: string;\n  foodMeter?: number;\n}\n\nexport class Food {\n  private canvasWidth: number;\n  private canvasHeight: number;\n  private sprite: HTMLImageElement;\n  private foodMeter: number;\n  private animalsEating: string[] = [];\n  public top: number;\n  public left: number;\n  public id: string;\n\n  constructor({ sprite, foodMeter, id, canvasWidth, canvasHeight, left, top }: FoodProps) {\n    this.sprite = sprite;\n    this.canvasWidth = canvasWidth;\n    this.canvasHeight = canvasHeight;\n\n    const boundedPos = globalPositionManager.getPositionWithinBounds({ top, left, ...FOOD_SIZE });\n    this.top = boundedPos.top;\n    this.left = boundedPos.left;\n    this.foodMeter = foodMeter ?? FOOD_MAX_METER;\n    this.id = id || generateId();\n  }\n\n  public update({ ctx }: { ctx: CanvasRenderingContext2D }) {\n    this.draw(ctx);\n  }\n\n  public getSavingState(): SavedFoodState {\n    return {\n      topRatio: this.top / this.canvasHeight,\n      leftRatio: this.left / this.canvasWidth,\n      foodMeter: this.foodMeter,\n      id: this.id,\n    };\n  }\n\n  public updateFoodMeter() {\n    this.foodMeter = Math.max(this.foodMeter - 1, 0);\n\n    if (!this.foodMeter) {\n      CustomEventEmitter.emit(EventName.RemoveFood, this.id);\n    }\n  }\n\n  public get hasFinished() {\n    return !this.foodMeter;\n  }\n\n  public get isAvailable() {\n    return this.animalsEating.length <= FOOD_MAX_EATERS && !this.hasFinished;\n  }\n\n  public startEating(id: string) {\n    if (!this.animalsEating.includes(id)) {\n      this.animalsEating.push(id);\n    }\n  }\n\n  public stopEating(id: string) {\n    const i = this.animalsEating.indexOf(id);\n    if (i !== -1) {\n      this.animalsEating.splice(i, 1);\n    }\n  }\n\n  private get spriteCoordinates(): CanvasCoordinates {\n    const { small, medium, large } = spriteCoordinatesMap.food;\n    if (this.foodMeter <= 10) {\n      return small;\n    }\n\n    if (this.foodMeter <= 20) {\n      return medium;\n    }\n\n    return large;\n  }\n\n  private draw(ctx: CanvasRenderingContext2D) {\n    ctx.drawImage(\n      this.sprite,\n      this.spriteCoordinates.x,\n      this.spriteCoordinates.y,\n      this.spriteCoordinates.width,\n      this.spriteCoordinates.height,\n      this.left,\n      this.top,\n      this.spriteCoordinates.width * RESIZE_BY,\n      this.spriteCoordinates.height * RESIZE_BY,\n    );\n  }\n}\n","import React from \"react\";\nimport { Food } from \"../models/food\";\nimport { getStorageKey, StorageKeys } from \"./saveUtils/localStorage\";\nimport { FoodItems, DrawProps } from \"../types/types\";\nimport { SavedFoodState } from \"./saveUtils/migrateSaves\";\nimport { FOOD_CANVAS_FRAME_THROTTLE } from \"../gameConfig\";\n\ntype DrawFoodObjectsProps = FoodItems &\n  DrawProps & {\n    animationIdRef: React.MutableRefObject<number>;\n    isDraggingFood: boolean;\n  };\n\nexport const getFood = (canvasWidth: number, canvasHeight: number, sprite: HTMLImageElement) => {\n  const savedFood = getStorageKey(StorageKeys.food) as null | SavedFoodState[];\n  if (!savedFood) {\n    return [];\n  }\n\n  return savedFood.map(({ topRatio, leftRatio, ...props }: SavedFoodState) => {\n    return new Food({\n      ...props,\n      left: leftRatio * canvasWidth,\n      top: topRatio * canvasHeight,\n      canvasWidth,\n      canvasHeight,\n      sprite,\n    });\n  });\n};\n\nconst draw = ({\n  ctx,\n  food,\n  canvasHeight,\n  canvasWidth,\n}: Pick<DrawFoodObjectsProps, \"food\" | \"canvasHeight\" | \"canvasWidth\"> & {\n  ctx: CanvasRenderingContext2D;\n}) => {\n  ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n  food.forEach((singleFood) => singleFood.update({ ctx }));\n};\n\nexport const drawFoodObjects = ({\n  canvasRef,\n  canvasWidth,\n  canvasHeight,\n  food,\n  animationIdRef,\n  isDraggingFood,\n}: DrawFoodObjectsProps) => {\n  if (!canvasRef.current) {\n    return;\n  }\n  const ctx = canvasRef.current.getContext(\"2d\");\n  if (!ctx) {\n    return;\n  }\n\n  let frameCount = 0;\n  ctx.imageSmoothingEnabled = false;\n  window.cancelAnimationFrame(animationIdRef.current);\n\n  // to avoid interaction delays\n  draw({ ctx, food, canvasHeight, canvasWidth });\n\n  const loop = () => {\n    window.cancelAnimationFrame(animationIdRef.current);\n    frameCount++;\n\n    if (isDraggingFood || frameCount >= FOOD_CANVAS_FRAME_THROTTLE) {\n      frameCount = 0;\n\n      draw({ ctx, food, canvasHeight, canvasWidth });\n    }\n    animationIdRef.current = window.requestAnimationFrame(loop);\n  };\n\n  loop();\n};\n","import { Chicken } from \"../../models/chicken/chicken\";\nimport { ChickenBreed } from \"../../types/types\";\nimport { generateName, getAvailableNames } from \"../chickenNameUtils\";\nimport { getStorageKey, setStorageKey, StorageKeys } from \"./localStorage\";\n\nexport interface SavedChickenStateV1 {\n  name: string;\n  gender: \"male\" | \"female\";\n  id: string;\n  breed: ChickenBreed.brown | \"yellow\" | ChickenBreed.orange;\n  originalWidth: number;\n  originalHeight: number;\n  top: number;\n  left: number;\n  hungerMeter: number;\n}\n\ninterface SavedChickenStateV2 {\n  name: string;\n  gender: \"male\" | \"female\";\n  id: string;\n  breed: ChickenBreed.brown | ChickenBreed.lightbrown | ChickenBreed.orange | ChickenBreed.white;\n  topRatio: number;\n  leftRatio: number;\n  hungerMeter: number;\n}\n\ninterface SavedFoodStateV1 {\n  left: number;\n  top: number;\n  foodMeter: number;\n  id: string;\n  originalHeight: number;\n  originalWidth: number;\n}\n\ninterface SavedFoodStateV2 {\n  leftRatio: number;\n  topRatio: number;\n  foodMeter: number;\n  id: string;\n}\n\nenum GameSaveVersions {\n  v1 = \"v1\",\n  v2 = \"v2\",\n}\n\n// These should always be updated to latest version\nexport type SavedChickenState = SavedChickenStateV2;\nexport type SavedFoodState = SavedFoodStateV2;\nconst LATEST_VERSION = GameSaveVersions.v2;\n\nconst addDefaultVersion = () => {\n  const version = getStorageKey(StorageKeys.version);\n  const chickens = getStorageKey(StorageKeys.chickens);\n\n  // For new players\n  if (!chickens) {\n    setStorageKey(StorageKeys.version, LATEST_VERSION);\n    return;\n  }\n\n  // For version one compatibility\n  if (!version) {\n    setStorageKey(StorageKeys.version, GameSaveVersions.v1);\n  }\n};\n\nconst getVersion = (): GameSaveVersions => {\n  return (getStorageKey(StorageKeys.version) as null | GameSaveVersions) || GameSaveVersions.v1;\n};\n\nconst migrateChickensV1toV2 = (\n  canvasWidth: number,\n  canvasHeight: number,\n  sprite: HTMLImageElement,\n) => {\n  const savedChickens = getStorageKey(StorageKeys.chickens) as SavedChickenStateV1[] | null;\n  if (!savedChickens || !savedChickens.length) {\n    return;\n  }\n\n  const migratedChickens: SavedChickenStateV2[] = savedChickens.map(\n    ({ breed, originalWidth, originalHeight, top, left, ...rest }) => ({\n      ...rest,\n      topRatio: top / canvasHeight,\n      leftRatio: left / canvasWidth,\n      breed: breed === \"yellow\" ? ChickenBreed.lightbrown : breed,\n    }),\n  );\n  const whiteChicken: SavedChickenStateV2 = new Chicken({\n    canvasWidth,\n    canvasHeight,\n    breed: ChickenBreed.white,\n    gender: \"female\",\n    name: generateName(\"female\", getAvailableNames(migratedChickens)),\n    sprite,\n  }).getSavingState();\n\n  setStorageKey(StorageKeys.chickens, [...migratedChickens, whiteChicken]);\n};\n\nconst migrateFoodV1toV2 = (canvasWidth: number, canvasHeight: number) => {\n  const savedFood = getStorageKey(StorageKeys.food) as SavedFoodStateV1[] | null;\n\n  if (!savedFood || !savedFood.length) {\n    return;\n  }\n\n  const migratedFood: SavedFoodStateV2[] = savedFood.map(\n    ({ originalHeight, originalWidth, left, top, ...rest }) => ({\n      ...rest,\n      leftRatio: left / canvasWidth,\n      topRatio: top / canvasHeight,\n    }),\n  );\n\n  setStorageKey(StorageKeys.food, migratedFood);\n};\n\nconst migrateV1toV2 = (canvasWidth: number, canvasHeight: number, sprite: HTMLImageElement) => {\n  const version = getVersion();\n  if (version !== GameSaveVersions.v1) {\n    return;\n  }\n  migrateChickensV1toV2(canvasWidth, canvasHeight, sprite);\n  migrateFoodV1toV2(canvasWidth, canvasHeight);\n\n  setStorageKey(StorageKeys.version, GameSaveVersions.v2);\n};\n\nexport const initSave = (canvasWidth: number, canvasHeight: number, sprite: HTMLImageElement) => {\n  addDefaultVersion();\n  migrateV1toV2(canvasWidth, canvasHeight, sprite);\n};\n","import React from \"react\";\nimport { FarmItems } from \"../../types/types\";\nimport {\n  SetItemsAction,\n  AddFoodAction,\n  SetChickensAction,\n  ToggleFeedingAction,\n  ToggleDraggingAction,\n  FarmActions,\n  RemoveFoodAction,\n  ToggleInfoAction,\n  SetFoodAction,\n} from \"./actions\";\n\nexport type AllFarmActions =\n  | SetItemsAction\n  | AddFoodAction\n  | SetFoodAction\n  | RemoveFoodAction\n  | SetChickensAction\n  | ToggleFeedingAction\n  | ToggleDraggingAction\n  | ToggleInfoAction;\n\nexport interface FarmState extends FarmItems {\n  isFeeding: boolean;\n  isDragging: boolean;\n  isInfoOpen: boolean;\n}\n\nexport const initialFarmState: FarmState = {\n  items: [],\n  food: [],\n  chickens: [],\n  isFeeding: false,\n  isDragging: false,\n  isInfoOpen: false,\n};\n\ntype FarmReducerType = React.Reducer<FarmState, AllFarmActions>;\n\nexport const farmReducer: FarmReducerType = (state, action) => {\n  switch (action.type) {\n    case FarmActions.setChickens:\n      return {\n        ...state,\n        chickens: action.payload.chickens,\n      };\n    case FarmActions.setFood: {\n      return {\n        ...state,\n        food: action.payload.food,\n      };\n    }\n    case FarmActions.addFood:\n      return {\n        ...state,\n        food: [...state.food, action.payload.food],\n      };\n    case FarmActions.removeFood:\n      return {\n        ...state,\n        food: state.food.filter(({ id }) => id !== action.payload.id),\n      };\n    case FarmActions.setItems:\n      return {\n        ...state,\n        items: action.payload.items,\n      };\n    case FarmActions.toggleDragging:\n      return {\n        ...state,\n        isDragging: !state.isDragging,\n      };\n    case FarmActions.toggleFeeding:\n      return {\n        ...state,\n        isFeeding: !state.isFeeding,\n      };\n    case FarmActions.toggleInfo:\n      return {\n        ...state,\n        isInfoOpen: !state.isInfoOpen,\n      };\n    default:\n      return state;\n  }\n};\n","export const loadImage = (url: string): Promise<HTMLImageElement> => {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.src = url;\n    img.onload = () => resolve(img);\n    img.onerror = () => reject();\n  });\n};\n\nexport const loadMultipleImages = (urls: string[]): Promise<HTMLImageElement[]> => {\n  return Promise.all(urls.map((url) => loadImage(url)));\n};\n","import React, { useEffect, useRef, useState } from \"react\";\nimport cx from \"classnames\";\nimport styles from \"./loadingPage.module.scss\";\nimport chickenUrl from \"../../assets/chicken.png\";\nimport chickenWalkingUrl from \"../../assets/chicken_walking.png\";\nimport { loadMultipleImages } from \"../../utils/loadImages\";\nimport { LOADING_PAGE_MIN_MS, RESIZE_BY } from \"../../gameConfig\";\n\nconst IMG_WIDTH = 15;\nconst IMG_HEIGHT = 17;\nconst FADING_MS = 1000;\n\ninterface LoadingPageProps {\n  shouldStartFading: boolean;\n  stopFading: () => void;\n}\n\nexport const LoadingPage: React.FC<LoadingPageProps> = ({ shouldStartFading, stopFading }) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const [dots, setDots] = useState(\"\");\n  const [animationIndex, setAnimationIndex] = useState(0);\n  const [images, setImages] = useState<HTMLImageElement[]>([]);\n  const startLoadTime = useRef(performance.now());\n\n  useEffect(() => {\n    loadMultipleImages([chickenUrl, chickenWalkingUrl])\n      .then((imgs) => {\n        setImages(imgs);\n      })\n      .catch();\n  }, []);\n\n  useEffect(() => {\n    const id = setInterval(() => {\n      setDots(dots.length === 3 ? \"\" : dots + \".\");\n\n      if (images) {\n        const ctx = canvasRef.current?.getContext(\"2d\");\n        if (ctx) {\n          const newAnimationIndex = animationIndex ? 0 : 1;\n          setAnimationIndex(newAnimationIndex);\n          ctx.imageSmoothingEnabled = false;\n          ctx.clearRect(0, 0, IMG_WIDTH * RESIZE_BY, IMG_HEIGHT * RESIZE_BY);\n          ctx.drawImage(\n            images[newAnimationIndex],\n            0,\n            0,\n            IMG_WIDTH,\n            IMG_HEIGHT,\n            0,\n            0,\n            IMG_WIDTH * RESIZE_BY,\n            IMG_HEIGHT * RESIZE_BY,\n          );\n        }\n      }\n    }, 500);\n    return () => clearInterval(id);\n  }, [dots, animationIndex, images]);\n\n  const hasFinishedMinLoadTime = performance.now() - startLoadTime.current >= LOADING_PAGE_MIN_MS;\n  const startFading = shouldStartFading && hasFinishedMinLoadTime;\n  useEffect(() => {\n    if (startFading) {\n      setTimeout(() => stopFading(), FADING_MS);\n    }\n  }, [startFading, stopFading]);\n\n  return (\n    <>\n      <div className={cx(styles.container, startFading && styles.startFading)}>\n        <h1>Loading{dots}</h1>\n        <canvas\n          ref={canvasRef}\n          width={`${IMG_WIDTH * RESIZE_BY}px`}\n          height={`${IMG_HEIGHT * RESIZE_BY}px`}\n        ></canvas>\n      </div>\n    </>\n  );\n};\n","import { useEffect } from \"react\";\nimport { SAVING_INTERVAL } from \"../../gameConfig\";\nimport { setStorageKey, StorageKeys } from \"./localStorage\";\n\nconst saveItemsToStorage = (\n  storageKey: StorageKeys,\n  items: { getSavingState: () => unknown }[],\n) => {\n  const storage = items.map((item) => item.getSavingState());\n  setStorageKey(storageKey, storage);\n};\n\nexport const useAutoSaveEffect = ({\n  storageKey,\n  items,\n  canvasHeight,\n  canvasWidth,\n}: {\n  storageKey: StorageKeys;\n  items: { getSavingState: () => unknown }[];\n  canvasWidth: number;\n  canvasHeight: number;\n}) => {\n  useEffect(() => {\n    const id = setInterval(() => saveItemsToStorage(storageKey, items), SAVING_INTERVAL);\n    return () => {\n      saveItemsToStorage(storageKey, items);\n      clearInterval(id);\n    };\n  }, [storageKey, items, canvasHeight, canvasWidth]);\n};\n","import React, { useRef, useEffect } from \"react\";\nimport styles from \"./chickenCanvas.module.scss\";\nimport { ChickenItems } from \"../../types/types\";\nimport { drawChickens } from \"../../utils/drawChickens\";\nimport { StorageKeys } from \"../../utils/saveUtils/localStorage\";\nimport { useAutoSaveEffect } from \"../../utils/saveUtils/save\";\n\ninterface ChickenCanvasProps extends ChickenItems {\n  canvasWidth: number;\n  canvasHeight: number;\n}\n\nexport const ChickenCanvas: React.FC<ChickenCanvasProps> = ({\n  canvasWidth,\n  canvasHeight,\n  chickens,\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const animationIdRef = useRef(0);\n\n  useEffect(() => {\n    drawChickens({\n      canvasRef,\n      canvasWidth,\n      canvasHeight,\n      animationIdRef,\n      chickens,\n    });\n  }, [canvasWidth, canvasHeight, animationIdRef, chickens]);\n\n  useAutoSaveEffect({\n    storageKey: StorageKeys.chickens,\n    items: chickens,\n    canvasWidth,\n    canvasHeight,\n  });\n\n  return (\n    <canvas\n      ref={canvasRef}\n      width={canvasWidth}\n      height={canvasHeight}\n      className={styles.canvas}\n    ></canvas>\n  );\n};\n","import React from \"react\";\nimport { Chicken } from \"../models/chicken/chicken\";\nimport { ChickenBreed, ChickenItems, DrawProps } from \"../types/types\";\nimport { getStorageKey, StorageKeys } from \"./saveUtils/localStorage\";\nimport { getAvailableNames, generateName } from \"./chickenNameUtils\";\nimport { SavedChickenState } from \"./saveUtils/migrateSaves\";\nimport { CHICKEN_REFRESH_RATE } from \"../gameConfig\";\n\ntype DrawDynamicObjectsProps = ChickenItems &\n  DrawProps & { animationIdRef: React.MutableRefObject<number> };\n\nexport const getChickens = (\n  canvasWidth: number,\n  canvasHeight: number,\n  sprite: HTMLImageElement,\n) => {\n  const savedChickens = getStorageKey(StorageKeys.chickens) as null | SavedChickenState[];\n  if (!savedChickens) {\n    return Object.values(ChickenBreed).reduce<Chicken[]>((chickens, breed, index) => {\n      const gender = index === 0 ? \"male\" : \"female\";\n      const chicken = new Chicken({\n        canvasWidth,\n        canvasHeight,\n        breed,\n        gender,\n        name: generateName(gender, getAvailableNames(chickens)),\n        sprite,\n      });\n      chickens.push(chicken);\n      return chickens;\n    }, []);\n  }\n\n  return savedChickens.map(({ topRatio, leftRatio, ...props }: SavedChickenState) => {\n    return new Chicken({\n      canvasWidth,\n      canvasHeight,\n      sprite,\n      top: topRatio ? topRatio * canvasHeight : undefined,\n      left: leftRatio ? leftRatio * canvasWidth : undefined,\n      ...props,\n    });\n  });\n};\n\nexport const drawChickens = ({\n  canvasRef,\n  canvasWidth,\n  canvasHeight,\n  chickens,\n  animationIdRef,\n}: DrawDynamicObjectsProps) => {\n  if (!canvasRef.current) {\n    return;\n  }\n  const ctx = canvasRef.current.getContext(\"2d\");\n  if (!ctx) {\n    return;\n  }\n\n  ctx.imageSmoothingEnabled = false;\n  window.clearInterval(animationIdRef.current);\n  animationIdRef.current = window.setInterval(() => {\n    ctx.clearRect(0, 0, canvasWidth, canvasHeight);\n\n    chickens.forEach((chicken) =>\n      chicken.update({\n        ctx,\n        timestamp: performance.now(),\n      }),\n    );\n  }, CHICKEN_REFRESH_RATE);\n};\n","import React from \"react\";\nimport { InteractEvent } from \"../types/types\";\n\nexport const isTouchEvent = (e: InteractEvent<HTMLElement>): e is React.TouchEvent<HTMLElement> => {\n  return (e as React.TouchEvent<HTMLElement>).type.includes(\"touch\");\n};\n\nexport const isMultiFingerTouchEvent = (e: InteractEvent<HTMLElement>) => {\n  return isTouchEvent(e) && e.touches.length !== 1;\n};\n\nexport const getInteractionPos = (e: InteractEvent<HTMLElement>) => {\n  let left: number;\n  let top: number;\n\n  if (isTouchEvent(e)) {\n    left = e.touches[0].clientX;\n    top = e.touches[0].clientY;\n  } else {\n    left = e.clientX;\n    top = e.clientY;\n  }\n\n  return { left, top };\n};\n","import { useEffect } from \"react\";\nimport { CustomEventEmitter } from \"./EventEmitter\";\nimport { EventName } from \"./events\";\n\nexport const useEventEffect = (eventName: EventName, cb: (...args: any[]) => void) => {\n  useEffect(() => {\n    CustomEventEmitter.on(eventName, cb);\n    return () => {\n      CustomEventEmitter.off(eventName, cb);\n    };\n  }, [eventName, cb]);\n};\n","import React, { useRef, useEffect, useCallback } from \"react\";\nimport throttle from \"lodash.throttle\";\nimport styles from \"./foodCanvas.module.scss\";\nimport { drawFoodObjects } from \"../../utils/drawFood\";\nimport { InteractEvent, FoodItems, Coordinates } from \"../../types/types\";\nimport { StorageKeys } from \"../../utils/saveUtils/localStorage\";\nimport { useAutoSaveEffect } from \"../../utils/saveUtils/save\";\nimport { isTouchEvent, getInteractionPos, isMultiFingerTouchEvent } from \"../../utils/devices\";\nimport { Food, FoodProps } from \"../../models/food\";\nimport { EventName } from \"../../utils/eventUtils/events\";\nimport { AllFarmActions } from \"../farm/reducer\";\nimport {\n  addFoodAction,\n  removeFoodAction,\n  toggleDraggingAction,\n  toggleFeedingAction,\n} from \"../farm/actions\";\nimport { useEventEffect } from \"../../utils/eventUtils/useEventEffect\";\nimport { CustomEventEmitter } from \"../../utils/eventUtils/EventEmitter\";\nimport { globalPositionManager } from \"../../models/globalPositionManager\";\nimport { FOOD_SIZE } from \"../../utils/spriteCoordinates\";\n\ninterface FoodCanvasProps extends FoodItems {\n  canvasWidth: number;\n  canvasHeight: number;\n  isDragging: boolean;\n  isFeeding: boolean;\n  sprite: HTMLImageElement;\n  dispatch: React.Dispatch<AllFarmActions>;\n}\n\nconst throtteFoodDrop = throttle(\n  ({\n    sprite,\n    left,\n    top,\n    addFood,\n    canvasWidth,\n    canvasHeight,\n  }: FoodProps & { addFood: (food: Food) => void }) => {\n    if (!globalPositionManager.canGoToCoordinates({ left, top, ...FOOD_SIZE })) {\n      return;\n    }\n\n    const food = new Food({\n      sprite,\n      top,\n      left,\n      canvasWidth,\n      canvasHeight,\n    });\n    addFood(food);\n  },\n  100,\n  { leading: true, trailing: false },\n);\n\nexport const FoodCanvas: React.FC<FoodCanvasProps> = ({\n  canvasWidth,\n  canvasHeight,\n  food,\n  isDragging,\n  isFeeding,\n  dispatch,\n  sprite,\n}) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const animationIdRef = useRef(0);\n  const isDraggingFood = isFeeding && isDragging;\n\n  const requestFood = useCallback(\n    ({ position, id }: { position: Coordinates; id: string }) => {\n      const closestFood = globalPositionManager.getClosestFood(position, food);\n\n      if (closestFood) {\n        CustomEventEmitter.emit(EventName.FoundRequestedFood, {\n          food: closestFood,\n          id,\n        });\n      } else {\n        CustomEventEmitter.emit(EventName.NotFoundRequestedFood, { id });\n      }\n    },\n    [food],\n  );\n  const removeFood = useCallback((id: string) => dispatch(removeFoodAction(id)), [dispatch]);\n  const addFood = useCallback((food: Food) => dispatch(addFoodAction(food)), [dispatch]);\n\n  const toggleFoodDragging = useCallback(\n    (e: InteractEvent<HTMLCanvasElement>) => {\n      e.stopPropagation();\n      if (!isTouchEvent(e)) {\n        e.preventDefault();\n      }\n\n      dispatch(toggleDraggingAction());\n    },\n    [dispatch],\n  );\n\n  const dropFood = useCallback(\n    (e: InteractEvent<HTMLCanvasElement>) => {\n      if (!isDraggingFood || isMultiFingerTouchEvent(e)) {\n        return;\n      }\n\n      const pos = getInteractionPos(e);\n\n      e.persist();\n      e.stopPropagation();\n      if (!isTouchEvent(e)) {\n        e.preventDefault();\n      }\n\n      throtteFoodDrop({\n        ...pos,\n        sprite,\n        addFood,\n        canvasWidth,\n        canvasHeight,\n      });\n    },\n    [isDraggingFood, canvasHeight, canvasWidth, sprite, addFood],\n  );\n\n  const onDragFinished = useCallback(\n    (e: InteractEvent<HTMLCanvasElement>) => {\n      dropFood(e);\n      toggleFoodDragging(e);\n    },\n    [dropFood, toggleFoodDragging],\n  );\n\n  useEffect(() => {\n    drawFoodObjects({\n      canvasRef,\n      canvasWidth,\n      canvasHeight,\n      animationIdRef,\n      food,\n      isDraggingFood,\n    });\n  }, [canvasWidth, canvasHeight, food, isDraggingFood, animationIdRef]);\n  useAutoSaveEffect({\n    storageKey: StorageKeys.food,\n    items: food,\n    canvasWidth,\n    canvasHeight,\n  });\n  useEffect(() => {\n    const stopFeedingOnEsc = (e: KeyboardEvent) => {\n      if (e.code === \"Escape\" && isFeeding) {\n        dispatch(toggleFeedingAction());\n      }\n    };\n    document.addEventListener(\"keydown\", stopFeedingOnEsc);\n\n    return () => {\n      document.removeEventListener(\"keydown\", stopFeedingOnEsc);\n    };\n  }, [isFeeding, dispatch]);\n\n  useEventEffect(EventName.StartDraggingFood, toggleFoodDragging);\n  useEventEffect(EventName.StopDraggingFood, onDragFinished);\n  useEventEffect(EventName.DropFood, dropFood);\n  useEventEffect(EventName.RequestFood, requestFood);\n  useEventEffect(EventName.RemoveFood, removeFood);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      width={canvasWidth}\n      height={canvasHeight}\n      className={styles.canvas}\n    ></canvas>\n  );\n};\n","import React from \"react\";\nimport { InteractEvent } from \"../../types/types\";\nimport { isTouchEvent } from \"../../utils/devices\";\nimport { CustomEventEmitter } from \"../../utils/eventUtils/EventEmitter\";\nimport { EventName } from \"../../utils/eventUtils/events\";\nimport { TOGGLE_FEEDING_BTN_ID } from \"../menu/consts\";\nimport styles from \"./interactionLayer.module.scss\";\n\nconst onInteractStart = (e: InteractEvent<HTMLDivElement>) => {\n  if ((e.target as HTMLElement).id === TOGGLE_FEEDING_BTN_ID) {\n    return;\n  }\n  CustomEventEmitter.emit(EventName.StartDraggingFood, e);\n};\n\nconst onInteractEnd = (e: InteractEvent<HTMLDivElement>) => {\n  if ((e.target as HTMLElement).id === TOGGLE_FEEDING_BTN_ID) {\n    return;\n  }\n  CustomEventEmitter.emit(EventName.StopDraggingFood, e);\n};\n\nconst onInteractMove = (e: InteractEvent<HTMLDivElement>) => {\n  CustomEventEmitter.emit(EventName.DropFood, e);\n\n  if (!isTouchEvent(e)) {\n    CustomEventEmitter.emit(EventName.DetectTooltip, e);\n  }\n};\n\nexport const InteractionLayer: React.FC = ({ children }) => {\n  return (\n    <div\n      className={styles.container}\n      onTouchStart={onInteractStart}\n      onTouchEnd={onInteractEnd}\n      onTouchMove={onInteractMove}\n      onMouseDown={onInteractStart}\n      onMouseUp={onInteractEnd}\n      onMouseMove={onInteractMove}\n    >\n      {children}\n    </div>\n  );\n};\n","export const TOGGLE_FEEDING_BTN_ID = \"toggleFeedingBtn\";\n","import React from \"react\";\nimport styles from \"./hungerMeter.module.scss\";\nimport { Gender } from \"../../types/types\";\n\nconst isProduction = process.env.NODE_ENV === \"production\";\n\ninterface HungerMeterProps {\n  name: string;\n  gender: Gender;\n  hunger: number;\n  id: string;\n}\n\nexport const HungerMeter: React.FC<HungerMeterProps> = ({ name, gender, hunger, id }) => {\n  return (\n    <div>\n      <h4 className={styles.name}>\n        {name} {gender === \"male\" ? \"\" : \"\"}\n        {!isProduction && <small>{id}</small>}\n      </h4>\n      <div className={styles.hungerRow}>\n        <span className={styles.hungerLabel}>Hunger:</span>\n        <div className={styles.hungerMeter}>\n          <div\n            className={styles.hungerMarker}\n            style={{\n              left: `${hunger}%`,\n            }}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport styles from \"./info.module.scss\";\nimport { Chicken } from \"../../models/chicken/chicken\";\nimport { HungerMeter } from \"../hungerMeter/HungerMeter\";\n\ninterface InfoProps {\n  chickens: Chicken[];\n  isOpen: boolean;\n}\n\nconst renderChickensHunger = (chickens: Chicken[]) => {\n  return chickens.map((chicken, i) => (\n    <HungerMeter\n      key={i}\n      name={chicken.name}\n      gender={chicken.gender}\n      hunger={chicken.hungerMeter}\n      id={chicken.id}\n    />\n  ));\n};\n\nexport const Info: React.FC<InfoProps> = ({ chickens, isOpen }) => {\n  const [, setTime] = useState(0);\n\n  useEffect(() => {\n    let id = 0;\n    if (isOpen) {\n      id = window.setInterval(() => setTime(Date.now()), 1000);\n    }\n    return () => window.clearInterval(id);\n  }, [isOpen]);\n\n  return (\n    <div className={styles.info}>\n      <h3 className={styles.title}>Hunger</h3>\n      <hr className={styles.hr} />\n      {renderChickensHunger(chickens)}\n    </div>\n  );\n};\n","import React from \"react\";\nimport cx from \"classnames\";\nimport styles from \"./menu.module.scss\";\nimport foodUrl from \"../../assets/food1.png\";\nimport chickenUrl from \"../../assets/chicken.png\";\nimport { Info } from \"../info/Info\";\nimport { Chicken } from \"../../models/chicken/chicken\";\nimport { toggleFeedingAction, toggleInfoAction } from \"../farm/actions\";\nimport { AllFarmActions } from \"../farm/reducer\";\nimport { TOGGLE_FEEDING_BTN_ID } from \"./consts\";\n\ninterface MenuProps {\n  isInfoOpen: boolean;\n  isFeeding: boolean;\n  chickens: Chicken[];\n  dispatch: React.Dispatch<AllFarmActions>;\n}\n\nexport const Menu: React.FC<MenuProps> = ({ isInfoOpen, isFeeding, chickens, dispatch }) => {\n  const toggleInfo = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    dispatch(toggleInfoAction());\n  };\n\n  const toggleFeeding = (e: React.MouseEvent<HTMLButtonElement>) => {\n    e.stopPropagation();\n    dispatch(toggleFeedingAction());\n  };\n\n  return (\n    <div className={cx(styles.menu, isInfoOpen && styles.visible)}>\n      <div className={styles.toolBar}>\n        <button className={cx(styles.farmButton, isInfoOpen && styles.active)} onClick={toggleInfo}>\n          <img src={chickenUrl} alt=\"info\"></img>\n        </button>\n        <button\n          className={cx(styles.farmButton, isFeeding && styles.active)}\n          onClick={toggleFeeding}\n          id={TOGGLE_FEEDING_BTN_ID}\n        >\n          <img src={foodUrl} alt=\"food\"></img>\n        </button>\n      </div>\n      <Info chickens={chickens} isOpen={isInfoOpen} />\n    </div>\n  );\n};\n","import React, { useRef, useEffect } from \"react\";\nimport styles from \"./staticCanvas.module.scss\";\nimport { drawItems } from \"../../utils/drawItems\";\nimport { StaticItems } from \"../../types/types\";\n\ninterface StaticCanvasProps extends StaticItems {\n  canvasWidth: number;\n  canvasHeight: number;\n}\n\nexport const StaticCanvas: React.FC<StaticCanvasProps> = ({ canvasWidth, canvasHeight, items }) => {\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n\n  useEffect(() => {\n    drawItems({\n      canvasRef,\n      canvasWidth,\n      canvasHeight,\n      items,\n    });\n  }, [canvasWidth, canvasHeight, items]);\n\n  return (\n    <canvas\n      ref={canvasRef}\n      width={canvasWidth}\n      height={canvasHeight}\n      className={styles.canvas}\n    ></canvas>\n  );\n};\n","import React, { useCallback, useState } from \"react\";\nimport ReactTooltip from \"react-tooltip\";\nimport { EventName } from \"../../utils/eventUtils/events\";\nimport { useEventEffect } from \"../../utils/eventUtils/useEventEffect\";\nimport styles from \"./TooltipOverlay.module.scss\";\n\nexport interface TooltipProps {\n  id: string;\n  text: string;\n  minX: number;\n  minY: number;\n  maxX: number;\n  maxY: number;\n}\n\ntype AddTooltip = (tProps: TooltipProps) => void;\ntype RemoveTooltip = (id: string) => void;\ntype HasTooltip = (id: string) => boolean;\n\nexport interface OnDetectTooltipCbProps {\n  event: React.MouseEvent<HTMLDivElement>;\n  addTooltip: AddTooltip;\n  removeTooltip: RemoveTooltip;\n  hasTooltip: HasTooltip;\n}\n\ninterface TooltipOverlayProps {\n  onDetectTooltipCb: (props: OnDetectTooltipCbProps) => void;\n}\n\nexport const TooltipOverlay: React.FC<TooltipOverlayProps> = ({ onDetectTooltipCb }) => {\n  const [tooltips, setTooltips] = useState<TooltipProps[]>([]);\n  const addTooltip = useCallback<AddTooltip>((tProps) => setTooltips([tProps, ...tooltips]), [\n    tooltips,\n  ]);\n  const removeTooltip = useCallback<RemoveTooltip>(\n    (id) => setTooltips(tooltips.filter((p) => p.id !== id)),\n    [tooltips],\n  );\n  const hasTooltip = useCallback<HasTooltip>((id) => tooltips.some((p) => p.id === id), [tooltips]);\n\n  const onDetectTooltip = useCallback(\n    (event: React.MouseEvent<HTMLDivElement>) => {\n      onDetectTooltipCb({ event, addTooltip, removeTooltip, hasTooltip });\n    },\n    [onDetectTooltipCb, addTooltip, removeTooltip, hasTooltip],\n  );\n\n  useEventEffect(EventName.DetectTooltip, onDetectTooltip);\n\n  return (\n    <div className={styles.container}>\n      {tooltips.map(({ id, text, minX, maxY, maxX, minY }) => (\n        <React.Fragment key={id}>\n          <div\n            data-for={id}\n            data-tip={text}\n            data-iscapture={true}\n            style={{\n              position: \"relative\",\n              top: `${minY}px`,\n              left: `${minX}px`,\n              width: `${maxX - minX}px`,\n              height: `${maxY - minY}px`,\n            }}\n          />\n          <ReactTooltip id={id} place=\"top\" type=\"dark\" effect=\"solid\" multiline={true} />\n        </React.Fragment>\n      ))}\n    </div>\n  );\n};\n","import React from \"react\";\nimport { Zone } from \"../../models/globalPositionManager\";\n\ninterface ColoredZoneProps {\n  zone: Zone;\n  id: string;\n  color: string;\n}\n\nexport const ColoredZone: React.FC<ColoredZoneProps> = ({ color, zone, id }) => {\n  return (\n    <div\n      id={id}\n      style={{\n        position: \"absolute\",\n        backgroundColor: color,\n        top: zone.top,\n        height: zone.bottom - zone.top,\n        left: zone.left,\n        width: zone.right - zone.left,\n      }}\n    />\n  );\n};\n","import React, { useRef } from \"react\";\nimport { Zone } from \"../../models/globalPositionManager\";\nimport { ColoredZone } from \"./ColoredZone\";\n\ninterface ZoneDebuggerProps {\n  freeZones: Zone[];\n  noGoZones: Zone[];\n  hidden: boolean;\n}\n\nexport const ZoneDebugger: React.FC<ZoneDebuggerProps> = ({ freeZones, noGoZones, hidden }) => {\n  const getRandomColor = () => {\n    const letters = \"0123456789ABCDEF\";\n    let color = \"#\";\n    for (let y = 0; y < 6; y++) {\n      color += letters.charAt(Math.floor(Math.random() * letters.length));\n    }\n    return color + \"70\";\n  };\n\n  const freeZoneColors = useRef(freeZones.map(getRandomColor)).current;\n\n  if (hidden) {\n    return null;\n  }\n\n  return (\n    <>\n      {freeZones.map((zone, i) => {\n        const id = `free-zone-${i}`;\n        return <ColoredZone id={id} key={id} zone={zone} color={freeZoneColors[i]} />;\n      })}\n      {noGoZones.map((zone, i) => {\n        const id = `no-go-zone-${i}`;\n        return <ColoredZone id={id} key={id} zone={zone} color={\"#ff00009c\"} />;\n      })}\n    </>\n  );\n};\n","import React, { useCallback } from \"react\";\nimport cx from \"classnames\";\nimport styles from \"./gamePage.module.scss\";\nimport { ChickenCanvas } from \"../../components/chickenCanvas/ChickenCanvas\";\nimport { FoodCanvas } from \"../../components/foodCanvas/FoodCanvas\";\nimport { InteractionLayer } from \"../../components/interactionLayer/InteractionLayer\";\nimport { Menu } from \"../../components/menu/Menu\";\nimport { StaticCanvas } from \"../../components/StaticCanvas/StaticCanvas\";\nimport {\n  OnDetectTooltipCbProps,\n  TooltipOverlay,\n} from \"../../components/tooltipOverlay/TooltipOverlay\";\nimport { AllFarmActions, FarmState } from \"../../components/farm/reducer\";\nimport { handleChickenHover } from \"./utils\";\nimport { ZoneDebugger } from \"../../components/zoneDebugger/ZoneDebugger\";\nimport { version } from \"../../../package.json\";\nimport { globalPositionManager } from \"../../models/globalPositionManager\";\nimport { DEBUG_ZONES } from \"../../gameConfig\";\n\ninterface GamePageProps extends FarmState {\n  canvasWidth: number;\n  canvasHeight: number;\n  sprite: HTMLImageElement;\n  dispatch: React.Dispatch<AllFarmActions>;\n}\n\nexport const GamePage: React.FC<GamePageProps> = ({\n  isDragging,\n  isFeeding,\n  food,\n  chickens,\n  isInfoOpen,\n  canvasWidth,\n  canvasHeight,\n  items,\n  sprite,\n  dispatch,\n}) => {\n  const onDetectTooltipCb = useCallback(\n    (args: OnDetectTooltipCbProps) => handleChickenHover(chickens, args),\n    [chickens],\n  );\n\n  return (\n    <div className={cx(styles.wrapper, isFeeding && styles.feeding)}>\n      <ZoneDebugger\n        noGoZones={globalPositionManager.noGoZones}\n        freeZones={globalPositionManager.freeZones}\n        hidden={!DEBUG_ZONES}\n      />\n      <InteractionLayer>\n        <div className={styles.bg} />\n        <StaticCanvas canvasWidth={canvasWidth} canvasHeight={canvasHeight} items={items} />\n        <FoodCanvas\n          canvasWidth={canvasWidth}\n          canvasHeight={canvasHeight}\n          food={food}\n          isDragging={isDragging}\n          isFeeding={isFeeding}\n          sprite={sprite}\n          dispatch={dispatch}\n        />\n        <ChickenCanvas canvasWidth={canvasWidth} canvasHeight={canvasHeight} chickens={chickens} />\n        <TooltipOverlay onDetectTooltipCb={onDetectTooltipCb} />\n        <a\n          href=\"https://github.com/kobawan/idle-chicken-farm/blob/master/CHANGELOG.md\"\n          target=\"_blank\"\n          rel=\"noreferrer noopener\"\n          className={styles.version}\n        >\n          {version}\n        </a>\n        <Menu\n          isInfoOpen={isInfoOpen}\n          isFeeding={isFeeding}\n          chickens={chickens}\n          dispatch={dispatch}\n        />\n      </InteractionLayer>\n    </div>\n  );\n};\n","import { Chicken } from \"../../models/chicken/chicken\";\nimport { OnDetectTooltipCbProps } from \"../../components/tooltipOverlay/TooltipOverlay\";\n\nexport const handleChickenHover = (\n  chickens: Chicken[],\n  { event, addTooltip, removeTooltip, hasTooltip }: OnDetectTooltipCbProps,\n) => {\n  const { clientX, clientY } = event;\n  chickens.forEach((chicken) => {\n    const { id, name, gender } = chicken;\n    const { minX, minY, maxX, maxY } = chicken.boundary;\n    const withinBoundaries =\n      clientX >= minX && clientX <= maxX && clientY >= minY && clientY <= maxY;\n    const isHovered = hasTooltip(id);\n\n    if (withinBoundaries && !isHovered) {\n      addTooltip({\n        id,\n        text: `${gender === \"male\" ? \"\" : \"\"} ${name}`,\n        minX,\n        minY,\n        maxX,\n        maxY,\n      });\n      return;\n    }\n    if (!withinBoundaries && isHovered) {\n      removeTooltip(id);\n    }\n  });\n};\n","import React, { useEffect, memo, useReducer, useState } from \"react\";\nimport spriteUrl from \"../../assets/farm_sprite.png\";\nimport { useWindowDimensionsEffect } from \"../../utils/useWindowDimensions\";\nimport { getChickens } from \"../../utils/drawChickens\";\nimport { getItems } from \"../../utils/drawItems\";\nimport { getFood } from \"../../utils/drawFood\";\nimport { farmReducer, initialFarmState } from \"./reducer\";\nimport { setItemsAction, setChickensAction, setFoodAction } from \"./actions\";\nimport { loadImage } from \"../../utils/loadImages\";\nimport { initSave } from \"../../utils/saveUtils/migrateSaves\";\nimport { LoadingPage } from \"../../pages/loadingPage/LoadingPage\";\nimport { GamePage } from \"../../pages/gamePage/GamePage\";\nimport { globalPositionManager } from \"../../models/globalPositionManager\";\n\nexport const Farm: React.FC = memo(() => {\n  const { canvasWidth, canvasHeight } = useWindowDimensionsEffect();\n  const [{ isDragging, isFeeding, isInfoOpen, items, chickens, food }, dispatch] = useReducer(\n    farmReducer,\n    initialFarmState,\n  );\n  const [sprite, setSprite] = useState<HTMLImageElement>();\n  const [isLoading, setIsLoading] = useState(true);\n  const [startFadingLoadingPage, setStartFadingLoadingPage] = useState(false);\n\n  useEffect(() => {\n    loadImage(spriteUrl)\n      .then((img) => {\n        initSave(canvasWidth, canvasHeight, img);\n        setSprite(img);\n      })\n      .catch(() => {\n        // TODO: improve error handling\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (!sprite) {\n      return;\n    }\n    globalPositionManager.updateCanvasDimension({ canvasWidth, canvasHeight });\n\n    const newItems = getItems(canvasWidth, canvasHeight, sprite);\n    const newChickens = getChickens(canvasWidth, canvasHeight, sprite);\n    const newFood = getFood(canvasWidth, canvasHeight, sprite);\n    dispatch(setItemsAction(newItems));\n    dispatch(setChickensAction(newChickens));\n    dispatch(setFoodAction(newFood));\n\n    setStartFadingLoadingPage(true);\n    setIsLoading(false);\n  }, [canvasWidth, canvasHeight, sprite]);\n\n  /*\n   * Very important to not render canvases before init is done,\n   * otherwise the saves are overritten with empty arrays\n   */\n  return (\n    <>\n      {(isLoading || startFadingLoadingPage) && (\n        <LoadingPage\n          shouldStartFading={startFadingLoadingPage}\n          stopFading={() => setStartFadingLoadingPage(false)}\n        />\n      )}\n      {!isLoading && (\n        <GamePage\n          {...{\n            isDragging,\n            isFeeding,\n            isInfoOpen,\n            items,\n            chickens,\n            food,\n            canvasHeight,\n            canvasWidth,\n            sprite: sprite as HTMLImageElement,\n            dispatch,\n          }}\n        />\n      )}\n    </>\n  );\n});\n","import { useState, useEffect } from \"react\";\nimport debounce from \"lodash.debounce\";\n\nexport const useWindowDimensionsEffect = (resizeBy = 1) => {\n  const [{ width, height }, setDimensions] = useState({\n    width: window.innerWidth,\n    height: window.innerHeight,\n  });\n\n  useEffect(() => {\n    const handleResize = debounce(\n      () => {\n        setDimensions({\n          width: window.innerWidth,\n          height: window.innerHeight,\n        });\n      },\n      500,\n      { trailing: true, leading: false },\n    );\n    window.addEventListener(\"resize\", handleResize);\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n\n  return {\n    canvasWidth: width / resizeBy,\n    canvasHeight: height / resizeBy,\n  };\n};\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\",\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\",\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\"No internet connection found. App is running in offline mode.\");\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.scss\";\nimport { Farm } from \"./components/farm/Farm\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<Farm />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}